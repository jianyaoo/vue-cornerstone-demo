{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { metaData } from '@cornerstonejs/core';\nconst groupBy = (array, key) => {\n  return array.reduce((rv, x) => {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n};\nfunction splitFramesByFrameReferenceTime(imageIds) {\n  const framesMetadata = imageIds.map(imageId => {\n    const petImageModule = metaData.get('petImageModule', imageId);\n    const {\n      frameReferenceTime = 0\n    } = petImageModule ?? {};\n    return {\n      imageId,\n      frameReferenceTime\n    };\n  });\n  const framesGroups = groupBy(framesMetadata, 'frameReferenceTime');\n  const sortedFrameReferenceTimes = Object.keys(framesGroups).map(Number.parseFloat).sort((a, b) => a - b);\n  const imageIdsGroups = sortedFrameReferenceTimes.map(key => framesGroups[key].map(item => item.imageId));\n  return imageIdsGroups;\n}\nfunction splitImageIdsBy4DTags(imageIds) {\n  const fncList = [splitFramesByFrameReferenceTime];\n  for (let i = 0; i < fncList.length; i++) {\n    const framesGroups = fncList[i](imageIds);\n    if (!framesGroups || framesGroups.length <= 1) {\n      continue;\n    }\n    const framesPerGroup = framesGroups[0].length;\n    const groupsHaveSameLength = framesGroups.every(g => g.length === framesPerGroup);\n    if (groupsHaveSameLength) {\n      return framesGroups;\n    }\n  }\n  return [imageIds];\n}\nexport default splitImageIdsBy4DTags;","map":{"version":3,"names":["metaData","groupBy","array","key","reduce","rv","x","push","splitFramesByFrameReferenceTime","imageIds","framesMetadata","map","imageId","petImageModule","get","frameReferenceTime","framesGroups","sortedFrameReferenceTimes","Object","keys","Number","parseFloat","sort","a","b","imageIdsGroups","item","splitImageIdsBy4DTags","fncList","i","length","framesPerGroup","groupsHaveSameLength","every","g"],"sources":["../../../src/helpers/splitImageIdsBy4DTags.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,QAAQ,QAAQ,qBAAqB;AAe9C,MAAMC,OAAO,GAAGA,CAACC,KAAK,EAAEC,GAAG,KAAI;EAC7B,OAAOD,KAAK,CAACE,MAAM,CAAC,CAACC,EAAE,EAAEC,CAAC,KAAI;IAC5B,CAACD,EAAE,CAACC,CAAC,CAACH,GAAG,CAAC,CAAC,GAAGE,EAAE,CAACC,CAAC,CAACH,GAAG,CAAC,CAAC,IAAI,EAAE,EAAEI,IAAI,CAACD,CAAC,CAAC;IACvC,OAAOD,EAAE;EACX,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAED,SAASG,+BAA+BA,CAACC,QAAkB;EACzD,MAAMC,cAAc,GAAoCD,QAAQ,CAACE,GAAG,CACjEC,OAAe,IAA8B;IAC5C,MAAMC,cAAc,GAAGb,QAAQ,CAACc,GAAG,CAAC,gBAAgB,EAAEF,OAAO,CAAC;IAC9D,MAAM;MAAEG,kBAAkB,GAAG;IAAC,CAAE,GAAGF,cAAc,IAAI,EAAE;IACvD,OAAO;MAAED,OAAO;MAAEG;IAAkB,CAAE;EACxC,CAAC,CACF;EAED,MAAMC,YAAY,GAAGf,OAAO,CAACS,cAAc,EAAE,oBAAoB,CAAC;EAClE,MAAMO,yBAAyB,GAAGC,MAAM,CAACC,IAAI,CAACH,YAAY,CAAC,CACxDL,GAAG,CAACS,MAAM,CAACC,UAAU,CAAC,CACtBC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,CAAC;EAExB,MAAMC,cAAc,GAAGR,yBAAyB,CAACN,GAAG,CAAER,GAAG,IACvDa,YAAY,CAACb,GAAG,CAAC,CAACQ,GAAG,CAAEe,IAAI,IAAKA,IAAI,CAACd,OAAO,CAAC,CAC9C;EAED,OAAOa,cAAc;AACvB;AAQA,SAASE,qBAAqBA,CAAClB,QAAkB;EAC/C,MAAMmB,OAAO,GAAG,CAACpB,+BAA+B,CAAC;EAEjD,KAAK,IAAIqB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,OAAO,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;IACvC,MAAMb,YAAY,GAAGY,OAAO,CAACC,CAAC,CAAC,CAACpB,QAAQ,CAAC;IAEzC,IAAI,CAACO,YAAY,IAAIA,YAAY,CAACc,MAAM,IAAI,CAAC,EAAE;MAE7C;;IAGF,MAAMC,cAAc,GAAGf,YAAY,CAAC,CAAC,CAAC,CAACc,MAAM;IAC7C,MAAME,oBAAoB,GAAGhB,YAAY,CAACiB,KAAK,CAC5CC,CAAC,IAAKA,CAAC,CAACJ,MAAM,KAAKC,cAAc,CACnC;IAED,IAAIC,oBAAoB,EAAE;MACxB,OAAOhB,YAAY;;;EAKvB,OAAO,CAACP,QAAQ,CAAC;AACnB;AAEA,eAAekB,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}