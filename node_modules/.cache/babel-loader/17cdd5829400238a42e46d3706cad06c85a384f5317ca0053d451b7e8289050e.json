{"ast":null,"code":"class Widget {\n  constructor({\n    id,\n    container\n  }) {\n    this._containerResizeCallback = entries => {\n      let width;\n      let height;\n      const {\n        contentRect,\n        contentBoxSize\n      } = entries[0];\n      if (contentRect) {\n        width = contentRect.width;\n        height = contentRect.height;\n      } else if (contentBoxSize?.length) {\n        width = contentBoxSize[0].inlineSize;\n        height = contentBoxSize[0].blockSize;\n      }\n      this._containerSize = {\n        width,\n        height\n      };\n      this.onContainerResize();\n    };\n    this._id = id;\n    this._containerSize = {\n      width: 0,\n      height: 0\n    };\n    this._rootElement = this.createRootElement(id);\n    this._containerResizeObserver = new ResizeObserver(this._containerResizeCallback);\n    if (container) {\n      this.appendTo(container);\n    }\n  }\n  get id() {\n    return this._id;\n  }\n  get rootElement() {\n    return this._rootElement;\n  }\n  appendTo(container) {\n    const {\n      _rootElement: rootElement,\n      _containerResizeObserver: resizeObserver\n    } = this;\n    const {\n      parentElement: currentContainer\n    } = rootElement;\n    if (!container || container === currentContainer) {\n      return;\n    }\n    if (currentContainer) {\n      resizeObserver.unobserve(currentContainer);\n    }\n    container.appendChild(rootElement);\n    resizeObserver.observe(container);\n  }\n  destroy() {\n    const {\n      _rootElement: rootElement,\n      _containerResizeObserver: resizeObserver\n    } = this;\n    const {\n      parentElement\n    } = rootElement;\n    parentElement?.removeChild(rootElement);\n    resizeObserver.disconnect();\n  }\n  get containerSize() {\n    return {\n      ...this._containerSize\n    };\n  }\n  createRootElement(id) {\n    const rootElement = document.createElement('div');\n    rootElement.id = id;\n    rootElement.classList.add('widget');\n    Object.assign(rootElement.style, {\n      width: '100%',\n      height: '100%'\n    });\n    return rootElement;\n  }\n  onContainerResize() {}\n}\nexport { Widget as default, Widget };","map":{"version":3,"names":["Widget","constructor","id","container","_containerResizeCallback","entries","width","height","contentRect","contentBoxSize","length","inlineSize","blockSize","_containerSize","onContainerResize","_id","_rootElement","createRootElement","_containerResizeObserver","ResizeObserver","appendTo","rootElement","resizeObserver","parentElement","currentContainer","unobserve","appendChild","observe","destroy","removeChild","disconnect","containerSize","document","createElement","classList","add","Object","assign","style","default"],"sources":["../../../src/widgets/Widget.ts"],"sourcesContent":[null],"mappings":"AA2CA,MAAeA,MAAM;EAMnBC,YAAY;IAAEC,EAAE;IAAEC;EAAS,CAAe;IAgGlC,KAAAC,wBAAwB,GAAIC,OAA8B,IAAU;MAC1E,IAAIC,KAAK;MACT,IAAIC,MAAM;MAEV,MAAM;QAAEC,WAAW;QAAEC;MAAc,CAAE,GAAGJ,OAAO,CAAC,CAAC,CAAC;MAMlD,IAAIG,WAAW,EAAE;QACfF,KAAK,GAAGE,WAAW,CAACF,KAAK;QACzBC,MAAM,GAAGC,WAAW,CAACD,MAAM;OAC5B,MAAM,IAAIE,cAAc,EAAEC,MAAM,EAAE;QACjCJ,KAAK,GAAGG,cAAc,CAAC,CAAC,CAAC,CAACE,UAAU;QACpCJ,MAAM,GAAGE,cAAc,CAAC,CAAC,CAAC,CAACG,SAAS;;MAGtC,IAAI,CAACC,cAAc,GAAG;QAAEP,KAAK;QAAEC;MAAM,CAAE;MACvC,IAAI,CAACO,iBAAiB,EAAE;IAC1B,CAAC;IAnHC,IAAI,CAACC,GAAG,GAAGb,EAAE;IACb,IAAI,CAACW,cAAc,GAAG;MAAEP,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAC,CAAE;IAC7C,IAAI,CAACS,YAAY,GAAG,IAAI,CAACC,iBAAiB,CAACf,EAAE,CAAC;IAC9C,IAAI,CAACgB,wBAAwB,GAAG,IAAIC,cAAc,CAChD,IAAI,CAACf,wBAAwB,CAC9B;IAED,IAAID,SAAS,EAAE;MACb,IAAI,CAACiB,QAAQ,CAACjB,SAAS,CAAC;;EAE5B;EAKA,IAAWD,EAAEA,CAAA;IACX,OAAO,IAAI,CAACa,GAAG;EACjB;EAKA,IAAWM,WAAWA,CAAA;IACpB,OAAO,IAAI,CAACL,YAAY;EAC1B;EAMOI,QAAQA,CAACjB,SAAsB;IACpC,MAAM;MACJa,YAAY,EAAEK,WAAW;MACzBH,wBAAwB,EAAEI;IAAc,CACzC,GAAG,IAAI;IACR,MAAM;MAAEC,aAAa,EAAEC;IAAgB,CAAE,GAAGH,WAAW;IAEvD,IAAI,CAAClB,SAAS,IAAIA,SAAS,KAAKqB,gBAAgB,EAAE;MAChD;;IAGF,IAAIA,gBAAgB,EAAE;MACpBF,cAAc,CAACG,SAAS,CAACD,gBAAgB,CAAC;;IAG5CrB,SAAS,CAACuB,WAAW,CAACL,WAAW,CAAC;IAClCC,cAAc,CAACK,OAAO,CAACxB,SAAS,CAAC;EACnC;EAKOyB,OAAOA,CAAA;IACZ,MAAM;MACJZ,YAAY,EAAEK,WAAW;MACzBH,wBAAwB,EAAEI;IAAc,CACzC,GAAG,IAAI;IACR,MAAM;MAAEC;IAAa,CAAE,GAAGF,WAAW;IAErCE,aAAa,EAAEM,WAAW,CAACR,WAAW,CAAC;IACvCC,cAAc,CAACQ,UAAU,EAAE;EAC7B;EAEA,IAAcC,aAAaA,CAAA;IAEzB,OAAO;MAAE,GAAG,IAAI,CAAClB;IAAc,CAAE;EACnC;EAOUI,iBAAiBA,CAACf,EAAU;IACpC,MAAMmB,WAAW,GAAGW,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAEjDZ,WAAW,CAACnB,EAAE,GAAGA,EAAE;IACnBmB,WAAW,CAACa,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC;IAEnCC,MAAM,CAACC,MAAM,CAAChB,WAAW,CAACiB,KAAK,EAAE;MAC/BhC,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE;KACT,CAAC;IAEF,OAAOc,WAAW;EACpB;EAMUP,iBAAiBA,CAAA,GAE3B;;AAyBF,SAASd,MAAM,IAAIuC,OAAO,EAAEvC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}