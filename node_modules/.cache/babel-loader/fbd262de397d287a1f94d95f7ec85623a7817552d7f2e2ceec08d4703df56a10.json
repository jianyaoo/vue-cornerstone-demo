{"ast":null,"code":"import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport { Swipe } from '../../enums/Touch';\nimport getTouchEventPoints from './getTouchEventPoints';\nimport { copyPoints, copyPointsList, getDeltaDistanceBetweenIPoints, getDeltaDistance, getDeltaPoints, getMeanTouchPoints } from '../../utilities/touch';\nimport { Settings } from '@cornerstonejs/core';\nconst runtimeSettings = Settings.getRuntimeSettings();\nconst {\n  TOUCH_START,\n  TOUCH_START_ACTIVATE,\n  TOUCH_PRESS,\n  TOUCH_DRAG,\n  TOUCH_END,\n  TOUCH_TAP,\n  TOUCH_SWIPE\n} = Events;\nconst zeroIPoint = {\n  page: [0, 0],\n  client: [0, 0],\n  canvas: [0, 0],\n  world: [0, 0, 0]\n};\nconst zeroIDistance = {\n  page: 0,\n  client: 0,\n  canvas: 0,\n  world: 0\n};\nconst defaultState = {\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  element: null,\n  startPointsList: [{\n    ...zeroIPoint,\n    touch: null\n  }],\n  lastPointsList: [{\n    ...zeroIPoint,\n    touch: null\n  }],\n  isTouchStart: false,\n  startTime: null,\n  pressTimeout: null,\n  pressDelay: 700,\n  pressMaxDistance: 5,\n  accumulatedDistance: zeroIDistance,\n  swipeDistanceThreshold: 48,\n  swiped: false,\n  swipeToleranceMs: 300\n};\nconst defaultTapState = {\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  element: null,\n  startPointsList: [{\n    ...zeroIPoint,\n    touch: null\n  }],\n  taps: 0,\n  tapTimeout: null,\n  tapMaxDistance: 24,\n  tapToleranceMs: 300\n};\nlet state = JSON.parse(JSON.stringify(defaultState));\nlet tapState = JSON.parse(JSON.stringify(defaultTapState));\nfunction triggerEventCallback(ele, name, eventDetail) {\n  return triggerEvent(ele, name, eventDetail);\n}\nfunction touchStartListener(evt) {\n  state.element = evt.currentTarget;\n  const enabledElement = getEnabledElement(state.element);\n  const {\n    renderingEngineId,\n    viewportId\n  } = enabledElement;\n  state.renderingEngineId = renderingEngineId;\n  state.viewportId = viewportId;\n  if (state.isTouchStart) {\n    return;\n  }\n  clearTimeout(state.pressTimeout);\n  state.pressTimeout = setTimeout(() => _onTouchPress(evt), state.pressDelay);\n  _onTouchStart(evt);\n  document.addEventListener('touchmove', _onTouchDrag);\n  document.addEventListener('touchend', _onTouchEnd);\n}\nfunction _onTouchPress(evt) {\n  const totalDistance = state.accumulatedDistance.canvas;\n  if (totalDistance > state.pressMaxDistance) {\n    return;\n  }\n  const eventDetail = {\n    event: evt,\n    eventName: TOUCH_PRESS,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    startPointsList: copyPointsList(state.startPointsList),\n    lastPointsList: copyPointsList(state.lastPointsList),\n    startPoints: copyPoints(getMeanTouchPoints(state.startPointsList)),\n    lastPoints: copyPoints(getMeanTouchPoints(state.lastPointsList))\n  };\n  triggerEventCallback(eventDetail.element, TOUCH_PRESS, eventDetail);\n}\nfunction _onTouchStart(evt) {\n  state.isTouchStart = true;\n  state.startTime = new Date();\n  const startPointsList = getTouchEventPoints(evt, state.element);\n  const startPoints = getMeanTouchPoints(startPointsList);\n  const deltaPoints = zeroIPoint;\n  const deltaDistance = zeroIDistance;\n  const eventDetail = {\n    event: evt,\n    eventName: TOUCH_START,\n    element: state.element,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    startPointsList: startPointsList,\n    lastPointsList: startPointsList,\n    currentPointsList: startPointsList,\n    startPoints: startPoints,\n    lastPoints: startPoints,\n    currentPoints: startPoints,\n    deltaPoints,\n    deltaDistance\n  };\n  state.startPointsList = copyPointsList(eventDetail.startPointsList);\n  state.lastPointsList = copyPointsList(eventDetail.lastPointsList);\n  const eventDidPropagate = triggerEventCallback(eventDetail.element, TOUCH_START, eventDetail);\n  if (eventDidPropagate) {\n    triggerEventCallback(eventDetail.element, TOUCH_START_ACTIVATE, eventDetail);\n  }\n}\nfunction _onTouchDrag(evt) {\n  const currentPointsList = getTouchEventPoints(evt, state.element);\n  const lastPointsList = _updateTouchEventsLastPoints(state.element, state.lastPointsList);\n  const deltaPoints = currentPointsList.length === lastPointsList.length ? getDeltaPoints(currentPointsList, lastPointsList) : zeroIPoint;\n  const deltaDistance = currentPointsList.length === lastPointsList.length ? getDeltaDistanceBetweenIPoints(currentPointsList, lastPointsList) : zeroIDistance;\n  const totalDistance = currentPointsList.length === lastPointsList.length ? getDeltaDistance(currentPointsList, state.lastPointsList) : zeroIDistance;\n  state.accumulatedDistance = {\n    page: state.accumulatedDistance.page + totalDistance.page,\n    client: state.accumulatedDistance.client + totalDistance.client,\n    canvas: state.accumulatedDistance.canvas + totalDistance.canvas,\n    world: state.accumulatedDistance.world + totalDistance.world\n  };\n  const eventDetail = {\n    event: evt,\n    eventName: TOUCH_DRAG,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    startPoints: getMeanTouchPoints(state.startPointsList),\n    lastPoints: getMeanTouchPoints(lastPointsList),\n    currentPoints: getMeanTouchPoints(currentPointsList),\n    startPointsList: copyPointsList(state.startPointsList),\n    lastPointsList: copyPointsList(lastPointsList),\n    currentPointsList,\n    deltaPoints: deltaPoints,\n    deltaDistance: deltaDistance\n  };\n  triggerEventCallback(state.element, TOUCH_DRAG, eventDetail);\n  _checkTouchSwipe(evt, deltaPoints);\n  state.lastPointsList = copyPointsList(currentPointsList);\n}\nfunction _onTouchEnd(evt) {\n  clearTimeout(state.pressTimeout);\n  const currentPointsList = getTouchEventPoints(evt, state.element);\n  const lastPointsList = _updateTouchEventsLastPoints(state.element, state.lastPointsList);\n  const deltaPoints = currentPointsList.length === lastPointsList.length ? getDeltaPoints(currentPointsList, lastPointsList) : getDeltaPoints(currentPointsList, currentPointsList);\n  const deltaDistance = currentPointsList.length === lastPointsList.length ? getDeltaDistanceBetweenIPoints(currentPointsList, lastPointsList) : getDeltaDistanceBetweenIPoints(currentPointsList, currentPointsList);\n  const eventDetail = {\n    event: evt,\n    eventName: TOUCH_END,\n    element: state.element,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    startPointsList: copyPointsList(state.startPointsList),\n    lastPointsList: copyPointsList(lastPointsList),\n    currentPointsList,\n    startPoints: getMeanTouchPoints(state.startPointsList),\n    lastPoints: getMeanTouchPoints(lastPointsList),\n    currentPoints: getMeanTouchPoints(currentPointsList),\n    deltaPoints,\n    deltaDistance\n  };\n  triggerEventCallback(eventDetail.element, TOUCH_END, eventDetail);\n  _checkTouchTap(evt);\n  state = JSON.parse(JSON.stringify(defaultState));\n  document.removeEventListener('touchmove', _onTouchDrag);\n  document.removeEventListener('touchend', _onTouchEnd);\n}\nfunction _checkTouchTap(evt) {\n  const currentTime = new Date().getTime();\n  const startTime = state.startTime.getTime();\n  if (currentTime - startTime > tapState.tapToleranceMs) {\n    return;\n  }\n  if (tapState.taps === 0) {\n    tapState.element = state.element;\n    tapState.renderingEngineId = state.renderingEngineId;\n    tapState.viewportId = state.viewportId;\n    tapState.startPointsList = state.startPointsList;\n  }\n  if (tapState.taps > 0 && !(tapState.element == state.element && tapState.renderingEngineId == state.renderingEngineId && tapState.viewportId == state.viewportId)) {\n    return;\n  }\n  const currentPointsList = getTouchEventPoints(evt, tapState.element);\n  const distanceFromStart = getDeltaDistance(currentPointsList, tapState.startPointsList).canvas;\n  if (distanceFromStart > tapState.tapMaxDistance) {\n    return;\n  }\n  clearTimeout(tapState.tapTimeout);\n  tapState.taps += 1;\n  tapState.tapTimeout = setTimeout(() => {\n    const eventDetail = {\n      event: evt,\n      eventName: TOUCH_TAP,\n      element: tapState.element,\n      renderingEngineId: tapState.renderingEngineId,\n      viewportId: tapState.viewportId,\n      camera: {},\n      currentPointsList,\n      currentPoints: getMeanTouchPoints(currentPointsList),\n      taps: tapState.taps\n    };\n    triggerEventCallback(eventDetail.element, TOUCH_TAP, eventDetail);\n    tapState = JSON.parse(JSON.stringify(defaultTapState));\n  }, tapState.tapToleranceMs);\n}\nfunction _checkTouchSwipe(evt, deltaPoints) {\n  const currentTime = new Date().getTime();\n  const startTime = state.startTime.getTime();\n  if (state.swiped || currentTime - startTime > state.swipeToleranceMs) {\n    return;\n  }\n  const [x, y] = deltaPoints.canvas;\n  const eventDetail = {\n    event: evt,\n    eventName: TOUCH_SWIPE,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    swipe: null\n  };\n  if (Math.abs(x) > state.swipeDistanceThreshold) {\n    eventDetail.swipe = x > 0 ? Swipe.RIGHT : Swipe.LEFT;\n    triggerEventCallback(eventDetail.element, TOUCH_SWIPE, eventDetail);\n    state.swiped = true;\n  }\n  if (Math.abs(y) > state.swipeDistanceThreshold) {\n    eventDetail.swipe = y > 0 ? Swipe.DOWN : Swipe.UP;\n    triggerEventCallback(eventDetail.element, TOUCH_SWIPE, eventDetail);\n    state.swiped = true;\n  }\n}\nfunction _updateTouchEventsLastPoints(element, lastPoints) {\n  const {\n    viewport\n  } = getEnabledElement(element);\n  return lastPoints.map(lp => {\n    const world = viewport.canvasToWorld(lp.canvas);\n    return {\n      page: lp.page,\n      client: lp.client,\n      canvas: lp.canvas,\n      world,\n      touch: lp.touch\n    };\n  });\n}\nexport default touchStartListener;","map":{"version":3,"names":["getEnabledElement","triggerEvent","Events","Swipe","getTouchEventPoints","copyPoints","copyPointsList","getDeltaDistanceBetweenIPoints","getDeltaDistance","getDeltaPoints","getMeanTouchPoints","Settings","runtimeSettings","getRuntimeSettings","TOUCH_START","TOUCH_START_ACTIVATE","TOUCH_PRESS","TOUCH_DRAG","TOUCH_END","TOUCH_TAP","TOUCH_SWIPE","zeroIPoint","page","client","canvas","world","zeroIDistance","defaultState","renderingEngineId","undefined","viewportId","element","startPointsList","touch","lastPointsList","isTouchStart","startTime","pressTimeout","pressDelay","pressMaxDistance","accumulatedDistance","swipeDistanceThreshold","swiped","swipeToleranceMs","defaultTapState","taps","tapTimeout","tapMaxDistance","tapToleranceMs","state","JSON","parse","stringify","tapState","triggerEventCallback","ele","name","eventDetail","touchStartListener","evt","currentTarget","enabledElement","clearTimeout","setTimeout","_onTouchPress","_onTouchStart","document","addEventListener","_onTouchDrag","_onTouchEnd","totalDistance","event","eventName","camera","startPoints","lastPoints","Date","deltaPoints","deltaDistance","currentPointsList","currentPoints","eventDidPropagate","_updateTouchEventsLastPoints","length","_checkTouchSwipe","_checkTouchTap","removeEventListener","currentTime","getTime","distanceFromStart","x","y","swipe","Math","abs","RIGHT","LEFT","DOWN","UP","viewport","map","lp","canvasToWorld"],"sources":["../../../../src/eventListeners/touch/touchStartListener.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}