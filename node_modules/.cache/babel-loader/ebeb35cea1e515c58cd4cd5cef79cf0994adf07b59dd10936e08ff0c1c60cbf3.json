{"ast":null,"code":"import { mat3 } from 'gl-matrix';\nfunction linePlaneIntersection(p0, p1, plane) {\n  const [x0, y0, z0] = p0;\n  const [x1, y1, z1] = p1;\n  const [A, B, C, D] = plane;\n  const a = x1 - x0;\n  const b = y1 - y0;\n  const c = z1 - z0;\n  const t = -1 * (A * x0 + B * y0 + C * z0 - D) / (A * a + B * b + C * c);\n  const X = a * t + x0;\n  const Y = b * t + y0;\n  const Z = c * t + z0;\n  return [X, Y, Z];\n}\nfunction planeEquation(normal, point, normalized = false) {\n  const [A, B, C] = normal;\n  const D = A * point[0] + B * point[1] + C * point[2];\n  if (normalized) {\n    const length = Math.sqrt(A * A + B * B + C * C);\n    return [A / length, B / length, C / length, D / length];\n  }\n  return [A, B, C, D];\n}\nfunction threePlaneIntersection(firstPlane, secondPlane, thirdPlane) {\n  const [A1, B1, C1, D1] = firstPlane;\n  const [A2, B2, C2, D2] = secondPlane;\n  const [A3, B3, C3, D3] = thirdPlane;\n  const m0 = mat3.fromValues(A1, A2, A3, B1, B2, B3, C1, C2, C3);\n  const m1 = mat3.fromValues(D1, D2, D3, B1, B2, B3, C1, C2, C3);\n  const m2 = mat3.fromValues(A1, A2, A3, D1, D2, D3, C1, C2, C3);\n  const m3 = mat3.fromValues(A1, A2, A3, B1, B2, B3, D1, D2, D3);\n  const x = mat3.determinant(m1) / mat3.determinant(m0);\n  const y = mat3.determinant(m2) / mat3.determinant(m0);\n  const z = mat3.determinant(m3) / mat3.determinant(m0);\n  return [x, y, z];\n}\nfunction planeDistanceToPoint(plane, point, signed = false) {\n  const [A, B, C, D] = plane;\n  const [x, y, z] = point;\n  const numerator = A * x + B * y + C * z - D;\n  const distance = Math.abs(numerator) / Math.sqrt(A * A + B * B + C * C);\n  const sign = signed ? Math.sign(numerator) : 1;\n  return sign * distance;\n}\nexport { linePlaneIntersection, planeEquation, threePlaneIntersection, planeDistanceToPoint };","map":{"version":3,"names":["mat3","linePlaneIntersection","p0","p1","plane","x0","y0","z0","x1","y1","z1","A","B","C","D","a","b","c","t","X","Y","Z","planeEquation","normal","point","normalized","length","Math","sqrt","threePlaneIntersection","firstPlane","secondPlane","thirdPlane","A1","B1","C1","D1","A2","B2","C2","D2","A3","B3","C3","D3","m0","fromValues","m1","m2","m3","x","determinant","y","z","planeDistanceToPoint","signed","numerator","distance","abs","sign"],"sources":["../../../src/utilities/planar.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}