{"ast":null,"code":"import { Events } from '../../enums';\nimport { getEnabledElement, triggerEvent, eventTarget, utilities as csUtils } from '@cornerstonejs/core';\nimport { AnnotationTool } from '../base';\nimport { addAnnotation, getAnnotations, removeAnnotation } from '../../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../../stateManagement/annotation/annotationLocking';\nimport * as lineSegment from '../../utilities/math/line';\nimport { drawHandles as drawHandlesSvg, drawArrow as drawArrowSvg, drawLinkedTextBox as drawLinkedTextBoxSvg } from '../../drawingSvg';\nimport { state } from '../../store';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport { resetElementCursor, hideElementCursor } from '../../cursors/elementCursor';\nclass ArrowAnnotateTool extends AnnotationTool {\n  constructor(toolProps = {}, defaultToolProps = {\n    supportedInteractionTypes: ['Mouse', 'Touch'],\n    configuration: {\n      shadow: true,\n      getTextCallback,\n      changeTextCallback,\n      preventHandleOutsideImage: false,\n      arrowFirst: true\n    }\n  }) {\n    super(toolProps, defaultToolProps);\n    this.addNewAnnotation = evt => {\n      const eventDetail = evt.detail;\n      const {\n        currentPoints,\n        element\n      } = eventDetail;\n      const worldPos = currentPoints.world;\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport,\n        renderingEngine\n      } = enabledElement;\n      hideElementCursor(element);\n      this.isDrawing = true;\n      const camera = viewport.getCamera();\n      const {\n        viewPlaneNormal,\n        viewUp\n      } = camera;\n      const referencedImageId = this.getReferencedImageId(viewport, worldPos, viewPlaneNormal, viewUp);\n      const {\n        arrowFirst\n      } = this.configuration;\n      const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n      const annotation = {\n        highlighted: true,\n        invalidated: true,\n        metadata: {\n          toolName: this.getToolName(),\n          viewPlaneNormal: [...viewPlaneNormal],\n          viewUp: [...viewUp],\n          FrameOfReferenceUID,\n          referencedImageId\n        },\n        data: {\n          text: '',\n          handles: {\n            points: [[...worldPos], [...worldPos]],\n            activeHandleIndex: null,\n            arrowFirst,\n            textBox: {\n              hasMoved: false,\n              worldPosition: [0, 0, 0],\n              worldBoundingBox: {\n                topLeft: [0, 0, 0],\n                topRight: [0, 0, 0],\n                bottomLeft: [0, 0, 0],\n                bottomRight: [0, 0, 0]\n              }\n            }\n          },\n          label: ''\n        }\n      };\n      addAnnotation(annotation, element);\n      const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n      this.editData = {\n        annotation,\n        viewportIdsToRender,\n        handleIndex: 1,\n        movingTextBox: false,\n        newAnnotation: true,\n        hasMoved: false\n      };\n      this._activateDraw(element);\n      evt.preventDefault();\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      return annotation;\n    };\n    this.isPointNearTool = (element, annotation, canvasCoords, proximity) => {\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        data\n      } = annotation;\n      const [point1, point2] = data.handles.points;\n      const canvasPoint1 = viewport.worldToCanvas(point1);\n      const canvasPoint2 = viewport.worldToCanvas(point2);\n      const line = {\n        start: {\n          x: canvasPoint1[0],\n          y: canvasPoint1[1]\n        },\n        end: {\n          x: canvasPoint2[0],\n          y: canvasPoint2[1]\n        }\n      };\n      const distanceToPoint = lineSegment.distanceToPoint([line.start.x, line.start.y], [line.end.x, line.end.y], [canvasCoords[0], canvasCoords[1]]);\n      if (distanceToPoint <= proximity) {\n        return true;\n      }\n      return false;\n    };\n    this.toolSelectedCallback = (evt, annotation) => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      annotation.highlighted = true;\n      const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n      this.editData = {\n        annotation,\n        viewportIdsToRender,\n        movingTextBox: false\n      };\n      this._activateModify(element);\n      hideElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      evt.preventDefault();\n    };\n    this._endCallback = evt => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      const {\n        annotation,\n        viewportIdsToRender,\n        newAnnotation,\n        hasMoved\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      if (newAnnotation && !hasMoved) {\n        return;\n      }\n      data.handles.activeHandleIndex = null;\n      this._deactivateModify(element);\n      this._deactivateDraw(element);\n      resetElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewportId,\n        renderingEngineId,\n        renderingEngine\n      } = enabledElement;\n      if (this.isHandleOutsideImage && this.configuration.preventHandleOutsideImage) {\n        removeAnnotation(annotation.annotationUID);\n      }\n      if (newAnnotation) {\n        this.configuration.getTextCallback(text => {\n          if (!text) {\n            removeAnnotation(annotation.annotationUID);\n            triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n            this.editData = null;\n            this.isDrawing = false;\n            return;\n          }\n          annotation.data.text = text;\n          const eventType = Events.ANNOTATION_COMPLETED;\n          const eventDetail = {\n            annotation\n          };\n          triggerEvent(eventTarget, eventType, eventDetail);\n          triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n        });\n      } else {\n        const eventType = Events.ANNOTATION_MODIFIED;\n        const eventDetail = {\n          annotation,\n          viewportId,\n          renderingEngineId\n        };\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n      this.editData = null;\n      this.isDrawing = false;\n    };\n    this._dragCallback = evt => {\n      this.isDrawing = true;\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      const {\n        annotation,\n        viewportIdsToRender,\n        handleIndex,\n        movingTextBox\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      if (movingTextBox) {\n        const {\n          deltaPoints\n        } = eventDetail;\n        const worldPosDelta = deltaPoints.world;\n        const {\n          textBox\n        } = data.handles;\n        const {\n          worldPosition\n        } = textBox;\n        worldPosition[0] += worldPosDelta[0];\n        worldPosition[1] += worldPosDelta[1];\n        worldPosition[2] += worldPosDelta[2];\n        textBox.hasMoved = true;\n      } else if (handleIndex === undefined) {\n        const {\n          deltaPoints\n        } = eventDetail;\n        const worldPosDelta = deltaPoints.world;\n        const points = data.handles.points;\n        points.forEach(point => {\n          point[0] += worldPosDelta[0];\n          point[1] += worldPosDelta[1];\n          point[2] += worldPosDelta[2];\n        });\n        annotation.invalidated = true;\n      } else {\n        const {\n          currentPoints\n        } = eventDetail;\n        const worldPos = currentPoints.world;\n        data.handles.points[handleIndex] = [...worldPos];\n        annotation.invalidated = true;\n      }\n      this.editData.hasMoved = true;\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n    };\n    this.touchTapCallback = evt => {\n      if (evt.detail.taps == 2) {\n        this.doubleClickCallback(evt);\n      }\n    };\n    this.doubleClickCallback = evt => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      let annotations = getAnnotations(this.getToolName(), element);\n      annotations = this.filterInteractableAnnotationsForElement(element, annotations);\n      if (!annotations?.length) {\n        return;\n      }\n      const clickedAnnotation = annotations.find(annotation => this.isPointNearTool(element, annotation, eventDetail.currentPoints.canvas, 6));\n      if (!clickedAnnotation) {\n        return;\n      }\n      const annotation = clickedAnnotation;\n      this.configuration.changeTextCallback(clickedAnnotation, evt.detail, this._doneChangingTextCallback.bind(this, element, annotation));\n      this.editData = null;\n      this.isDrawing = false;\n      evt.stopImmediatePropagation();\n      evt.preventDefault();\n    };\n    this.cancel = element => {\n      if (this.isDrawing) {\n        this.isDrawing = false;\n        this._deactivateDraw(element);\n        this._deactivateModify(element);\n        resetElementCursor(element);\n        const {\n          annotation,\n          viewportIdsToRender,\n          newAnnotation\n        } = this.editData;\n        const {\n          data\n        } = annotation;\n        annotation.highlighted = false;\n        data.handles.activeHandleIndex = null;\n        const enabledElement = getEnabledElement(element);\n        const {\n          renderingEngine\n        } = enabledElement;\n        triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n        if (newAnnotation) {\n          const eventType = Events.ANNOTATION_COMPLETED;\n          const eventDetail = {\n            annotation\n          };\n          triggerEvent(eventTarget, eventType, eventDetail);\n        }\n        this.editData = null;\n        return annotation.annotationUID;\n      }\n    };\n    this._activateModify = element => {\n      state.isInteractingWithTool = true;\n      element.addEventListener(Events.MOUSE_UP, this._endCallback);\n      element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n      element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n      element.addEventListener(Events.TOUCH_END, this._endCallback);\n      element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    };\n    this._deactivateModify = element => {\n      state.isInteractingWithTool = false;\n      element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n      element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n      element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n      element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n      element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    };\n    this._activateDraw = element => {\n      state.isInteractingWithTool = true;\n      element.addEventListener(Events.MOUSE_UP, this._endCallback);\n      element.addEventListener(Events.MOUSE_DRAG, this._dragCallback);\n      element.addEventListener(Events.MOUSE_MOVE, this._dragCallback);\n      element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n      element.addEventListener(Events.TOUCH_END, this._endCallback);\n      element.addEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    };\n    this._deactivateDraw = element => {\n      state.isInteractingWithTool = false;\n      element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n      element.removeEventListener(Events.MOUSE_DRAG, this._dragCallback);\n      element.removeEventListener(Events.MOUSE_MOVE, this._dragCallback);\n      element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n      element.removeEventListener(Events.TOUCH_END, this._endCallback);\n      element.removeEventListener(Events.TOUCH_DRAG, this._dragCallback);\n    };\n    this.renderAnnotation = (enabledElement, svgDrawingHelper) => {\n      let renderStatus = false;\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        element\n      } = viewport;\n      let annotations = getAnnotations(this.getToolName(), element);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      annotations = this.filterInteractableAnnotationsForElement(element, annotations);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      const styleSpecifier = {\n        toolGroupId: this.toolGroupId,\n        toolName: this.getToolName(),\n        viewportId: enabledElement.viewport.id\n      };\n      for (let i = 0; i < annotations.length; i++) {\n        const annotation = annotations[i];\n        const {\n          annotationUID,\n          data\n        } = annotation;\n        const {\n          handles,\n          text\n        } = data;\n        const {\n          points,\n          activeHandleIndex\n        } = handles;\n        styleSpecifier.annotationUID = annotationUID;\n        const {\n          color,\n          lineWidth,\n          lineDash\n        } = this.getAnnotationStyle({\n          annotation,\n          styleSpecifier\n        });\n        const canvasCoordinates = points.map(p => viewport.worldToCanvas(p));\n        let activeHandleCanvasCoords;\n        if (!isAnnotationLocked(annotation) && !this.editData && activeHandleIndex !== null) {\n          activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n        }\n        if (activeHandleCanvasCoords) {\n          const handleGroupUID = '0';\n          drawHandlesSvg(svgDrawingHelper, annotationUID, handleGroupUID, canvasCoordinates, {\n            color,\n            lineWidth\n          });\n        }\n        const arrowUID = '1';\n        if (this.configuration.arrowFirst) {\n          drawArrowSvg(svgDrawingHelper, annotationUID, arrowUID, canvasCoordinates[1], canvasCoordinates[0], {\n            color,\n            width: lineWidth,\n            lineDash: lineDash\n          });\n        } else {\n          drawArrowSvg(svgDrawingHelper, annotationUID, arrowUID, canvasCoordinates[0], canvasCoordinates[1], {\n            color,\n            width: lineWidth,\n            lineDash: lineDash\n          });\n        }\n        renderStatus = true;\n        if (!viewport.getRenderingEngine()) {\n          console.warn('Rendering Engine has been destroyed');\n          return renderStatus;\n        }\n        if (!text) {\n          continue;\n        }\n        const options = this.getLinkedTextBoxStyle(styleSpecifier, annotation);\n        if (!options.visibility) {\n          data.handles.textBox = {\n            hasMoved: false,\n            worldPosition: [0, 0, 0],\n            worldBoundingBox: {\n              topLeft: [0, 0, 0],\n              topRight: [0, 0, 0],\n              bottomLeft: [0, 0, 0],\n              bottomRight: [0, 0, 0]\n            }\n          };\n          continue;\n        }\n        if (!data.handles.textBox.hasMoved) {\n          const canvasTextBoxCoords = canvasCoordinates[1];\n          data.handles.textBox.worldPosition = viewport.canvasToWorld(canvasTextBoxCoords);\n        }\n        const textBoxPosition = viewport.worldToCanvas(data.handles.textBox.worldPosition);\n        const textBoxUID = '1';\n        const boundingBox = drawLinkedTextBoxSvg(svgDrawingHelper, annotationUID, textBoxUID, [text], textBoxPosition, canvasCoordinates, {}, options);\n        const {\n          x: left,\n          y: top,\n          width,\n          height\n        } = boundingBox;\n        data.handles.textBox.worldBoundingBox = {\n          topLeft: viewport.canvasToWorld([left, top]),\n          topRight: viewport.canvasToWorld([left + width, top]),\n          bottomLeft: viewport.canvasToWorld([left, top + height]),\n          bottomRight: viewport.canvasToWorld([left + width, top + height])\n        };\n      }\n      return renderStatus;\n    };\n  }\n  handleSelectedCallback(evt, annotation, handle) {\n    const eventDetail = evt.detail;\n    const {\n      element\n    } = eventDetail;\n    const {\n      data\n    } = annotation;\n    annotation.highlighted = true;\n    let movingTextBox = false;\n    let handleIndex;\n    if (handle.worldPosition) {\n      movingTextBox = true;\n    } else {\n      handleIndex = data.handles.points.findIndex(p => p === handle);\n    }\n    const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n    this.editData = {\n      annotation,\n      viewportIdsToRender,\n      handleIndex,\n      movingTextBox\n    };\n    this._activateModify(element);\n    hideElementCursor(element);\n    const enabledElement = getEnabledElement(element);\n    const {\n      renderingEngine\n    } = enabledElement;\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n    evt.preventDefault();\n  }\n  _doneChangingTextCallback(element, annotation, updatedText) {\n    annotation.data.text = updatedText;\n    const {\n      renderingEngine,\n      viewportId,\n      renderingEngineId\n    } = getEnabledElement(element);\n    const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n    const eventType = Events.ANNOTATION_MODIFIED;\n    triggerEvent(eventTarget, eventType, {\n      annotation,\n      viewportId,\n      renderingEngineId\n    });\n  }\n  _isInsideVolume(index1, index2, dimensions) {\n    return csUtils.indexWithinDimensions(index1, dimensions) && csUtils.indexWithinDimensions(index2, dimensions);\n  }\n}\nfunction getTextCallback(doneChangingTextCallback) {\n  return doneChangingTextCallback(prompt('Enter your annotation:'));\n}\nfunction changeTextCallback(data, eventData, doneChangingTextCallback) {\n  return doneChangingTextCallback(prompt('Enter your annotation:'));\n}\nArrowAnnotateTool.toolName = 'ArrowAnnotate';\nexport default ArrowAnnotateTool;","map":{"version":3,"names":["Events","getEnabledElement","triggerEvent","eventTarget","utilities","csUtils","AnnotationTool","addAnnotation","getAnnotations","removeAnnotation","isAnnotationLocked","lineSegment","drawHandles","drawHandlesSvg","drawArrow","drawArrowSvg","drawLinkedTextBox","drawLinkedTextBoxSvg","state","getViewportIdsWithToolToRender","triggerAnnotationRenderForViewportIds","resetElementCursor","hideElementCursor","ArrowAnnotateTool","constructor","toolProps","defaultToolProps","supportedInteractionTypes","configuration","shadow","getTextCallback","changeTextCallback","preventHandleOutsideImage","arrowFirst","addNewAnnotation","evt","eventDetail","detail","currentPoints","element","worldPos","world","enabledElement","viewport","renderingEngine","isDrawing","camera","getCamera","viewPlaneNormal","viewUp","referencedImageId","getReferencedImageId","FrameOfReferenceUID","getFrameOfReferenceUID","annotation","highlighted","invalidated","metadata","toolName","getToolName","data","text","handles","points","activeHandleIndex","textBox","hasMoved","worldPosition","worldBoundingBox","topLeft","topRight","bottomLeft","bottomRight","label","viewportIdsToRender","editData","handleIndex","movingTextBox","newAnnotation","_activateDraw","preventDefault","isPointNearTool","canvasCoords","proximity","point1","point2","canvasPoint1","worldToCanvas","canvasPoint2","line","start","x","y","end","distanceToPoint","toolSelectedCallback","_activateModify","_endCallback","_deactivateModify","_deactivateDraw","viewportId","renderingEngineId","isHandleOutsideImage","annotationUID","eventType","ANNOTATION_COMPLETED","ANNOTATION_MODIFIED","_dragCallback","deltaPoints","worldPosDelta","undefined","forEach","point","touchTapCallback","taps","doubleClickCallback","annotations","filterInteractableAnnotationsForElement","length","clickedAnnotation","find","canvas","_doneChangingTextCallback","bind","stopImmediatePropagation","cancel","isInteractingWithTool","addEventListener","MOUSE_UP","MOUSE_DRAG","MOUSE_CLICK","TOUCH_TAP","TOUCH_END","TOUCH_DRAG","removeEventListener","MOUSE_MOVE","renderAnnotation","svgDrawingHelper","renderStatus","styleSpecifier","toolGroupId","id","i","color","lineWidth","lineDash","getAnnotationStyle","canvasCoordinates","map","p","activeHandleCanvasCoords","handleGroupUID","arrowUID","width","getRenderingEngine","console","warn","options","getLinkedTextBoxStyle","visibility","canvasTextBoxCoords","canvasToWorld","textBoxPosition","textBoxUID","boundingBox","left","top","height","handleSelectedCallback","handle","findIndex","updatedText","_isInsideVolume","index1","index2","dimensions","indexWithinDimensions","doneChangingTextCallback","prompt","eventData"],"sources":["../../../../src/tools/annotation/ArrowAnnotateTool.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}