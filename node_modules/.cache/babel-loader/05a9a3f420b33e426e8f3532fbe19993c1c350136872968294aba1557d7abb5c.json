{"ast":null,"code":"import { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\nimport getMouseModifier from './getMouseModifier';\nimport { keyEventListener } from '../../eventListeners';\nconst {\n  Active\n} = ToolModes;\nexport default function getActiveToolForTouchEvent(evt) {\n  const {\n    renderingEngineId,\n    viewportId\n  } = evt.detail;\n  const touchEvent = evt.detail.event;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(viewportId, renderingEngineId);\n  if (!toolGroup) {\n    return null;\n  }\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const numTouchPoints = Object.keys(touchEvent.touches).length;\n  const modifierKey = getMouseModifier(touchEvent) || keyEventListener.getModifierKey();\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n    const correctBinding = toolOptions.bindings.length && toolOptions.bindings.some(binding => (binding.numTouchPoints === numTouchPoints || numTouchPoints === 1 && binding.mouseButton === defaultMousePrimary) && binding.modifierKey === modifierKey);\n    if (toolOptions.mode === Active && correctBinding) {\n      return toolGroup.getToolInstance(toolName);\n    }\n  }\n}","map":{"version":3,"names":["ToolGroupManager","ToolModes","getMouseModifier","keyEventListener","Active","getActiveToolForTouchEvent","evt","renderingEngineId","viewportId","detail","touchEvent","event","toolGroup","getToolGroupForViewport","toolGroupToolNames","Object","keys","toolOptions","numTouchPoints","touches","length","modifierKey","getModifierKey","defaultMousePrimary","getDefaultMousePrimary","j","toolName","correctBinding","bindings","some","binding","mouseButton","mode","getToolInstance"],"sources":["../../../../src/eventDispatchers/shared/getActiveToolForTouchEvent.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,aAAa;AAC9C,SAAwBC,SAAS,QAAQ,aAAa;AAEtD,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,SAASC,gBAAgB,QAAQ,sBAAsB;AAEvD,MAAM;EAAEC;AAAM,CAAE,GAAGH,SAAS;AAW5B,eAAc,SAAUI,0BAA0BA,CAChDC,GAAwC;EAGxC,MAAM;IAAEC,iBAAiB;IAAEC;EAAU,CAAE,GAAGF,GAAG,CAACG,MAAM;EACpD,MAAMC,UAAU,GAAGJ,GAAG,CAACG,MAAM,CAACE,KAAK;EAEnC,MAAMC,SAAS,GAAGZ,gBAAgB,CAACa,uBAAuB,CACxDL,UAAU,EACVD,iBAAiB,CAClB;EAED,IAAI,CAACK,SAAS,EAAE;IACd,OAAO,IAAI;;EAGb,MAAME,kBAAkB,GAAGC,MAAM,CAACC,IAAI,CAACJ,SAAS,CAACK,WAAW,CAAC;EAE7D,MAAMC,cAAc,GAAGH,MAAM,CAACC,IAAI,CAACN,UAAU,CAACS,OAAO,CAAC,CAACC,MAAM;EAG7D,MAAMC,WAAW,GACfnB,gBAAgB,CAACQ,UAAU,CAAC,IAAIP,gBAAgB,CAACmB,cAAc,EAAE;EACnE,MAAMC,mBAAmB,GAAGX,SAAS,CAACY,sBAAsB,EAAE;EAE9D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,kBAAkB,CAACM,MAAM,EAAEK,CAAC,EAAE,EAAE;IAClD,MAAMC,QAAQ,GAAGZ,kBAAkB,CAACW,CAAC,CAAC;IACtC,MAAMR,WAAW,GAAGL,SAAS,CAACK,WAAW,CAACS,QAAQ,CAAC;IAEnD,MAAMC,cAAc,GAClBV,WAAW,CAACW,QAAQ,CAACR,MAAM,IAO3BH,WAAW,CAACW,QAAQ,CAACC,IAAI,CACtBC,OAAO,IACN,CAACA,OAAO,CAACZ,cAAc,KAAKA,cAAc,IACvCA,cAAc,KAAK,CAAC,IACnBY,OAAO,CAACC,WAAW,KAAKR,mBAAoB,KAChDO,OAAO,CAACT,WAAW,KAAKA,WAAW,CACtC;IAEH,IAAIJ,WAAW,CAACe,IAAI,KAAK5B,MAAM,IAAIuB,cAAc,EAAE;MACjD,OAAOf,SAAS,CAACqB,eAAe,CAACP,QAAQ,CAAC;;;AAGhD"},"metadata":{},"sourceType":"module","externalDependencies":[]}