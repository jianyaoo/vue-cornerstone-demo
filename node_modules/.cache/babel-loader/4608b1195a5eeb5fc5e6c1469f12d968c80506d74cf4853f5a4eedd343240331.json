{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport { Enums } from '@cornerstonejs/core';\nfunction generateImageFromTimeData(dynamicVolume, operation, frameNumbers) {\n  const frames = frameNumbers || [...Array(dynamicVolume.numTimePoints).keys()];\n  const numFrames = frames.length;\n  if (frames.length <= 1) {\n    throw new Error('Please provide two or more time points');\n  }\n  const typedArrays = dynamicVolume.getScalarDataArrays();\n  const arrayLength = typedArrays[0].length;\n  const finalArray = new Float32Array(arrayLength);\n  if (operation === Enums.DynamicOperatorType.SUM) {\n    for (let i = 0; i < numFrames; i++) {\n      const currentArray = typedArrays[frames[i]];\n      for (let j = 0; j < arrayLength; j++) {\n        finalArray[j] += currentArray[j];\n      }\n    }\n    return finalArray;\n  }\n  if (operation === Enums.DynamicOperatorType.SUBTRACT) {\n    if (frames.length > 2) {\n      throw new Error('Please provide only 2 time points for subtraction.');\n    }\n    for (let j = 0; j < arrayLength; j++) {\n      finalArray[j] += typedArrays[frames[0]][j] - typedArrays[frames[1]][j];\n    }\n    return finalArray;\n  }\n  if (operation === Enums.DynamicOperatorType.AVERAGE) {\n    for (let i = 0; i < numFrames; i++) {\n      const currentArray = typedArrays[frames[i]];\n      for (let j = 0; j < arrayLength; j++) {\n        finalArray[j] += currentArray[j];\n      }\n    }\n    for (let k = 0; k < arrayLength; k++) {\n      finalArray[k] = finalArray[k] / numFrames;\n    }\n    return finalArray;\n  }\n}\nexport default generateImageFromTimeData;","map":{"version":3,"names":["Enums","generateImageFromTimeData","dynamicVolume","operation","frameNumbers","frames","Array","numTimePoints","keys","numFrames","length","Error","typedArrays","getScalarDataArrays","arrayLength","finalArray","Float32Array","DynamicOperatorType","SUM","i","currentArray","j","SUBTRACT","AVERAGE","k"],"sources":["../../../../src/utilities/dynamicVolume/generateImageFromTimeData.ts"],"sourcesContent":[null],"mappings":";;;AAAA,SAASA,KAAK,QAAe,qBAAqB;AAclD,SAASC,yBAAyBA,CAChCC,aAAwC,EACxCC,SAAiB,EACjBC,YAAuB;EAGvB,MAAMC,MAAM,GAAGD,YAAY,IAAI,CAAC,GAAGE,KAAK,CAACJ,aAAa,CAACK,aAAa,CAAC,CAACC,IAAI,EAAE,CAAC;EAC7E,MAAMC,SAAS,GAAGJ,MAAM,CAACK,MAAM;EAE/B,IAAIL,MAAM,CAACK,MAAM,IAAI,CAAC,EAAE;IACtB,MAAM,IAAIC,KAAK,CAAC,wCAAwC,CAAC;;EAI3D,MAAMC,WAAW,GAAGV,aAAa,CAACW,mBAAmB,EAAE;EAEvD,MAAMC,WAAW,GAAGF,WAAW,CAAC,CAAC,CAAC,CAACF,MAAM;EACzC,MAAMK,UAAU,GAAG,IAAIC,YAAY,CAACF,WAAW,CAAC;EAEhD,IAAIX,SAAS,KAAKH,KAAK,CAACiB,mBAAmB,CAACC,GAAG,EAAE;IAC/C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,SAAS,EAAEU,CAAC,EAAE,EAAE;MAClC,MAAMC,YAAY,GAAGR,WAAW,CAACP,MAAM,CAACc,CAAC,CAAC,CAAC;MAC3C,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,WAAW,EAAEO,CAAC,EAAE,EAAE;QACpCN,UAAU,CAACM,CAAC,CAAC,IAAID,YAAY,CAACC,CAAC,CAAC;;;IAGpC,OAAON,UAAU;;EAGnB,IAAIZ,SAAS,KAAKH,KAAK,CAACiB,mBAAmB,CAACK,QAAQ,EAAE;IACpD,IAAIjB,MAAM,CAACK,MAAM,GAAG,CAAC,EAAE;MACrB,MAAM,IAAIC,KAAK,CAAC,oDAAoD,CAAC;;IAEvE,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,WAAW,EAAEO,CAAC,EAAE,EAAE;MACpCN,UAAU,CAACM,CAAC,CAAC,IAAIT,WAAW,CAACP,MAAM,CAAC,CAAC,CAAC,CAAC,CAACgB,CAAC,CAAC,GAAGT,WAAW,CAACP,MAAM,CAAC,CAAC,CAAC,CAAC,CAACgB,CAAC,CAAC;;IAExE,OAAON,UAAU;;EAGnB,IAAIZ,SAAS,KAAKH,KAAK,CAACiB,mBAAmB,CAACM,OAAO,EAAE;IACnD,KAAK,IAAIJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,SAAS,EAAEU,CAAC,EAAE,EAAE;MAClC,MAAMC,YAAY,GAAGR,WAAW,CAACP,MAAM,CAACc,CAAC,CAAC,CAAC;MAC3C,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,WAAW,EAAEO,CAAC,EAAE,EAAE;QACpCN,UAAU,CAACM,CAAC,CAAC,IAAID,YAAY,CAACC,CAAC,CAAC;;;IAGpC,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,WAAW,EAAEU,CAAC,EAAE,EAAE;MACpCT,UAAU,CAACS,CAAC,CAAC,GAAGT,UAAU,CAACS,CAAC,CAAC,GAAGf,SAAS;;IAE3C,OAAOM,UAAU;;AAErB;AAEA,eAAed,yBAAyB"},"metadata":{},"sourceType":"module","externalDependencies":[]}