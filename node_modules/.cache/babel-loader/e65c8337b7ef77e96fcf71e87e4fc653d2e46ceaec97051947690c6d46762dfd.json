{"ast":null,"code":"function generateLinearModalityLUT(slope, intercept) {\n  return storedPixelValue => storedPixelValue * slope + intercept;\n}\nfunction generateNonLinearModalityLUT(modalityLUT) {\n  const minValue = modalityLUT.lut[0];\n  const maxValue = modalityLUT.lut[modalityLUT.lut.length - 1];\n  const maxValueMapped = modalityLUT.firstValueMapped + modalityLUT.lut.length;\n  return storedPixelValue => {\n    if (storedPixelValue < modalityLUT.firstValueMapped) {\n      return minValue;\n    } else if (storedPixelValue >= maxValueMapped) {\n      return maxValue;\n    }\n    return modalityLUT.lut[storedPixelValue];\n  };\n}\nexport default function (slope, intercept, modalityLUT) {\n  if (modalityLUT) {\n    return generateNonLinearModalityLUT(modalityLUT);\n  }\n  return generateLinearModalityLUT(slope, intercept);\n}","map":{"version":3,"names":["generateLinearModalityLUT","slope","intercept","storedPixelValue","generateNonLinearModalityLUT","modalityLUT","minValue","lut","maxValue","length","maxValueMapped","firstValueMapped"],"sources":["../../../../../../src/RenderingEngine/helpers/cpuFallback/rendering/getModalityLut.ts"],"sourcesContent":[null],"mappings":"AAcA,SAASA,yBAAyBA,CAACC,KAAK,EAAEC,SAAS;EACjD,OAAQC,gBAAgB,IAAKA,gBAAgB,GAAGF,KAAK,GAAGC,SAAS;AACnE;AAEA,SAASE,4BAA4BA,CAACC,WAAW;EAC/C,MAAMC,QAAQ,GAAGD,WAAW,CAACE,GAAG,CAAC,CAAC,CAAC;EACnC,MAAMC,QAAQ,GAAGH,WAAW,CAACE,GAAG,CAACF,WAAW,CAACE,GAAG,CAACE,MAAM,GAAG,CAAC,CAAC;EAC5D,MAAMC,cAAc,GAAGL,WAAW,CAACM,gBAAgB,GAAGN,WAAW,CAACE,GAAG,CAACE,MAAM;EAE5E,OAAQN,gBAAgB,IAAI;IAC1B,IAAIA,gBAAgB,GAAGE,WAAW,CAACM,gBAAgB,EAAE;MACnD,OAAOL,QAAQ;KAChB,MAAM,IAAIH,gBAAgB,IAAIO,cAAc,EAAE;MAC7C,OAAOF,QAAQ;;IAGjB,OAAOH,WAAW,CAACE,GAAG,CAACJ,gBAAgB,CAAC;EAC1C,CAAC;AACH;AAYA,eAAc,UACZF,KAAa,EACbC,SAAiB,EACjBG,WAAoB;EAEpB,IAAIA,WAAW,EAAE;IACf,OAAOD,4BAA4B,CAACC,WAAW,CAAC;;EAGlD,OAAOL,yBAAyB,CAACC,KAAK,EAAEC,SAAS,CAAC;AACpD"},"metadata":{},"sourceType":"module","externalDependencies":[]}