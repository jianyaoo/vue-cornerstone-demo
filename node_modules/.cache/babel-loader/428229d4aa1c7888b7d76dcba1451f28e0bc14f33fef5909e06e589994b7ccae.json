{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport { vec2, vec3 } from 'gl-matrix';\nconst addCanvasPointsToArray = (element, canvasPoints, newCanvasPoint, commonData) => {\n  const {\n    xDir,\n    yDir,\n    spacing\n  } = commonData;\n  const enabledElement = getEnabledElement(element);\n  const {\n    viewport\n  } = enabledElement;\n  const lastWorldPos = viewport.canvasToWorld(canvasPoints[canvasPoints.length - 1]);\n  const newWorldPos = viewport.canvasToWorld(newCanvasPoint);\n  const worldPosDiff = vec3.create();\n  vec3.subtract(worldPosDiff, newWorldPos, lastWorldPos);\n  const xDist = Math.abs(vec3.dot(worldPosDiff, xDir));\n  const yDist = Math.abs(vec3.dot(worldPosDiff, yDir));\n  const numPointsToAdd = Math.max(Math.floor(xDist / spacing[0]), Math.floor(yDist / spacing[0]));\n  if (numPointsToAdd > 1) {\n    const lastCanvasPoint = canvasPoints[canvasPoints.length - 1];\n    const canvasDist = vec2.dist(lastCanvasPoint, newCanvasPoint);\n    const canvasDir = vec2.create();\n    vec2.subtract(canvasDir, newCanvasPoint, lastCanvasPoint);\n    vec2.set(canvasDir, canvasDir[0] / canvasDist, canvasDir[1] / canvasDist);\n    const distPerPoint = canvasDist / numPointsToAdd;\n    for (let i = 1; i <= numPointsToAdd; i++) {\n      canvasPoints.push([lastCanvasPoint[0] + distPerPoint * canvasDir[0] * i, lastCanvasPoint[1] + distPerPoint * canvasDir[1] * i]);\n    }\n  } else {\n    canvasPoints.push(newCanvasPoint);\n  }\n  return numPointsToAdd;\n};\nexport default addCanvasPointsToArray;","map":{"version":3,"names":["getEnabledElement","vec2","vec3","addCanvasPointsToArray","element","canvasPoints","newCanvasPoint","commonData","xDir","yDir","spacing","enabledElement","viewport","lastWorldPos","canvasToWorld","length","newWorldPos","worldPosDiff","create","subtract","xDist","Math","abs","dot","yDist","numPointsToAdd","max","floor","lastCanvasPoint","canvasDist","dist","canvasDir","set","distPerPoint","i","push"],"sources":["../../../../../src/utilities/math/polyline/addCanvasPointsToArray.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,iBAAiB,QAAQ,qBAAqB;AAEvD,SAASC,IAAI,EAAEC,IAAI,QAAQ,WAAW;AAMtC,MAAMC,sBAAsB,GAAGA,CAC7BC,OAAuB,EACvBC,YAA4B,EAC5BC,cAA4B,EAC5BC,UAAuC,KAC7B;EACV,MAAM;IAAEC,IAAI;IAAEC,IAAI;IAAEC;EAAO,CAAE,GAAGH,UAAU;EAC1C,MAAMI,cAAc,GAAGX,iBAAiB,CAACI,OAAO,CAAC;EACjD,MAAM;IAAEQ;EAAQ,CAAE,GAAGD,cAAc;EAEnC,MAAME,YAAY,GAAGD,QAAQ,CAACE,aAAa,CACzCT,YAAY,CAACA,YAAY,CAACU,MAAM,GAAG,CAAC,CAAC,CACtC;EACD,MAAMC,WAAW,GAAGJ,QAAQ,CAACE,aAAa,CAACR,cAAc,CAAC;EAE1D,MAAMW,YAAY,GAAGf,IAAI,CAACgB,MAAM,EAAE;EAElChB,IAAI,CAACiB,QAAQ,CAACF,YAAY,EAAED,WAAW,EAAEH,YAAY,CAAC;EAEtD,MAAMO,KAAK,GAAGC,IAAI,CAACC,GAAG,CAACpB,IAAI,CAACqB,GAAG,CAACN,YAAY,EAAET,IAAI,CAAC,CAAC;EACpD,MAAMgB,KAAK,GAAGH,IAAI,CAACC,GAAG,CAACpB,IAAI,CAACqB,GAAG,CAACN,YAAY,EAAER,IAAI,CAAC,CAAC;EAEpD,MAAMgB,cAAc,GAAGJ,IAAI,CAACK,GAAG,CAC7BL,IAAI,CAACM,KAAK,CAACP,KAAK,GAAGV,OAAO,CAAC,CAAC,CAAC,CAAC,EAC9BW,IAAI,CAACM,KAAK,CAACH,KAAK,GAAGd,OAAO,CAAC,CAAC,CAAC,CAAC,CAC/B;EAED,IAAIe,cAAc,GAAG,CAAC,EAAE;IACtB,MAAMG,eAAe,GAAGvB,YAAY,CAACA,YAAY,CAACU,MAAM,GAAG,CAAC,CAAC;IAE7D,MAAMc,UAAU,GAAG5B,IAAI,CAAC6B,IAAI,CAACF,eAAe,EAAEtB,cAAc,CAAC;IAE7D,MAAMyB,SAAS,GAAG9B,IAAI,CAACiB,MAAM,EAAE;IAE/BjB,IAAI,CAACkB,QAAQ,CAACY,SAAS,EAAEzB,cAAc,EAAEsB,eAAe,CAAC;IAEzD3B,IAAI,CAAC+B,GAAG,CAACD,SAAS,EAAEA,SAAS,CAAC,CAAC,CAAC,GAAGF,UAAU,EAAEE,SAAS,CAAC,CAAC,CAAC,GAAGF,UAAU,CAAC;IAEzE,MAAMI,YAAY,GAAGJ,UAAU,GAAGJ,cAAc;IAEhD,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIT,cAAc,EAAES,CAAC,EAAE,EAAE;MACxC7B,YAAY,CAAC8B,IAAI,CAAC,CAChBP,eAAe,CAAC,CAAC,CAAC,GAAGK,YAAY,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAGG,CAAC,EACpDN,eAAe,CAAC,CAAC,CAAC,GAAGK,YAAY,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAGG,CAAC,CACrD,CAAC;;GAEL,MAAM;IACL7B,YAAY,CAAC8B,IAAI,CAAC7B,cAAc,CAAC;;EAGnC,OAAOmB,cAAc;AACvB,CAAC;AAED,eAAetB,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}