{"ast":null,"code":"import { getEnabledElement } from '@cornerstonejs/core';\nimport { state } from '../../store';\nimport { ToolModes } from '../../enums';\nimport filterToolsWithAnnotationsForElement from '../../store/filterToolsWithAnnotationsForElement';\nimport filterMoveableAnnotationTools from '../../store/filterMoveableAnnotationTools';\nimport getToolsWithActionsForMouseEvent from '../shared/getToolsWithActionsForMouseEvent';\nconst {\n  Active,\n  Passive\n} = ToolModes;\nexport default function mouseDownAnnotationAction(evt) {\n  if (state.isInteractingWithTool) {\n    return false;\n  }\n  const eventDetail = evt.detail;\n  const {\n    element\n  } = eventDetail;\n  const enabledElement = getEnabledElement(element);\n  const {\n    canvas: canvasCoords\n  } = eventDetail.currentPoints;\n  if (!enabledElement) {\n    return false;\n  }\n  const toolsWithActions = getToolsWithActionsForMouseEvent(evt, [Active, Passive]);\n  const tools = Array.from(toolsWithActions.keys());\n  const annotationToolsWithAnnotations = filterToolsWithAnnotationsForElement(element, tools);\n  const moveableAnnotationTools = filterMoveableAnnotationTools(element, annotationToolsWithAnnotations, canvasCoords);\n  if (moveableAnnotationTools.length > 0) {\n    const {\n      tool,\n      annotation\n    } = moveableAnnotationTools[0];\n    const action = toolsWithActions.get(tool);\n    const method = typeof action.method === 'string' ? tool[action.method] : action.method;\n    method.call(tool, evt, annotation);\n    return true;\n  }\n  return false;\n}","map":{"version":3,"names":["getEnabledElement","state","ToolModes","filterToolsWithAnnotationsForElement","filterMoveableAnnotationTools","getToolsWithActionsForMouseEvent","Active","Passive","mouseDownAnnotationAction","evt","isInteractingWithTool","eventDetail","detail","element","enabledElement","canvas","canvasCoords","currentPoints","toolsWithActions","tools","Array","from","keys","annotationToolsWithAnnotations","moveableAnnotationTools","length","tool","annotation","action","get","method","call"],"sources":["../../../../src/eventDispatchers/mouseEventHandlers/mouseDownAnnotationAction.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,qBAAqB;AACvD,SAASC,KAAK,QAAQ,aAAa;AACnC,SAASC,SAAS,QAAQ,aAAa;AAIvC,OAAOC,oCAAoC,MAAM,kDAAkD;AACnG,OAAOC,6BAA6B,MAAM,2CAA2C;AACrF,OAAOC,gCAAgC,MAAM,4CAA4C;AAEzF,MAAM;EAAEC,MAAM;EAAEC;AAAO,CAAE,GAAGL,SAAS;AASrC,eAAc,SAAUM,yBAAyBA,CAC/CC,GAAkC;EAGlC,IAAIR,KAAK,CAACS,qBAAqB,EAAE;IAC/B,OAAO,KAAK;;EAGd,MAAMC,WAAW,GAAGF,GAAG,CAACG,MAAM;EAC9B,MAAM;IAAEC;EAAO,CAAE,GAAGF,WAAW;EAC/B,MAAMG,cAAc,GAAGd,iBAAiB,CAACa,OAAO,CAAC;EACjD,MAAM;IAAEE,MAAM,EAAEC;EAAY,CAAE,GAAGL,WAAW,CAACM,aAAa;EAE1D,IAAI,CAACH,cAAc,EAAE;IACnB,OAAO,KAAK;;EAId,MAAMI,gBAAgB,GAAGb,gCAAgC,CAACI,GAAG,EAAE,CAC7DH,MAAM,EACNC,OAAO,CACR,CAAC;EAEF,MAAMY,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACH,gBAAgB,CAACI,IAAI,EAAE,CAAC;EAGjD,MAAMC,8BAA8B,GAAGpB,oCAAoC,CACzEU,OAAO,EACPM,KAAK,CACN;EAGD,MAAMK,uBAAuB,GAAGpB,6BAA6B,CAC3DS,OAAO,EACPU,8BAA8B,EAC9BP,YAAY,CACb;EAID,IAAIQ,uBAAuB,CAACC,MAAM,GAAG,CAAC,EAAE;IACtC,MAAM;MAAEC,IAAI;MAAEC;IAAU,CAAE,GAAGH,uBAAuB,CAAC,CAAC,CAAC;IACvD,MAAMI,MAAM,GAAGV,gBAAgB,CAACW,GAAG,CAACH,IAAI,CAAC;IACzC,MAAMI,MAAM,GACV,OAAOF,MAAM,CAACE,MAAM,KAAK,QAAQ,GAAGJ,IAAI,CAACE,MAAM,CAACE,MAAM,CAAC,GAAGF,MAAM,CAACE,MAAM;IAEzEA,MAAM,CAACC,IAAI,CAACL,IAAI,EAAEjB,GAAG,EAAEkB,UAAU,CAAC;IAElC,OAAO,IAAI;;EAGb,OAAO,KAAK;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}