{"ast":null,"code":"export default function getViewportImageCornersInWorld(viewport) {\n  const {\n    imageData,\n    dimensions\n  } = viewport.getImageData();\n  const {\n    canvas\n  } = viewport;\n  const topLeftCanvas = [0, 0];\n  const topRightCanvas = [canvas.width, 0];\n  const bottomRightCanvas = [canvas.width, canvas.height];\n  const bottomLeftCanvas = [0, canvas.height];\n  const topLeftWorld = viewport.canvasToWorld(topLeftCanvas);\n  const topRightWorld = viewport.canvasToWorld(topRightCanvas);\n  const bottomRightWorld = viewport.canvasToWorld(bottomRightCanvas);\n  const bottomLeftWorld = viewport.canvasToWorld(bottomLeftCanvas);\n  const topLeftImage = imageData.worldToIndex(topLeftWorld);\n  const topRightImage = imageData.worldToIndex(topRightWorld);\n  const bottomRightImage = imageData.worldToIndex(bottomRightWorld);\n  const bottomLeftImage = imageData.worldToIndex(bottomLeftWorld);\n  return _getStackViewportImageCorners({\n    dimensions,\n    imageData,\n    topLeftImage,\n    topRightImage,\n    bottomRightImage,\n    bottomLeftImage,\n    topLeftWorld,\n    topRightWorld,\n    bottomRightWorld,\n    bottomLeftWorld\n  });\n}\nfunction _getStackViewportImageCorners({\n  dimensions,\n  imageData,\n  topLeftImage,\n  topRightImage,\n  bottomRightImage,\n  bottomLeftImage,\n  topLeftWorld,\n  topRightWorld,\n  bottomRightWorld,\n  bottomLeftWorld\n}) {\n  const topLeftImageWorld = _isInBounds(topLeftImage, dimensions) ? topLeftWorld : imageData.indexToWorld([0, 0, 0]);\n  const topRightImageWorld = _isInBounds(topRightImage, dimensions) ? topRightWorld : imageData.indexToWorld([dimensions[0] - 1, 0, 0]);\n  const bottomRightImageWorld = _isInBounds(bottomRightImage, dimensions) ? bottomRightWorld : imageData.indexToWorld([dimensions[0] - 1, dimensions[1] - 1, 0]);\n  const bottomLeftImageWorld = _isInBounds(bottomLeftImage, dimensions) ? bottomLeftWorld : imageData.indexToWorld([0, dimensions[1] - 1, 0]);\n  return [topLeftImageWorld, topRightImageWorld, bottomLeftImageWorld, bottomRightImageWorld];\n}\nfunction _isInBounds(imageCoord, dimensions) {\n  return imageCoord[0] > 0 || imageCoord[0] < dimensions[0] - 1 || imageCoord[1] > 0 || imageCoord[1] < dimensions[1] - 1 || imageCoord[2] > 0 || imageCoord[2] < dimensions[2] - 1;\n}","map":{"version":3,"names":["getViewportImageCornersInWorld","viewport","imageData","dimensions","getImageData","canvas","topLeftCanvas","topRightCanvas","width","bottomRightCanvas","height","bottomLeftCanvas","topLeftWorld","canvasToWorld","topRightWorld","bottomRightWorld","bottomLeftWorld","topLeftImage","worldToIndex","topRightImage","bottomRightImage","bottomLeftImage","_getStackViewportImageCorners","topLeftImageWorld","_isInBounds","indexToWorld","topRightImageWorld","bottomRightImageWorld","bottomLeftImageWorld","imageCoord"],"sources":["../../../src/utilities/getViewportImageCornersInWorld.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}