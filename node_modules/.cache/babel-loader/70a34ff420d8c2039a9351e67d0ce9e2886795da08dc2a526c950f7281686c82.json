{"ast":null,"code":"import { eventTarget, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport { getAnnotation } from './annotationState';\nexport default class AnnotationGroup {\n  constructor() {\n    this.annotationUIDs = new Set();\n    this._isVisible = true;\n    this.visibleFilter = this.unboundVisibleFilter.bind(this);\n  }\n  unboundVisibleFilter(uid) {\n    return !this._isVisible || !this.annotationUIDs.has(uid);\n  }\n  has(uid) {\n    return this.annotationUIDs.has(uid);\n  }\n  setVisible(isVisible = true, baseEvent, filter) {\n    if (this._isVisible === isVisible) {\n      return;\n    }\n    this._isVisible = isVisible;\n    this.annotationUIDs.forEach(uid => {\n      const annotation = getAnnotation(uid);\n      if (!annotation) {\n        this.annotationUIDs.delete(uid);\n        return;\n      }\n      if (annotation.isVisible === isVisible) {\n        return;\n      }\n      if (!isVisible && filter?.(uid) === false) {\n        return;\n      }\n      annotation.isVisible = isVisible;\n      const eventDetail = {\n        ...baseEvent,\n        annotation\n      };\n      triggerEvent(eventTarget, Events.ANNOTATION_MODIFIED, eventDetail);\n    });\n  }\n  get isVisible() {\n    return this._isVisible;\n  }\n  findNearby(uid, direction) {\n    const uids = [...this.annotationUIDs];\n    if (uids.length === 0) {\n      return null;\n    }\n    if (!uid) {\n      return uids[direction === 1 ? 0 : uids.length - 1];\n    }\n    const index = uids.indexOf(uid);\n    if (index === -1 || index + direction < 0 || index + direction >= uids.length) {\n      return null;\n    }\n    return uids[index + direction];\n  }\n  add(...annotationUIDs) {\n    annotationUIDs.forEach(annotationUID => this.annotationUIDs.add(annotationUID));\n  }\n  remove(...annotationUIDs) {\n    annotationUIDs.forEach(annotationUID => this.annotationUIDs.delete(annotationUID));\n  }\n  clear() {\n    this.annotationUIDs.clear();\n  }\n}","map":{"version":3,"names":["eventTarget","triggerEvent","Events","getAnnotation","AnnotationGroup","constructor","annotationUIDs","Set","_isVisible","visibleFilter","unboundVisibleFilter","bind","uid","has","setVisible","isVisible","baseEvent","filter","forEach","annotation","delete","eventDetail","ANNOTATION_MODIFIED","findNearby","direction","uids","length","index","indexOf","add","annotationUID","remove","clear"],"sources":["../../../../src/stateManagement/annotation/AnnotationGroup.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,WAAW,EAAEC,YAAY,QAAQ,qBAAqB;AAC/D,OAAOC,MAAM,MAAM,oBAAoB;AACvC,SAASC,aAAa,QAAQ,mBAAmB;AAWjD,eAAc,MAAOC,eAAe;EAMlCC,YAAA;IALQ,KAAAC,cAAc,GAAG,IAAIC,GAAG,EAAU;IAClC,KAAAC,UAAU,GAAG,IAAI;IAKvB,IAAI,CAACC,aAAa,GAAG,IAAI,CAACC,oBAAoB,CAACC,IAAI,CAAC,IAAI,CAAC;EAC3D;EAMUD,oBAAoBA,CAACE,GAAW;IACxC,OAAO,CAAC,IAAI,CAACJ,UAAU,IAAI,CAAC,IAAI,CAACF,cAAc,CAACO,GAAG,CAACD,GAAG,CAAC;EAC1D;EAEOC,GAAGA,CAACD,GAAW;IACpB,OAAO,IAAI,CAACN,cAAc,CAACO,GAAG,CAACD,GAAG,CAAC;EACrC;EAMOE,UAAUA,CACfC,SAAS,GAAG,IAAI,EAChBC,SAA0B,EAC1BC,MAA2C;IAE3C,IAAI,IAAI,CAACT,UAAU,KAAKO,SAAS,EAAE;MACjC;;IAEF,IAAI,CAACP,UAAU,GAAGO,SAAS;IAC3B,IAAI,CAACT,cAAc,CAACY,OAAO,CAAEN,GAAG,IAAI;MAClC,MAAMO,UAAU,GAAGhB,aAAa,CAACS,GAAG,CAAC;MACrC,IAAI,CAACO,UAAU,EAAE;QACf,IAAI,CAACb,cAAc,CAACc,MAAM,CAACR,GAAG,CAAC;QAC/B;;MAEF,IAAIO,UAAU,CAACJ,SAAS,KAAKA,SAAS,EAAE;QACtC;;MAEF,IAAI,CAACA,SAAS,IAAIE,MAAM,GAAGL,GAAG,CAAC,KAAK,KAAK,EAAE;QACzC;;MAEFO,UAAU,CAACJ,SAAS,GAAGA,SAAS;MAChC,MAAMM,WAAW,GAAG;QAClB,GAAGL,SAAS;QACZG;OACD;MACDlB,YAAY,CAACD,WAAW,EAAEE,MAAM,CAACoB,mBAAmB,EAAED,WAAW,CAAC;IACpE,CAAC,CAAC;EACJ;EAEA,IAAWN,SAASA,CAAA;IAClB,OAAO,IAAI,CAACP,UAAU;EACxB;EAGOe,UAAUA,CAACX,GAAW,EAAEY,SAAY;IACzC,MAAMC,IAAI,GAAG,CAAC,GAAG,IAAI,CAACnB,cAAc,CAAC;IACrC,IAAImB,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MACrB,OAAO,IAAI;;IAEb,IAAI,CAACd,GAAG,EAAE;MACR,OAAOa,IAAI,CAACD,SAAS,KAAK,CAAC,GAAG,CAAC,GAAGC,IAAI,CAACC,MAAM,GAAG,CAAC,CAAC;;IAEpD,MAAMC,KAAK,GAAGF,IAAI,CAACG,OAAO,CAAChB,GAAG,CAAC;IAC/B,IACEe,KAAK,KAAK,CAAC,CAAC,IACZA,KAAK,GAAGH,SAAS,GAAG,CAAC,IACrBG,KAAK,GAAGH,SAAS,IAAIC,IAAI,CAACC,MAAM,EAChC;MACA,OAAO,IAAI;;IAEb,OAAOD,IAAI,CAACE,KAAK,GAAGH,SAAS,CAAC;EAChC;EAMOK,GAAGA,CAAC,GAAGvB,cAAwB;IACpCA,cAAc,CAACY,OAAO,CAAEY,aAAa,IACnC,IAAI,CAACxB,cAAc,CAACuB,GAAG,CAACC,aAAa,CAAC,CACvC;EACH;EAMOC,MAAMA,CAAC,GAAGzB,cAAwB;IACvCA,cAAc,CAACY,OAAO,CAAEY,aAAa,IACnC,IAAI,CAACxB,cAAc,CAACc,MAAM,CAACU,aAAa,CAAC,CAC1C;EACH;EAKOE,KAAKA,CAAA;IACV,IAAI,CAAC1B,cAAc,CAAC0B,KAAK,EAAE;EAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}