{"ast":null,"code":"import { mat4 } from 'gl-matrix';\nimport { addProvider } from '../metaData';\nconst state = {};\nconst spatialRegistrationMetadataProvider = {\n  add: (query, payload) => {\n    const [viewportId1, viewportId2] = query;\n    const entryId = `${viewportId1}_${viewportId2}`;\n    if (!state[entryId]) {\n      state[entryId] = {};\n    }\n    state[entryId] = payload;\n  },\n  get: (type, viewportId1, viewportId2) => {\n    if (type !== 'spatialRegistrationModule') {\n      return;\n    }\n    const entryId = `${viewportId1}_${viewportId2}`;\n    if (state[entryId]) {\n      return state[entryId];\n    }\n    const entryIdReverse = `${viewportId2}_${viewportId1}`;\n    if (state[entryIdReverse]) {\n      return mat4.invert(mat4.create(), state[entryIdReverse]);\n    }\n  }\n};\naddProvider(spatialRegistrationMetadataProvider.get.bind(spatialRegistrationMetadataProvider));\nexport default spatialRegistrationMetadataProvider;","map":{"version":3,"names":["mat4","addProvider","state","spatialRegistrationMetadataProvider","add","query","payload","viewportId1","viewportId2","entryId","get","type","entryIdReverse","invert","create","bind"],"sources":["../../../src/utilities/spatialRegistrationMetadataProvider.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,IAAI,QAAQ,WAAW;AAChC,SAASC,WAAW,QAAQ,aAAa;AAEzC,MAAMC,KAAK,GAAG,EAAE;AAKhB,MAAMC,mCAAmC,GAAG;EAE1CC,GAAG,EAAEA,CAACC,KAAe,EAAEC,OAAa,KAAU;IAC5C,MAAM,CAACC,WAAW,EAAEC,WAAW,CAAC,GAAGH,KAAK;IACxC,MAAMI,OAAO,GAAG,GAAGF,WAAW,IAAIC,WAAW,EAAE;IAE/C,IAAI,CAACN,KAAK,CAACO,OAAO,CAAC,EAAE;MACnBP,KAAK,CAACO,OAAO,CAAC,GAAG,EAAE;;IAGrBP,KAAK,CAACO,OAAO,CAAC,GAAGH,OAAO;EAC1B,CAAC;EAEDI,GAAG,EAAEA,CAACC,IAAY,EAAEJ,WAAmB,EAAEC,WAAmB,KAAU;IACpE,IAAIG,IAAI,KAAK,2BAA2B,EAAE;MACxC;;IAIF,MAAMF,OAAO,GAAG,GAAGF,WAAW,IAAIC,WAAW,EAAE;IAE/C,IAAIN,KAAK,CAACO,OAAO,CAAC,EAAE;MAClB,OAAOP,KAAK,CAACO,OAAO,CAAC;;IAGvB,MAAMG,cAAc,GAAG,GAAGJ,WAAW,IAAID,WAAW,EAAE;IAEtD,IAAIL,KAAK,CAACU,cAAc,CAAC,EAAE;MACzB,OAAOZ,IAAI,CAACa,MAAM,CAACb,IAAI,CAACc,MAAM,EAAE,EAAEZ,KAAK,CAACU,cAAc,CAAC,CAAC;;EAE5D;CACD;AAEDX,WAAW,CACTE,mCAAmC,CAACO,GAAG,CAACK,IAAI,CAC1CZ,mCAAmC,CACpC,CACF;AAED,eAAeA,mCAAmC"},"metadata":{},"sourceType":"module","externalDependencies":[]}