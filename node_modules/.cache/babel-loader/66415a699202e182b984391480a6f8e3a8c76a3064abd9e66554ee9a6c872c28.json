{"ast":null,"code":"import { vec3 } from 'gl-matrix';\nimport { metaData } from '..';\nexport default function imageToWorldCoords(imageId, imageCoords) {\n  const imagePlaneModule = metaData.get('imagePlaneModule', imageId);\n  if (!imagePlaneModule) {\n    throw new Error(`No imagePlaneModule found for imageId: ${imageId}`);\n  }\n  const {\n    columnCosines,\n    rowCosines,\n    imagePositionPatient: origin\n  } = imagePlaneModule;\n  let {\n    columnPixelSpacing,\n    rowPixelSpacing\n  } = imagePlaneModule;\n  columnPixelSpacing ||= 1;\n  rowPixelSpacing ||= 1;\n  const imageCoordsInWorld = vec3.create();\n  vec3.scaleAndAdd(imageCoordsInWorld, origin, rowCosines, rowPixelSpacing * (imageCoords[0] - 0.5));\n  vec3.scaleAndAdd(imageCoordsInWorld, imageCoordsInWorld, columnCosines, columnPixelSpacing * (imageCoords[1] - 0.5));\n  return Array.from(imageCoordsInWorld);\n}","map":{"version":3,"names":["vec3","metaData","imageToWorldCoords","imageId","imageCoords","imagePlaneModule","get","Error","columnCosines","rowCosines","imagePositionPatient","origin","columnPixelSpacing","rowPixelSpacing","imageCoordsInWorld","create","scaleAndAdd","Array","from"],"sources":["../../../src/utilities/imageToWorldCoords.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,IAAI,QAAQ,WAAW;AAChC,SAASC,QAAQ,QAAQ,IAAI;AAY7B,eAAc,SAAUC,kBAAkBA,CACxCC,OAAe,EACfC,WAAmB;EAEnB,MAAMC,gBAAgB,GAAGJ,QAAQ,CAACK,GAAG,CAAC,kBAAkB,EAAEH,OAAO,CAAC;EAElE,IAAI,CAACE,gBAAgB,EAAE;IACrB,MAAM,IAAIE,KAAK,CAAC,0CAA0CJ,OAAO,EAAE,CAAC;;EAGtE,MAAM;IACJK,aAAa;IACbC,UAAU;IACVC,oBAAoB,EAAEC;EAAM,CAC7B,GAAGN,gBAAgB;EAEpB,IAAI;IAAEO,kBAAkB;IAAEC;EAAe,CAAE,GAAGR,gBAAgB;EAE9DO,kBAAkB,KAAK,CAAC;EACxBC,eAAe,KAAK,CAAC;EAGrB,MAAMC,kBAAkB,GAAGd,IAAI,CAACe,MAAM,EAAE;EAIxCf,IAAI,CAACgB,WAAW,CACdF,kBAAkB,EAClBH,MAAM,EACNF,UAAU,EAGVI,eAAe,IAAIT,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CACzC;EAEDJ,IAAI,CAACgB,WAAW,CACdF,kBAAkB,EAClBA,kBAAkB,EAClBN,aAAa,EACbI,kBAAkB,IAAIR,WAAW,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAC5C;EAED,OAAOa,KAAK,CAACC,IAAI,CAACJ,kBAAkB,CAAW;AACjD"},"metadata":{},"sourceType":"module","externalDependencies":[]}