{"ast":null,"code":"import _getHash from './_getHash';\nimport setNewAttributesIfValid from './setNewAttributesIfValid';\nimport setAttributesIfNecessary from './setAttributesIfNecessary';\nfunction drawHandle(svgDrawingHelper, annotationUID, handleGroupUID, handle, options = {}, uniqueIndex) {\n  const {\n    color,\n    handleRadius,\n    width,\n    lineWidth,\n    fill,\n    type,\n    opacity\n  } = Object.assign({\n    color: 'dodgerblue',\n    handleRadius: '6',\n    width: '2',\n    lineWidth: undefined,\n    fill: 'transparent',\n    type: 'circle',\n    opacity: 1\n  }, options);\n  const strokeWidth = lineWidth || width;\n  const svgns = 'http://www.w3.org/2000/svg';\n  const svgNodeHash = _getHash(annotationUID, 'handle', `hg-${handleGroupUID}-index-${uniqueIndex}`);\n  let attributes;\n  if (type === 'circle') {\n    attributes = {\n      cx: `${handle[0]}`,\n      cy: `${handle[1]}`,\n      r: handleRadius,\n      stroke: color,\n      fill,\n      'stroke-width': strokeWidth,\n      opacity: opacity\n    };\n  } else if (type === 'rect') {\n    const handleRadiusFloat = parseFloat(handleRadius);\n    const side = handleRadiusFloat * 1.5;\n    const x = handle[0] - side * 0.5;\n    const y = handle[1] - side * 0.5;\n    attributes = {\n      x: `${x}`,\n      y: `${y}`,\n      width: `${side}`,\n      height: `${side}`,\n      stroke: color,\n      fill,\n      'stroke-width': strokeWidth,\n      rx: `${side * 0.1}`,\n      opacity: opacity\n    };\n  } else {\n    throw new Error(`Unsupported handle type: ${type}`);\n  }\n  const existingHandleElement = svgDrawingHelper.getSvgNode(svgNodeHash);\n  if (existingHandleElement) {\n    setAttributesIfNecessary(attributes, existingHandleElement);\n    svgDrawingHelper.setNodeTouched(svgNodeHash);\n  } else {\n    const newHandleElement = document.createElementNS(svgns, type);\n    setNewAttributesIfValid(attributes, newHandleElement);\n    svgDrawingHelper.appendNode(newHandleElement, svgNodeHash);\n  }\n}\nexport default drawHandle;","map":{"version":3,"names":["_getHash","setNewAttributesIfValid","setAttributesIfNecessary","drawHandle","svgDrawingHelper","annotationUID","handleGroupUID","handle","options","uniqueIndex","color","handleRadius","width","lineWidth","fill","type","opacity","Object","assign","undefined","strokeWidth","svgns","svgNodeHash","attributes","cx","cy","r","stroke","handleRadiusFloat","parseFloat","side","x","y","height","rx","Error","existingHandleElement","getSvgNode","setNodeTouched","newHandleElement","document","createElementNS","appendNode"],"sources":["../../../src/drawingSvg/drawHandle.ts"],"sourcesContent":[null],"mappings":"AAEA,OAAOA,QAAQ,MAAM,YAAY;AACjC,OAAOC,uBAAuB,MAAM,2BAA2B;AAC/D,OAAOC,wBAAwB,MAAM,4BAA4B;AAGjE,SAASC,UAAUA,CACjBC,gBAAkC,EAClCC,aAAqB,EACrBC,cAAsB,EACtBC,MAAoB,EACpBC,OAAO,GAAG,EAAE,EACZC,WAAW;EAEX,MAAM;IAAEC,KAAK;IAAEC,YAAY;IAAEC,KAAK;IAAEC,SAAS;IAAEC,IAAI;IAAEC,IAAI;IAAEC;EAAO,CAAE,GAClEC,MAAM,CAACC,MAAM,CACX;IACER,KAAK,EAAE,YAAY;IACnBC,YAAY,EAAE,GAAG;IACjBC,KAAK,EAAE,GAAG;IACVC,SAAS,EAAEM,SAAS;IACpBL,IAAI,EAAE,aAAa;IACnBC,IAAI,EAAE,QAAQ;IACdC,OAAO,EAAE;GACV,EACDR,OAAO,CACR;EAGH,MAAMY,WAAW,GAAGP,SAAS,IAAID,KAAK;EAGtC,MAAMS,KAAK,GAAG,4BAA4B;EAC1C,MAAMC,WAAW,GAAGtB,QAAQ,CAC1BK,aAAa,EACb,QAAQ,EACR,MAAMC,cAAc,UAAUG,WAAW,EAAE,CAC5C;EAED,IAAIc,UAAU;EACd,IAAIR,IAAI,KAAK,QAAQ,EAAE;IACrBQ,UAAU,GAAG;MACXC,EAAE,EAAE,GAAGjB,MAAM,CAAC,CAAC,CAAC,EAAE;MAClBkB,EAAE,EAAE,GAAGlB,MAAM,CAAC,CAAC,CAAC,EAAE;MAClBmB,CAAC,EAAEf,YAAY;MACfgB,MAAM,EAAEjB,KAAK;MACbI,IAAI;MACJ,cAAc,EAAEM,WAAW;MAC3BJ,OAAO,EAAEA;KACV;GACF,MAAM,IAAID,IAAI,KAAK,MAAM,EAAE;IAC1B,MAAMa,iBAAiB,GAAGC,UAAU,CAAClB,YAAY,CAAC;IAClD,MAAMmB,IAAI,GAAGF,iBAAiB,GAAG,GAAG;IACpC,MAAMG,CAAC,GAAGxB,MAAM,CAAC,CAAC,CAAC,GAAGuB,IAAI,GAAG,GAAG;IAChC,MAAME,CAAC,GAAGzB,MAAM,CAAC,CAAC,CAAC,GAAGuB,IAAI,GAAG,GAAG;IAEhCP,UAAU,GAAG;MACXQ,CAAC,EAAE,GAAGA,CAAC,EAAE;MACTC,CAAC,EAAE,GAAGA,CAAC,EAAE;MACTpB,KAAK,EAAE,GAAGkB,IAAI,EAAE;MAChBG,MAAM,EAAE,GAAGH,IAAI,EAAE;MACjBH,MAAM,EAAEjB,KAAK;MACbI,IAAI;MACJ,cAAc,EAAEM,WAAW;MAC3Bc,EAAE,EAAE,GAAGJ,IAAI,GAAG,GAAG,EAAE;MACnBd,OAAO,EAAEA;KACV;GACF,MAAM;IACL,MAAM,IAAImB,KAAK,CAAC,4BAA4BpB,IAAI,EAAE,CAAC;;EAGrD,MAAMqB,qBAAqB,GAAGhC,gBAAgB,CAACiC,UAAU,CAACf,WAAW,CAAC;EAEtE,IAAIc,qBAAqB,EAAE;IACzBlC,wBAAwB,CAACqB,UAAU,EAAEa,qBAAqB,CAAC;IAE3DhC,gBAAgB,CAACkC,cAAc,CAAChB,WAAW,CAAC;GAC7C,MAAM;IACL,MAAMiB,gBAAgB,GAAGC,QAAQ,CAACC,eAAe,CAACpB,KAAK,EAAEN,IAAI,CAAC;IAE9Dd,uBAAuB,CAACsB,UAAU,EAAEgB,gBAAgB,CAAC;IAErDnC,gBAAgB,CAACsC,UAAU,CAACH,gBAAgB,EAAEjB,WAAW,CAAC;;AAE9D;AAEA,eAAenB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}