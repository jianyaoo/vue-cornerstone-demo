{"ast":null,"code":"var _class;\nimport { triggerEvent, eventTarget } from '@cornerstonejs/core';\nimport Events from '../enums/Events';\nexport default class AnnotationFrameRange {\n  static imageIdToFrames(imageId) {\n    const match = imageId.match(this.frameRangeExtractor);\n    if (!match || !match[2]) {\n      return null;\n    }\n    const range = match[2].split('-').map(it => Number(it));\n    if (range.length === 1) {\n      return range[0];\n    }\n    return range;\n  }\n  static framesToString(range) {\n    if (Array.isArray(range)) {\n      return `${range[0]}-${range[1]}`;\n    }\n    return String(range);\n  }\n  static framesToImageId(imageId, range) {\n    const match = imageId.match(this.frameRangeExtractor);\n    if (!match || !match[2]) {\n      return null;\n    }\n    const newRangeString = this.framesToString(range);\n    return imageId.replace(this.frameRangeExtractor, `${match[1]}${newRangeString}`);\n  }\n  static setFrameRange(annotation, range, eventBase) {\n    const {\n      referencedImageId\n    } = annotation.metadata;\n    annotation.metadata.referencedImageId = this.framesToImageId(referencedImageId, range);\n    const eventDetail = {\n      ...eventBase,\n      annotation\n    };\n    triggerEvent(eventTarget, Events.ANNOTATION_MODIFIED, eventDetail);\n  }\n  static getFrameRange(annotation) {\n    return this.imageIdToFrames(annotation.metadata.referencedImageId);\n  }\n}\n_class = AnnotationFrameRange;\n_class.frameRangeExtractor = /(\\/frames\\/|[&?]frameNumber=)([^/&?]*)/i;","map":{"version":3,"names":["triggerEvent","eventTarget","Events","AnnotationFrameRange","imageIdToFrames","imageId","match","frameRangeExtractor","range","split","map","it","Number","length","framesToString","Array","isArray","String","framesToImageId","newRangeString","replace","setFrameRange","annotation","eventBase","referencedImageId","metadata","eventDetail","ANNOTATION_MODIFIED","getFrameRange","_class"],"sources":["../../../src/utilities/annotationFrameRange.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,YAAY,EAAEC,WAAW,QAAQ,qBAAqB;AAC/D,OAAOC,MAAM,MAAM,iBAAiB;AAUpC,eAAc,MAAOC,oBAAoB;EAI7B,OAAOC,eAAeA,CAACC,OAAe;IAC9C,MAAMC,KAAK,GAAGD,OAAO,CAACC,KAAK,CAAC,IAAI,CAACC,mBAAmB,CAAC;IACrD,IAAI,CAACD,KAAK,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,EAAE;MACvB,OAAO,IAAI;;IAEb,MAAME,KAAK,GAAGF,KAAK,CAAC,CAAC,CAAC,CAACG,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAEC,EAAE,IAAKC,MAAM,CAACD,EAAE,CAAC,CAAC;IACzD,IAAIH,KAAK,CAACK,MAAM,KAAK,CAAC,EAAE;MACtB,OAAOL,KAAK,CAAC,CAAC,CAAC;;IAEjB,OAAOA,KAAoB;EAC7B;EAEO,OAAOM,cAAcA,CAACN,KAAK;IAChC,IAAIO,KAAK,CAACC,OAAO,CAACR,KAAK,CAAC,EAAE;MACxB,OAAO,GAAGA,KAAK,CAAC,CAAC,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,EAAE;;IAElC,OAAOS,MAAM,CAACT,KAAK,CAAC;EACtB;EAEU,OAAOU,eAAeA,CAC9Bb,OAAe,EACfG,KAA2B;IAE3B,MAAMF,KAAK,GAAGD,OAAO,CAACC,KAAK,CAAC,IAAI,CAACC,mBAAmB,CAAC;IACrD,IAAI,CAACD,KAAK,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,EAAE;MACvB,OAAO,IAAI;;IAEb,MAAMa,cAAc,GAAG,IAAI,CAACL,cAAc,CAACN,KAAK,CAAC;IACjD,OAAOH,OAAO,CAACe,OAAO,CACpB,IAAI,CAACb,mBAAmB,EACxB,GAAGD,KAAK,CAAC,CAAC,CAAC,GAAGa,cAAc,EAAE,CAC/B;EACH;EAQO,OAAOE,aAAaA,CACzBC,UAAsB,EACtBd,KAA2B,EAC3Be,SAA6C;IAE7C,MAAM;MAAEC;IAAiB,CAAE,GAAGF,UAAU,CAACG,QAAQ;IACjDH,UAAU,CAACG,QAAQ,CAACD,iBAAiB,GAAG,IAAI,CAACN,eAAe,CAC1DM,iBAAiB,EACjBhB,KAAK,CACN;IACD,MAAMkB,WAAW,GAAG;MAClB,GAAGH,SAAS;MACZD;KACD;IACDtB,YAAY,CAACC,WAAW,EAAEC,MAAM,CAACyB,mBAAmB,EAAED,WAAW,CAAC;EACpE;EAEO,OAAOE,aAAaA,CACzBN,UAAsB;IAEtB,OAAO,IAAI,CAAClB,eAAe,CAACkB,UAAU,CAACG,QAAQ,CAACD,iBAAiB,CAAC;EACpE;;SAjEmBrB,oBAAoB;AACtB0B,MAAA,CAAAtB,mBAAmB,GAClC,yCAAyC"},"metadata":{},"sourceType":"module","externalDependencies":[]}