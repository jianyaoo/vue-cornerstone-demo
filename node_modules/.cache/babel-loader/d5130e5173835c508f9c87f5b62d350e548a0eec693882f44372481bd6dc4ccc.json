{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { isColorbarSizeValid, isRangeValid, areColorbarRangesEqual, areColorbarSizesEqual } from './common';\nimport { ColorbarRangeTextPosition } from './enums/ColorbarRangeTextPosition';\nconst DEFAULTS = {\n  FONT: '10px Arial',\n  COLOR: 'white',\n  TICK_SIZE: 5,\n  TICK_WIDTH: 1,\n  TICK_LABEL_MARGIN: 3,\n  MAX_NUM_TICKS: 8,\n  TICKS_STEPS: [1, 2.5, 5, 10]\n};\nclass ColorbarTicks {\n  constructor(props) {\n    ColorbarTicks.validateProps(props);\n    const {\n      top = 0,\n      left = 0,\n      size = {\n        width: 20,\n        height: 100\n      },\n      imageRange = {\n        lower: 0,\n        upper: 1\n      },\n      voiRange = {\n        lower: 0,\n        upper: 1\n      },\n      ticks: ticksProps,\n      container,\n      showFullPixelValueRange = false\n    } = props;\n    const {\n      style: ticksStyle,\n      position: rangeTextPosition\n    } = ticksProps ?? {};\n    this._imageRange = imageRange;\n    this._voiRange = voiRange;\n    this._font = ticksStyle?.font ?? DEFAULTS.FONT;\n    this._color = ticksStyle?.color ?? DEFAULTS.COLOR;\n    this._tickSize = ticksStyle?.tickSize ?? DEFAULTS.TICK_SIZE;\n    this._tickWidth = ticksStyle?.tickWidth ?? DEFAULTS.TICK_WIDTH;\n    this._labelMargin = ticksStyle?.labelMargin ?? DEFAULTS.TICK_LABEL_MARGIN;\n    this._maxNumTicks = ticksStyle?.maxNumTicks ?? DEFAULTS.MAX_NUM_TICKS;\n    this._rangeTextPosition = rangeTextPosition ?? ColorbarRangeTextPosition.Right;\n    this._showFullPixelValueRange = showFullPixelValueRange;\n    this._canvas = this._createCanvasElement(size, top, left);\n    if (container) {\n      this.appendTo(container);\n    }\n  }\n  get size() {\n    const {\n      width,\n      height\n    } = this._canvas;\n    return {\n      width,\n      height\n    };\n  }\n  set size(size) {\n    const {\n      _canvas: canvas\n    } = this;\n    if (!isColorbarSizeValid(size) || areColorbarSizesEqual(canvas, size)) {\n      return;\n    }\n    this._setCanvasSize(canvas, size);\n    this.render();\n  }\n  get top() {\n    return Number.parseInt(this._canvas.style.top);\n  }\n  set top(top) {\n    const {\n      _canvas: canvas\n    } = this;\n    const currentTop = this.top;\n    if (top === currentTop) {\n      return;\n    }\n    canvas.style.top = `${top}px`;\n    this.render();\n  }\n  get left() {\n    return Number.parseInt(this._canvas.style.left);\n  }\n  set left(left) {\n    const {\n      _canvas: canvas\n    } = this;\n    const currentLeft = this.left;\n    if (left === currentLeft) {\n      return;\n    }\n    canvas.style.left = `${left}px`;\n    this.render();\n  }\n  get imageRange() {\n    return {\n      ...this._imageRange\n    };\n  }\n  set imageRange(imageRange) {\n    if (!isRangeValid(imageRange) || areColorbarRangesEqual(imageRange, this._imageRange)) {\n      return;\n    }\n    this._imageRange = imageRange;\n    this.render();\n  }\n  get voiRange() {\n    return {\n      ...this._voiRange\n    };\n  }\n  set voiRange(voiRange) {\n    if (!isRangeValid(voiRange) || areColorbarRangesEqual(voiRange, this._voiRange)) {\n      return;\n    }\n    this._voiRange = voiRange;\n    this.render();\n  }\n  get tickSize() {\n    return this._tickSize;\n  }\n  set tickSize(tickSize) {\n    if (tickSize === this._tickSize) {\n      return;\n    }\n    this._tickSize = tickSize;\n    this.render();\n  }\n  get tickWidth() {\n    return this._tickWidth;\n  }\n  set tickWidth(tickWidth) {\n    if (tickWidth === this._tickWidth) {\n      return;\n    }\n    this._tickWidth = tickWidth;\n    this.render();\n  }\n  get color() {\n    return this._color;\n  }\n  set color(color) {\n    if (color === this._color) {\n      return;\n    }\n    this._color = color;\n    this.render();\n  }\n  get showFullPixelValueRange() {\n    return this._showFullPixelValueRange;\n  }\n  set showFullPixelValueRange(showFullRange) {\n    if (showFullRange === this._showFullPixelValueRange) {\n      return;\n    }\n    this._showFullPixelValueRange = showFullRange;\n    this.render();\n  }\n  get visible() {\n    return this._canvas.style.display === 'block';\n  }\n  set visible(visible) {\n    if (visible === this.visible) {\n      return;\n    }\n    this._canvas.style.display = visible ? 'block' : 'none';\n    if (visible) {\n      this.render();\n    }\n  }\n  appendTo(container) {\n    container.appendChild(this._canvas);\n    this.render();\n  }\n  static validateProps(props) {\n    const {\n      size,\n      imageRange,\n      voiRange\n    } = props;\n    if (size && !isColorbarSizeValid(size)) {\n      throw new Error('Invalid \"size\"');\n    }\n    if (imageRange && !isRangeValid(imageRange)) {\n      throw new Error('Invalid \"imageRange\"');\n    }\n    if (voiRange && !isRangeValid(voiRange)) {\n      throw new Error('Invalid \"voiRange\"');\n    }\n  }\n  _setCanvasSize(canvas, size) {\n    const {\n      width,\n      height\n    } = size;\n    canvas.width = width;\n    canvas.height = height;\n    Object.assign(canvas.style, {\n      width: `${width}px`,\n      height: `${height}px`\n    });\n  }\n  _createCanvasElement(size, top, left) {\n    const canvas = document.createElement('canvas');\n    Object.assign(canvas.style, {\n      display: 'none',\n      position: 'absolute',\n      boxSizing: 'border-box',\n      top: `${top}px`,\n      left: `${left}px`\n    });\n    this._setCanvasSize(canvas, size);\n    return canvas;\n  }\n  _getTicks(range) {\n    const {\n      lower,\n      upper\n    } = range;\n    const rangeValue = upper - lower;\n    const roughStep = rangeValue / (this._maxNumTicks - 1);\n    const stepPower = Math.pow(10, -Math.floor(Math.log10(Math.abs(roughStep))));\n    const roughtStepNormalized = roughStep * stepPower;\n    const normalizedStep = DEFAULTS.TICKS_STEPS.find(n => n >= roughtStepNormalized);\n    const step = normalizedStep / stepPower;\n    const scaleMax = Math.ceil(upper / step) * step;\n    const scaleMin = Math.floor(lower / step) * step;\n    const ticksCount = Math.round((scaleMax - scaleMin) / step) + 1;\n    const ticks = [];\n    for (let i = 0; i < ticksCount; i++) {\n      ticks.push(scaleMin + i * step);\n    }\n    return {\n      scaleMin,\n      scaleMax,\n      step,\n      ticks\n    };\n  }\n  _getLeftTickInfo({\n    position,\n    labelMeasure\n  }) {\n    const {\n      width\n    } = this._canvas;\n    const labelX = width - this.tickSize - labelMeasure.width - this._labelMargin;\n    const labelPoint = [labelX, position];\n    const tickPoints = {\n      start: [width - this._tickSize, position],\n      end: [width, position]\n    };\n    return {\n      labelPoint,\n      tickPoints\n    };\n  }\n  _getRightTickInfo({\n    position\n  }) {\n    const labelPoint = [this._tickSize + this._labelMargin, position];\n    const tickPoints = {\n      start: [0, position],\n      end: [this._tickSize, position]\n    };\n    return {\n      labelPoint,\n      tickPoints\n    };\n  }\n  _getTopTickInfo({\n    position,\n    labelMeasure\n  }) {\n    throw new Error('Not implemented');\n  }\n  _getBottomTickInfo({\n    position,\n    labelMeasure\n  }) {\n    throw new Error('Not implemented');\n  }\n  render() {\n    const {\n      _canvas: canvas\n    } = this;\n    if (!canvas.isConnected || !this.visible) {\n      return;\n    }\n    const {\n      width,\n      height\n    } = canvas;\n    const isHorizontal = width >= height;\n    const maxCanvasPixelValue = isHorizontal ? width : height;\n    const canvasContext = canvas.getContext('2d');\n    const {\n      _voiRange: voiRange\n    } = this;\n    const range = this._showFullPixelValueRange ? this._imageRange : {\n      ...voiRange\n    };\n    const rangeWidth = range.upper - range.lower;\n    const {\n      ticks\n    } = this._getTicks(range);\n    canvasContext.clearRect(0, 0, width, height);\n    canvasContext.font = this._font;\n    canvasContext.textBaseline = 'middle';\n    canvasContext.fillStyle = this._color;\n    canvasContext.strokeStyle = this._color;\n    canvasContext.lineWidth = this.tickWidth;\n    ticks.forEach(tick => {\n      let position = Math.round(maxCanvasPixelValue * ((tick - range.lower) / rangeWidth));\n      if (!isHorizontal) {\n        position = height - position;\n      }\n      if (position < 0 || position > maxCanvasPixelValue) {\n        return;\n      }\n      const label = tick.toString();\n      const labelMeasure = canvasContext.measureText(label);\n      let tickInfo;\n      if (isHorizontal) {\n        if (this._rangeTextPosition === ColorbarRangeTextPosition.Top) {\n          tickInfo = this._getTopTickInfo({\n            position,\n            labelMeasure\n          });\n        } else {\n          tickInfo = this._getBottomTickInfo({\n            position,\n            labelMeasure\n          });\n        }\n      } else {\n        if (this._rangeTextPosition === ColorbarRangeTextPosition.Left) {\n          tickInfo = this._getLeftTickInfo({\n            position,\n            labelMeasure\n          });\n        } else {\n          tickInfo = this._getRightTickInfo({\n            position\n          });\n        }\n      }\n      const {\n        labelPoint,\n        tickPoints\n      } = tickInfo;\n      const {\n        start: tickStart,\n        end: tickEnd\n      } = tickPoints;\n      canvasContext.beginPath();\n      canvasContext.moveTo(tickStart[0], tickStart[1]);\n      canvasContext.lineTo(tickEnd[0], tickEnd[1]);\n      canvasContext.fillText(label, labelPoint[0], labelPoint[1]);\n      canvasContext.stroke();\n      return position;\n    });\n  }\n}\nexport { ColorbarTicks as default, ColorbarTicks };","map":{"version":3,"names":["isColorbarSizeValid","isRangeValid","areColorbarRangesEqual","areColorbarSizesEqual","ColorbarRangeTextPosition","DEFAULTS","FONT","COLOR","TICK_SIZE","TICK_WIDTH","TICK_LABEL_MARGIN","MAX_NUM_TICKS","TICKS_STEPS","ColorbarTicks","constructor","props","validateProps","top","left","size","width","height","imageRange","lower","upper","voiRange","ticks","ticksProps","container","showFullPixelValueRange","style","ticksStyle","position","rangeTextPosition","_imageRange","_voiRange","_font","font","_color","color","_tickSize","tickSize","_tickWidth","tickWidth","_labelMargin","labelMargin","_maxNumTicks","maxNumTicks","_rangeTextPosition","Right","_showFullPixelValueRange","_canvas","_createCanvasElement","appendTo","canvas","_setCanvasSize","render","Number","parseInt","currentTop","currentLeft","showFullRange","visible","display","appendChild","Error","Object","assign","document","createElement","boxSizing","_getTicks","range","rangeValue","roughStep","stepPower","Math","pow","floor","log10","abs","roughtStepNormalized","normalizedStep","find","n","step","scaleMax","ceil","scaleMin","ticksCount","round","i","push","_getLeftTickInfo","labelMeasure","labelX","labelPoint","tickPoints","start","end","_getRightTickInfo","_getTopTickInfo","_getBottomTickInfo","isConnected","isHorizontal","maxCanvasPixelValue","canvasContext","getContext","rangeWidth","clearRect","textBaseline","fillStyle","strokeStyle","lineWidth","forEach","tick","label","toString","measureText","tickInfo","Top","Left","tickStart","tickEnd","beginPath","moveTo","lineTo","fillText","stroke","default"],"sources":["../../../../../src/utilities/voi/colorbar/ColorbarTicks.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}