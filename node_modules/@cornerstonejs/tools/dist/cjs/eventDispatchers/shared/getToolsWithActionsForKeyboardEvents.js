"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const store_1 = require("../../store");
function getToolsWithModesForKeyboardEvent(evt, toolModes) {
    var _a;
    const toolsWithActions = new Map();
    const { renderingEngineId, viewportId } = evt.detail;
    const toolGroup = store_1.ToolGroupManager.getToolGroupForViewport(viewportId, renderingEngineId);
    if (!toolGroup) {
        return toolsWithActions;
    }
    const toolGroupToolNames = Object.keys(toolGroup.toolOptions);
    const key = evt.detail.key;
    for (let j = 0; j < toolGroupToolNames.length; j++) {
        const toolName = toolGroupToolNames[j];
        const tool = toolGroup.getToolInstance(toolName);
        const actionsConfig = (_a = tool.configuration) === null || _a === void 0 ? void 0 : _a.actions;
        if (!actionsConfig) {
            continue;
        }
        const actions = Object.values(actionsConfig);
        if (!(actions === null || actions === void 0 ? void 0 : actions.length) || !toolModes.includes(tool.mode)) {
            continue;
        }
        const action = actions.find((action) => action.bindings.some((binding) => binding.key === key));
        if (action) {
            toolsWithActions.set(tool, action);
        }
    }
    return toolsWithActions;
}
exports.default = getToolsWithModesForKeyboardEvent;
//# sourceMappingURL=getToolsWithActionsForKeyboardEvents.js.map