{"ast":null,"code":"var _class;\nimport { AnnotationTool } from './base';\nimport { getEnabledElement, eventTarget, triggerEvent, utilities as csUtils } from '@cornerstonejs/core';\nimport { addAnnotation, getAnnotations } from '../stateManagement/annotation/annotationState';\nimport { isAnnotationLocked } from '../stateManagement/annotation/annotationLocking';\nimport { isAnnotationVisible } from '../stateManagement/annotation/annotationVisibility';\nimport { drawCircle as drawCircleSvg, drawHandles as drawHandlesSvg } from '../drawingSvg';\nimport { state } from '../store';\nimport { Events, MouseBindings, KeyboardBindings } from '../enums';\nimport { getViewportIdsWithToolToRender } from '../utilities/viewportFilters';\nimport { resetElementCursor, hideElementCursor } from '../cursors/elementCursor';\nimport triggerAnnotationRenderForViewportIds from '../utilities/triggerAnnotationRenderForViewportIds';\nimport { getCanvasCircleRadius } from '../utilities/math/circle';\nimport AdvancedMagnifyViewportManager from './AdvancedMagnifyViewportManager';\nvar AdvancedMagnifyToolActions;\n(function (AdvancedMagnifyToolActions) {\n  AdvancedMagnifyToolActions[\"ShowZoomFactorsList\"] = \"showZoomFactorsList\";\n})(AdvancedMagnifyToolActions || (AdvancedMagnifyToolActions = {}));\nclass AdvancedMagnifyTool extends AnnotationTool {\n  constructor(toolProps = {}, defaultToolProps = {\n    supportedInteractionTypes: ['Mouse', 'Touch'],\n    configuration: {\n      shadow: true,\n      magnifyingGlass: {\n        radius: 125,\n        zoomFactor: 2.5,\n        zoomFactorList: [2.5, 3, 3.5, 4, 4.5, 5],\n        autoPan: {\n          enabled: true,\n          padding: 10\n        }\n      },\n      actions: {\n        showZoomFactorsList: {\n          method: 'showZoomFactorsList',\n          bindings: [{\n            mouseButton: MouseBindings.Secondary,\n            modifierKey: KeyboardBindings.Shift\n          }]\n        }\n      }\n    }\n  }) {\n    super(toolProps, defaultToolProps);\n    this.addNewAnnotation = evt => {\n      const eventDetail = evt.detail;\n      const {\n        currentPoints,\n        element\n      } = eventDetail;\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport,\n        renderingEngine\n      } = enabledElement;\n      const worldPos = currentPoints.world;\n      const canvasPos = currentPoints.canvas;\n      const {\n        magnifyingGlass: config\n      } = this.configuration;\n      const {\n        radius,\n        zoomFactor,\n        autoPan\n      } = config;\n      const worldHandlesPoints = this._getWorldHandlesPoints(viewport, canvasPos, radius);\n      const camera = viewport.getCamera();\n      const {\n        viewPlaneNormal,\n        viewUp\n      } = camera;\n      const referencedImageId = this.getReferencedImageId(viewport, worldPos, viewPlaneNormal, viewUp);\n      const annotationUID = csUtils.uuidv4();\n      const magnifyViewportId = csUtils.uuidv4();\n      const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n      const annotation = {\n        annotationUID,\n        highlighted: true,\n        invalidated: true,\n        metadata: {\n          toolName: this.getToolName(),\n          viewPlaneNormal: [...viewPlaneNormal],\n          viewUp: [...viewUp],\n          FrameOfReferenceUID,\n          referencedImageId\n        },\n        data: {\n          sourceViewportId: viewport.id,\n          magnifyViewportId,\n          zoomFactor,\n          handles: {\n            points: worldHandlesPoints,\n            activeHandleIndex: null\n          }\n        }\n      };\n      this.magnifyViewportManager.createViewport(annotation, {\n        magnifyViewportId,\n        sourceEnabledElement: enabledElement,\n        position: canvasPos,\n        radius,\n        zoomFactor,\n        autoPan: {\n          enabled: autoPan.enabled,\n          padding: autoPan.padding,\n          callback: data => {\n            const annotationPoints = annotation.data.handles.points;\n            const {\n              world: worldDelta\n            } = data.delta;\n            for (let i = 0, len = annotationPoints.length; i < len; i++) {\n              annotationPoints[i][0] += worldDelta[0];\n              annotationPoints[i][1] += worldDelta[1];\n              annotationPoints[i][2] += worldDelta[2];\n            }\n          }\n        }\n      });\n      addAnnotation(annotation, element);\n      const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n      evt.preventDefault();\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      return annotation;\n    };\n    this.isPointNearTool = (element, annotation, canvasCoords, proximity) => {\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        data\n      } = annotation;\n      const {\n        points\n      } = data.handles;\n      const canvasCoordinates = points.map(p => viewport.worldToCanvas(p));\n      const canvasTop = canvasCoordinates[0];\n      const canvasBottom = canvasCoordinates[2];\n      const canvasLeft = canvasCoordinates[3];\n      const radius = Math.abs(canvasBottom[1] - canvasTop[1]) * 0.5;\n      const center = [canvasLeft[0] + radius, canvasTop[1] + radius];\n      const radiusPoint = getCanvasCircleRadius([center, canvasCoords]);\n      if (Math.abs(radiusPoint - radius) < proximity * 1.5) {\n        return true;\n      }\n      return false;\n    };\n    this.toolSelectedCallback = (evt, annotation) => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      annotation.highlighted = true;\n      const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n      this.editData = {\n        annotation,\n        viewportIdsToRender\n      };\n      hideElementCursor(element);\n      this._activateModify(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      evt.preventDefault();\n    };\n    this.handleSelectedCallback = (evt, annotation, handle) => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      const {\n        data\n      } = annotation;\n      annotation.highlighted = true;\n      const {\n        points\n      } = data.handles;\n      const handleIndex = points.findIndex(p => p === handle);\n      const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n      this.editData = {\n        annotation,\n        viewportIdsToRender,\n        handleIndex\n      };\n      this._activateModify(element);\n      hideElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      evt.preventDefault();\n    };\n    this._endCallback = evt => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      const {\n        annotation,\n        viewportIdsToRender,\n        newAnnotation\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      data.handles.activeHandleIndex = null;\n      this._deactivateModify(element);\n      resetElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      this.editData = null;\n      this.isDrawing = false;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n        const eventDetail = {\n          annotation\n        };\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n    };\n    this._dragDrawCallback = evt => {\n      this.isDrawing = true;\n      const eventDetail = evt.detail;\n      const {\n        element,\n        deltaPoints\n      } = eventDetail;\n      const worldPosDelta = deltaPoints?.world ?? [0, 0, 0];\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      const {\n        annotation,\n        viewportIdsToRender\n      } = this.editData;\n      const {\n        points\n      } = annotation.data.handles;\n      points.forEach(point => {\n        point[0] += worldPosDelta[0];\n        point[1] += worldPosDelta[1];\n        point[2] += worldPosDelta[2];\n      });\n      annotation.invalidated = true;\n      this.editData.hasMoved = true;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n    };\n    this._dragModifyCallback = evt => {\n      this.isDrawing = true;\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      const {\n        annotation,\n        viewportIdsToRender,\n        handleIndex\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      if (handleIndex === undefined) {\n        const {\n          deltaPoints\n        } = eventDetail;\n        const worldPosDelta = deltaPoints.world;\n        const points = data.handles.points;\n        points.forEach(point => {\n          point[0] += worldPosDelta[0];\n          point[1] += worldPosDelta[1];\n          point[2] += worldPosDelta[2];\n        });\n        annotation.invalidated = true;\n      } else {\n        this._dragHandle(evt);\n        annotation.invalidated = true;\n      }\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n    };\n    this._dragHandle = evt => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        worldToCanvas\n      } = viewport;\n      const {\n        annotation\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      const {\n        points\n      } = data.handles;\n      const canvasCoordinates = points.map(p => worldToCanvas(p));\n      const canvasTop = canvasCoordinates[0];\n      const canvasBottom = canvasCoordinates[2];\n      const canvasLeft = canvasCoordinates[3];\n      const radius = Math.abs(canvasBottom[1] - canvasTop[1]) * 0.5;\n      const canvasCenter = [canvasLeft[0] + radius, canvasTop[1] + radius];\n      const {\n        currentPoints\n      } = eventDetail;\n      const currentCanvasPoints = currentPoints.canvas;\n      const newRadius = getCanvasCircleRadius([canvasCenter, currentCanvasPoints]);\n      const newWorldHandlesPoints = this._getWorldHandlesPoints(viewport, canvasCenter, newRadius);\n      points[0] = newWorldHandlesPoints[0];\n      points[1] = newWorldHandlesPoints[1];\n      points[2] = newWorldHandlesPoints[2];\n      points[3] = newWorldHandlesPoints[3];\n    };\n    this.cancel = element => {\n      if (!this.isDrawing) {\n        return;\n      }\n      this.isDrawing = false;\n      this._deactivateModify(element);\n      resetElementCursor(element);\n      const {\n        annotation,\n        viewportIdsToRender,\n        newAnnotation\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      annotation.highlighted = false;\n      data.handles.activeHandleIndex = null;\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      if (newAnnotation) {\n        const eventType = Events.ANNOTATION_COMPLETED;\n        const eventDetail = {\n          annotation\n        };\n        triggerEvent(eventTarget, eventType, eventDetail);\n      }\n      this.editData = null;\n      return annotation.annotationUID;\n    };\n    this._activateModify = element => {\n      state.isInteractingWithTool = true;\n      element.addEventListener(Events.MOUSE_UP, this._endCallback);\n      element.addEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n      element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.addEventListener(Events.TOUCH_END, this._endCallback);\n      element.addEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n      element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n    };\n    this._deactivateModify = element => {\n      state.isInteractingWithTool = false;\n      element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n      element.removeEventListener(Events.MOUSE_DRAG, this._dragModifyCallback);\n      element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.removeEventListener(Events.TOUCH_END, this._endCallback);\n      element.removeEventListener(Events.TOUCH_DRAG, this._dragModifyCallback);\n      element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n    };\n    this.renderAnnotation = (enabledElement, svgDrawingHelper) => {\n      let renderStatus = false;\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        element\n      } = viewport;\n      let annotations = getAnnotations(this.getToolName(), element);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      annotations = this.filterInteractableAnnotationsForElement(element, annotations);\n      annotations = annotations?.filter(annotation => annotation.data.sourceViewportId === viewport.id);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      const styleSpecifier = {\n        toolGroupId: this.toolGroupId,\n        toolName: this.getToolName(),\n        viewportId: enabledElement.viewport.id\n      };\n      for (let i = 0; i < annotations.length; i++) {\n        const annotation = annotations[i];\n        const {\n          annotationUID,\n          data\n        } = annotation;\n        const {\n          magnifyViewportId,\n          zoomFactor,\n          handles\n        } = data;\n        const {\n          points,\n          activeHandleIndex\n        } = handles;\n        styleSpecifier.annotationUID = annotationUID;\n        const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n        const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n        const color = this.getStyle('color', styleSpecifier, annotation);\n        const canvasCoordinates = points.map(p => viewport.worldToCanvas(p));\n        const canvasTop = canvasCoordinates[0];\n        const canvasBottom = canvasCoordinates[2];\n        const canvasLeft = canvasCoordinates[3];\n        const radius = Math.abs(canvasBottom[1] - canvasTop[1]) * 0.5;\n        const center = [canvasLeft[0] + radius, canvasTop[1] + radius];\n        if (!viewport.getRenderingEngine()) {\n          console.warn('Rendering Engine has been destroyed');\n          return renderStatus;\n        }\n        let activeHandleCanvasCoords;\n        if (!isAnnotationVisible(annotationUID)) {\n          continue;\n        }\n        if (!isAnnotationLocked(annotation) && !this.editData && activeHandleIndex !== null) {\n          activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n        }\n        if (activeHandleCanvasCoords) {\n          const handleGroupUID = '0';\n          drawHandlesSvg(svgDrawingHelper, annotationUID, handleGroupUID, activeHandleCanvasCoords, {\n            color\n          });\n        }\n        const dataId = `${annotationUID}-advancedMagnify`;\n        const circleUID = '0';\n        drawCircleSvg(svgDrawingHelper, annotationUID, circleUID, center, radius, {\n          color,\n          lineDash,\n          lineWidth\n        }, dataId);\n        const magnifyViewport = this.magnifyViewportManager.getViewport(magnifyViewportId);\n        magnifyViewport.position = center;\n        magnifyViewport.radius = radius;\n        magnifyViewport.zoomFactor = zoomFactor;\n        magnifyViewport.update();\n        renderStatus = true;\n      }\n      return renderStatus;\n    };\n    this._getWorldHandlesPoints = (viewport, canvasCenterPos, canvasRadius) => {\n      const canvasHandlesPoints = [[canvasCenterPos[0], canvasCenterPos[1] - canvasRadius], [canvasCenterPos[0] + canvasRadius, canvasCenterPos[1]], [canvasCenterPos[0], canvasCenterPos[1] + canvasRadius], [canvasCenterPos[0] - canvasRadius, canvasCenterPos[1]]];\n      const worldHandlesPoints = canvasHandlesPoints.map(p => viewport.canvasToWorld(p));\n      return worldHandlesPoints;\n    };\n    this.magnifyViewportManager = AdvancedMagnifyViewportManager.getInstance();\n  }\n  showZoomFactorsList(evt, annotation) {\n    const {\n      element,\n      currentPoints\n    } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const {\n      viewport\n    } = enabledElement;\n    const {\n      canvas: canvasPoint\n    } = currentPoints;\n    const viewportElement = element.querySelector(':scope .viewport-element');\n    const currentZoomFactor = annotation.data.zoomFactor;\n    const remove = () => dropdown.parentElement.removeChild(dropdown);\n    const dropdown = this._getZoomFactorsListDropdown(currentZoomFactor, newZoomFactor => {\n      if (newZoomFactor !== undefined) {\n        annotation.data.zoomFactor = Number.parseFloat(newZoomFactor);\n        annotation.invalidated = true;\n      }\n      remove();\n      viewport.render();\n    });\n    Object.assign(dropdown.style, {\n      left: `${canvasPoint[0]}px`,\n      top: `${canvasPoint[1]}px`\n    });\n    viewportElement.appendChild(dropdown);\n    dropdown.focus();\n  }\n  _getZoomFactorsListDropdown(currentZoomFactor, onChangeCallback) {\n    const {\n      zoomFactorList\n    } = this.configuration.magnifyingGlass;\n    const dropdown = document.createElement('select');\n    dropdown.size = 5;\n    Object.assign(dropdown.style, {\n      width: '50px',\n      position: 'absolute'\n    });\n    ['mousedown', 'mouseup', 'mousemove', 'click'].forEach(eventName => {\n      dropdown.addEventListener(eventName, evt => evt.stopPropagation());\n    });\n    dropdown.addEventListener('change', evt => {\n      evt.stopPropagation();\n      onChangeCallback(dropdown.value);\n    });\n    dropdown.addEventListener('keydown', evt => {\n      const shouldCancel = (evt.keyCode ?? evt.which === 27) || evt.key?.toLowerCase() === 'escape';\n      if (shouldCancel) {\n        evt.stopPropagation();\n        onChangeCallback();\n      }\n    });\n    zoomFactorList.forEach(zoomFactor => {\n      const option = document.createElement('option');\n      option.label = zoomFactor;\n      option.title = `Zoom factor ${zoomFactor.toFixed(1)}`;\n      option.value = zoomFactor;\n      option.defaultSelected = zoomFactor === currentZoomFactor;\n      dropdown.add(option);\n    });\n    return dropdown;\n  }\n}\n_class = AdvancedMagnifyTool;\n_class.Actions = AdvancedMagnifyToolActions;\nAdvancedMagnifyTool.toolName = 'AdvancedMagnify';\nexport { AdvancedMagnifyTool as default };","map":{"version":3,"names":["AnnotationTool","getEnabledElement","eventTarget","triggerEvent","utilities","csUtils","addAnnotation","getAnnotations","isAnnotationLocked","isAnnotationVisible","drawCircle","drawCircleSvg","drawHandles","drawHandlesSvg","state","Events","MouseBindings","KeyboardBindings","getViewportIdsWithToolToRender","resetElementCursor","hideElementCursor","triggerAnnotationRenderForViewportIds","getCanvasCircleRadius","AdvancedMagnifyViewportManager","AdvancedMagnifyToolActions","AdvancedMagnifyTool","constructor","toolProps","defaultToolProps","supportedInteractionTypes","configuration","shadow","magnifyingGlass","radius","zoomFactor","zoomFactorList","autoPan","enabled","padding","actions","showZoomFactorsList","method","bindings","mouseButton","Secondary","modifierKey","Shift","addNewAnnotation","evt","eventDetail","detail","currentPoints","element","enabledElement","viewport","renderingEngine","worldPos","world","canvasPos","canvas","config","worldHandlesPoints","_getWorldHandlesPoints","camera","getCamera","viewPlaneNormal","viewUp","referencedImageId","getReferencedImageId","annotationUID","uuidv4","magnifyViewportId","FrameOfReferenceUID","getFrameOfReferenceUID","annotation","highlighted","invalidated","metadata","toolName","getToolName","data","sourceViewportId","id","handles","points","activeHandleIndex","magnifyViewportManager","createViewport","sourceEnabledElement","position","callback","annotationPoints","worldDelta","delta","i","len","length","viewportIdsToRender","preventDefault","isPointNearTool","canvasCoords","proximity","canvasCoordinates","map","p","worldToCanvas","canvasTop","canvasBottom","canvasLeft","Math","abs","center","radiusPoint","toolSelectedCallback","editData","_activateModify","handleSelectedCallback","handle","handleIndex","findIndex","_endCallback","newAnnotation","_deactivateModify","isDrawing","eventType","ANNOTATION_COMPLETED","_dragDrawCallback","deltaPoints","worldPosDelta","forEach","point","hasMoved","_dragModifyCallback","undefined","_dragHandle","canvasCenter","currentCanvasPoints","newRadius","newWorldHandlesPoints","cancel","isInteractingWithTool","addEventListener","MOUSE_UP","MOUSE_DRAG","MOUSE_CLICK","TOUCH_END","TOUCH_DRAG","TOUCH_TAP","removeEventListener","renderAnnotation","svgDrawingHelper","renderStatus","annotations","filterInteractableAnnotationsForElement","filter","styleSpecifier","toolGroupId","viewportId","lineWidth","getStyle","lineDash","color","getRenderingEngine","console","warn","activeHandleCanvasCoords","handleGroupUID","dataId","circleUID","magnifyViewport","getViewport","update","canvasCenterPos","canvasRadius","canvasHandlesPoints","canvasToWorld","getInstance","canvasPoint","viewportElement","querySelector","currentZoomFactor","remove","dropdown","parentElement","removeChild","_getZoomFactorsListDropdown","newZoomFactor","Number","parseFloat","render","Object","assign","style","left","top","appendChild","focus","onChangeCallback","document","createElement","size","width","eventName","stopPropagation","value","shouldCancel","keyCode","which","key","toLowerCase","option","label","title","toFixed","defaultSelected","add","_class","Actions","default"],"sources":["../../../src/tools/AdvancedMagnifyTool.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}