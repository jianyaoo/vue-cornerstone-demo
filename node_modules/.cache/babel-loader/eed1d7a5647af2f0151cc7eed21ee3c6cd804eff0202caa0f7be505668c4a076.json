{"ast":null,"code":"import { VolumeViewport } from '@cornerstonejs/core';\nimport { vec3 } from 'gl-matrix';\nexport default function jumpToWorld(viewport, jumpWorld) {\n  if (!(viewport instanceof VolumeViewport)) {\n    return;\n  }\n  const {\n    focalPoint\n  } = viewport.getCamera();\n  const delta = [0, 0, 0];\n  vec3.sub(delta, jumpWorld, focalPoint);\n  _applyShift(viewport, delta);\n  return true;\n}\nfunction _applyShift(viewport, delta) {\n  const camera = viewport.getCamera();\n  const normal = camera.viewPlaneNormal;\n  const dotProd = vec3.dot(delta, normal);\n  const projectedDelta = vec3.fromValues(normal[0], normal[1], normal[2]);\n  vec3.scale(projectedDelta, projectedDelta, dotProd);\n  if (Math.abs(projectedDelta[0]) > 1e-3 || Math.abs(projectedDelta[1]) > 1e-3 || Math.abs(projectedDelta[2]) > 1e-3) {\n    const newFocalPoint = [0, 0, 0];\n    const newPosition = [0, 0, 0];\n    vec3.add(newFocalPoint, camera.focalPoint, projectedDelta);\n    vec3.add(newPosition, camera.position, projectedDelta);\n    viewport.setCamera({\n      focalPoint: newFocalPoint,\n      position: newPosition\n    });\n    viewport.render();\n  }\n}","map":{"version":3,"names":["VolumeViewport","vec3","jumpToWorld","viewport","jumpWorld","focalPoint","getCamera","delta","sub","_applyShift","camera","normal","viewPlaneNormal","dotProd","dot","projectedDelta","fromValues","scale","Math","abs","newFocalPoint","newPosition","add","position","setCamera","render"],"sources":["../../../../src/utilities/viewport/jumpToWorld.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,cAAc,QAAQ,qBAAqB;AAGpD,SAASC,IAAI,QAAQ,WAAW;AAShC,eAAc,SAAUC,WAAWA,CACjCC,QAA+B,EAC/BC,SAAuB;EAGvB,IAAI,EAAED,QAAQ,YAAYH,cAAc,CAAC,EAAE;IACzC;;EAGF,MAAM;IAAEK;EAAU,CAAE,GAAGF,QAAQ,CAACG,SAAS,EAAE;EAE3C,MAAMC,KAAK,GAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACrCN,IAAI,CAACO,GAAG,CAACD,KAAK,EAAEH,SAAS,EAAEC,UAAU,CAAC;EAEtCI,WAAW,CAACN,QAAQ,EAAEI,KAAK,CAAC;EAE5B,OAAO,IAAI;AACb;AAEA,SAASE,WAAWA,CAACN,QAAQ,EAAEI,KAAK;EAClC,MAAMG,MAAM,GAAGP,QAAQ,CAACG,SAAS,EAAE;EACnC,MAAMK,MAAM,GAAGD,MAAM,CAACE,eAAe;EAErC,MAAMC,OAAO,GAAGZ,IAAI,CAACa,GAAG,CAACP,KAAK,EAAEI,MAAM,CAAC;EACvC,MAAMI,cAAc,GAAGd,IAAI,CAACe,UAAU,CAACL,MAAM,CAAC,CAAC,CAAC,EAAEA,MAAM,CAAC,CAAC,CAAC,EAAEA,MAAM,CAAC,CAAC,CAAC,CAAC;EAEvEV,IAAI,CAACgB,KAAK,CAACF,cAAc,EAAEA,cAAc,EAAEF,OAAO,CAAC;EAEnD,IACEK,IAAI,CAACC,GAAG,CAACJ,cAAc,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAClCG,IAAI,CAACC,GAAG,CAACJ,cAAc,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,IAClCG,IAAI,CAACC,GAAG,CAACJ,cAAc,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAClC;IACA,MAAMK,aAAa,GAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC7C,MAAMC,WAAW,GAAiB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAE3CpB,IAAI,CAACqB,GAAG,CAACF,aAAa,EAAEV,MAAM,CAACL,UAAU,EAAEU,cAAc,CAAC;IAC1Dd,IAAI,CAACqB,GAAG,CAACD,WAAW,EAAEX,MAAM,CAACa,QAAQ,EAAER,cAAc,CAAC;IAEtDZ,QAAQ,CAACqB,SAAS,CAAC;MACjBnB,UAAU,EAAEe,aAAa;MACzBG,QAAQ,EAAEF;KACX,CAAC;IACFlB,QAAQ,CAACsB,MAAM,EAAE;;AAErB"},"metadata":{},"sourceType":"module","externalDependencies":[]}