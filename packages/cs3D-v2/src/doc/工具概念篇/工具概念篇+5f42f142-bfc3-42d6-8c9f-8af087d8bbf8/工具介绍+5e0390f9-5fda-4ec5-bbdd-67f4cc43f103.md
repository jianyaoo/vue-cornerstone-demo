ç®€å•ä»‹ç»ä¸€ä¸‹åœ¨Cornerstoneä¸­ä»€ä¹ˆæ˜¯å·¥å…·ï¼Œå·¥å…·æ˜¯ä¸€ä¸ªæœªå®ä¾‹åŒ–çš„ç±»ï¼Œå®ƒè‡³å°‘å®ç°äº†`BaseTool`æ¥å£ã€‚

å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ä½¿ç”¨ä¸€ä¸ªå·¥å…·ï¼Œåˆ™å¿…é¡»å®ç°ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š

1. ä½¿ç”¨Cornerstoneçš„é¡¶å±‚addToolå‡½æ•°æ·»åŠ æœªå®ä¾‹åŒ–çš„å·¥å…·

2. å°†å·¥å…·æ·»åŠ åˆ°å·¥å…·ç»„ä¸­

## æ”¯æŒçš„å·¥å…·ç±»å‹

æˆ‘ä»¬åœ¨ä½¿ç”¨å·¥å…·æ—¶ï¼Œä¸»è¦ä¼šæ¶‰åŠåˆ°å¯¹å›¾åƒçš„åŸå§‹æ“ä½œ(ç¼©æ”¾ã€å¹³ç§»ç­‰ç­‰)ã€æ³¨é‡Šæ“ä½œ(åœ¨å›¾åƒçš„ä¸Šå±‚åœˆå®šä¸€å®šçš„åŒºåŸŸæŸ¥çœ‹ä¿¡æ¯)ã€åˆ†å‰²æ“ä½œç­‰ç­‰ã€‚

æ‰€ä»¥ä»‹ç»çš„å·¥å…·ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰å¤§ç±»ï¼š

- æ“ä½œç±»å·¥å…·

- æ³¨é‡Šç±»å·¥å…·

- åˆ†å‰²ç±»å·¥å…·



### æ“ä½œç±»å·¥å…·

Cornerstone3DToolsæä¾›äº†ä¸€ç»„å·¥å…·ï¼Œå¯ç”¨äºåœ¨è§†å£ä¸­æ“ä½œå›¾åƒã€‚ä¸»è¦åŒ…æ‹¬

- æ”¾å¤§å’Œç¼©å°å›¾åƒ(ZoomTool)

- å¹³ç§»å›¾åƒ(PanTool)

- æ»šåŠ¨å›¾åƒçš„instance(StackScrollTool)

- æ“ä½œå›¾åƒçš„windowLevel (WindowLevelTool)



### æ³¨é‡Šç±»å·¥å…·

Cornerstone3DToolsæä¾›äº†ä¸€å¥—æ³¨é‡Šå·¥å…·ã€‚å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œç¼–è¾‘æ³¨é‡Š

- æµ‹é‡ä¸¤ç‚¹è·ç¦»(Length Tool)

- æµ‹é‡å®½åº¦å’Œé•¿åº¦(Bidirectional Tool)

- çŸ©å½¢é¢ç§¯çš„æµ‹é‡å’Œç»Ÿè®¡(RectangleRoi Tool)

- æµ‹é‡æ¤­çƒä½“çš„ä½“ç§¯å’Œç»Ÿè®¡ä¿¡æ¯(EllipseRoi Tool)

- è·å–ä½“ç´ çš„åº•å±‚å€¼(Probe Tool)

![image.png](å·¥å…·ä»‹ç»+5e0390f9-5fda-4ec5-bbdd-67f4cc43f103/image.png)



### åˆ†å‰²ç±»å·¥å…·

Cornerstone3Dè¿˜æä¾›äº†åˆ†å‰²å·¥å…·ã€‚è¿™åŒ…æ‹¬3D SegmentationDisplayå’Œ3Dåˆ†å‰²ç¼–è¾‘å·¥å…·ï¼Œå¦‚ç”»ç¬”ï¼ŒçŸ©å½¢å’Œåœ†å½¢å‰ªåˆ€ï¼Œä»¥åŠ3Dçƒä½“å·¥å…·ã€‚

![image.png](å·¥å…·ä»‹ç»+5e0390f9-5fda-4ec5-bbdd-67f4cc43f103/image 1.png)



## å·¥å…·çš„æ¨¡å¼

æˆ‘ä»¬æ³¨å†Œçš„å·¥å…·(åœ¨å¯¹åº”çš„toolGroupä¸­)å¯ä»¥å¤„äºä»¥ä¸‹å››ç§æ¨¡å¼ä¹‹ä¸€ï¼Œæ¯ç§æ¨¡å¼éƒ½ä¼šå½±å“å·¥å…·å¯¹äº¤äº’çš„å“åº”æ–¹å¼ã€‚ğŸ“¢ **æ³¨æ„ï¼šåœ¨åŒä¸€ç§ç»‘å®šæ–¹å¼ä¸‹æœ‰ä¸”ä»…æœ‰ä¸€ç§å·¥å…·è¢«æ¿€æ´»ï¼Œä¸ä¼šæœ‰ä¸¤ä¸ªå·¥å…·è¢«æ¿€æ´»**

|æ¨¡å¼|å¯¹åº”çš„äº¤äº’æ•ˆæœ|
|-|-|
|Activeï¼ˆæ¿€æ´»æ¨¡å¼ï¼‰|1. Activeæ¨¡å¼ä¸‹çš„å·¥å…·å°†å“åº”äº¤äº’
2. å¦‚æœè¯¥å·¥å…·æ˜¯æ³¨é‡Šå·¥å…·ï¼Œåˆ™å•å‡»æœªè¦†ç›–ç°æœ‰æ³¨é‡Šçš„äº‹ä»¶å°†åˆ›å»ºæ–°æ³¨é‡Šï¼Œè¦†ç›–ç°åœ¨æ³¨é‡Šå°†é€‰ä¸­æ³¨é‡Š|
|Passive (default)ï¼ˆæ¶ˆææ¨¡å¼ï¼‰|1. å¦‚æœå·¥å…·æ˜¯æ³¨é‡Šå·¥å…·ï¼Œå¦‚æœå®ƒå¯ä»¥è¢«é€‰ä¸­ï¼Œå®ƒå¯ä»¥è¢«ç§»åŠ¨å’Œé‡æ–°å®šä½ã€‚
2. ä¸å“åº”äº¤äº’|
|Enabledï¼ˆå¯ç”¨æ¨¡å¼ï¼‰|1. å·¥å…·å¯ä»¥å‘ˆç°ï¼Œä½†ä¸èƒ½è¿›è¡Œäº¤äº’å“åº”|
|Disabledï¼ˆç¦ç”¨æ¨¡å¼ï¼‰|1. å·¥å…·æ—¢ä¸æ¸²æŸ“ï¼Œä¹Ÿä¸ä¼šå“åº”äº¤äº’|

## å·¥å…·ç»„

ToolGroupæ˜¯Cornerstone3Dä¸­çš„ä¸€ä¸ªæ–°æ¦‚å¿µã€‚

ToolGroupçš„ç›®æ ‡æ˜¯å®šä¹‰ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œä»¥æ¯ä¸ªè§†å£æ–¹å¼å®šä¹‰å·¥å…·çš„è¡Œä¸ºã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œç»‘å®šäº†åŒä¸€ä¸ªTooGroupçš„Viewportå¯ä»¥å…±äº«å·¥å…·ç»„ç›¸åŒçš„é…ç½®ã€æ¨¡å¼åŠç»„å†…çš„å·¥å…·ã€‚



### Viewport å’Œ ToolGroup çš„å…³ç³»

Viewport å’Œ ToolGroup æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼ŒåŒä¸€ä¸ªToolGroupå¯ä»¥ç»‘å®šå¤šä¸ªViewportï¼Œä½†æ˜¯ä¸€ä¸ªViewportåªèƒ½ç»‘å®šä¸€ä¸ªToolGroup



### åˆ›å»ºåŠä½¿ç”¨å·¥å…·ç»„

toolGroupç”±ToolGroupManagerç®¡ç†ã€‚ToolGroupManagerç”¨äºåˆ›å»ºã€æœç´¢å’Œé”€æ¯å·¥å…·ç»„

**åˆå§‹åŒ–å·¥å…·ç»„**

```JavaScript
import { ToolGroupManager } from '@cornerstonejs/tools';

const toolGroupId = 'ctToolGroup';
const ctToolGroup = ToolGroupManager.createToolGroup(toolGroupId);
```

**å·¥å…·ç»„æ·»åŠ å·¥å…·**

```JavaScript
ctToolGroup.addTool(PanTool.toolName);
ctToolGroup.addTool(ZoomTool.toolName);
ctToolGroup.addTool(ProbeTool.toolName);
```

**å·¥å…·ç»„ä¸è§†å›¾è¿›è¡Œç»‘å®š**

```JavaScript
ctToolGroup.addViewport(viewportId, renderingEngineId);
```

**æ¿€æ´»ä¸€ä¸ªå·¥å…·**

```JavaScript
ctToolGroup.setToolActive(LengthTool.toolName, {
  bindings: [{ mouseButton: MouseBindings.Primary }],
});
ctToolGroup.setToolActive(PanTool.toolName, {
  bindings: [{ mouseButton: MouseBindings.Auxiliary }],
});
ctToolGroup.setToolActive(ZoomTool.toolName, {
  bindings: [{ mouseButton: MouseBindings.Secondary }],
});
ctToolGroup.setToolActive(StackScrollTool.toolName);
```



## æ€»ç»“å›é¡¾

![02. Tools-å¯¼å‡º.png](å·¥å…·ä»‹ç»+5e0390f9-5fda-4ec5-bbdd-67f4cc43f103/02.+Tools-å¯¼å‡º.png)

