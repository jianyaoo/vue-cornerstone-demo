{"ast":null,"code":"import macro from '@kitware/vtk.js/macros';\nimport vtkStreamingOpenGLRenderWindow from './vtkStreamingOpenGLRenderWindow';\nimport vtkRenderer from '@kitware/vtk.js/Rendering/Core/Renderer';\nimport vtkRenderWindow from '@kitware/vtk.js/Rendering/Core/RenderWindow';\nimport vtkRenderWindowInteractor from '@kitware/vtk.js/Rendering/Core/RenderWindowInteractor';\nimport '@kitware/vtk.js/Common/Core/Points';\nimport '@kitware/vtk.js/Common/Core/DataArray';\nimport '@kitware/vtk.js/Common/DataModel/PolyData';\nimport '@kitware/vtk.js/Rendering/Core/Actor';\nimport '@kitware/vtk.js/Rendering/Core/Mapper';\nfunction vtkOffscreenMultiRenderWindow(publicAPI, model) {\n  const invokeResize = publicAPI.invokeResize;\n  delete publicAPI.invokeResize;\n  model.renderWindow = vtkRenderWindow.newInstance();\n  model.rendererMap = {};\n  model.openGLRenderWindow = vtkStreamingOpenGLRenderWindow.newInstance();\n  model.renderWindow.addView(model.openGLRenderWindow);\n  model.interactor = vtkRenderWindowInteractor.newInstance();\n  model.interactor.setView(model.openGLRenderWindow);\n  model.interactor.initialize();\n  publicAPI.addRenderer = ({\n    viewport,\n    id,\n    background\n  }) => {\n    const renderer = vtkRenderer.newInstance({\n      viewport,\n      background: background || model.background\n    });\n    model.renderWindow.addRenderer(renderer);\n    model.rendererMap[id] = renderer;\n  };\n  publicAPI.destroy = () => {\n    const rwi = model.renderWindow.getInteractor();\n    rwi.delete();\n  };\n  publicAPI.removeRenderer = id => {\n    const renderer = publicAPI.getRenderer(id);\n    model.renderWindow.removeRenderer(renderer);\n    renderer.delete();\n    delete model.rendererMap[id];\n  };\n  publicAPI.getRenderer = id => {\n    return model.rendererMap[id];\n  };\n  publicAPI.getRenderers = () => {\n    const {\n      rendererMap\n    } = model;\n    const renderers = Object.keys(rendererMap).map(id => {\n      return {\n        id,\n        renderer: rendererMap[id]\n      };\n    });\n    return renderers;\n  };\n  publicAPI.resize = () => {\n    if (model.container) {\n      const {\n        width,\n        height\n      } = model.container;\n      model.openGLRenderWindow.setSize(Math.floor(width), Math.floor(height));\n      invokeResize();\n      model.renderWindow.render();\n    }\n  };\n  publicAPI.setContainer = el => {\n    model.container = el;\n    model.openGLRenderWindow.setContainer(model.container);\n  };\n  publicAPI.delete = macro.chain(publicAPI.setContainer, publicAPI.destroy, model.openGLRenderWindow.delete, publicAPI.delete);\n  publicAPI.resize();\n}\nconst DEFAULT_VALUES = {\n  background: [0.0, 0.0, 0.0],\n  container: null\n};\nexport function extend(publicAPI, model, initialValues = {}) {\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['renderWindow', 'openGLRenderWindow', 'interactor', 'container']);\n  macro.event(publicAPI, model, 'resize');\n  vtkOffscreenMultiRenderWindow(publicAPI, model);\n}\nexport const newInstance = macro.newInstance(extend);\nexport default {\n  newInstance,\n  extend\n};","map":{"version":3,"names":["macro","vtkStreamingOpenGLRenderWindow","vtkRenderer","vtkRenderWindow","vtkRenderWindowInteractor","vtkOffscreenMultiRenderWindow","publicAPI","model","invokeResize","renderWindow","newInstance","rendererMap","openGLRenderWindow","addView","interactor","setView","initialize","addRenderer","viewport","id","background","renderer","destroy","rwi","getInteractor","delete","removeRenderer","getRenderer","getRenderers","renderers","Object","keys","map","resize","container","width","height","setSize","Math","floor","render","setContainer","el","chain","DEFAULT_VALUES","extend","initialValues","assign","obj","get","event"],"sources":["../../../../src/RenderingEngine/vtkClasses/vtkOffscreenMultiRenderWindow.js"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,8BAA8B,MAAM,kCAAkC;AAC7E,OAAOC,WAAW,MAAM,yCAAyC;AACjE,OAAOC,eAAe,MAAM,6CAA6C;AACzE,OAAOC,yBAAyB,MAAM,uDAAuD;AAG7F,OAAO,oCAAoC;AAC3C,OAAO,uCAAuC;AAC9C,OAAO,2CAA2C;AAClD,OAAO,sCAAsC;AAC7C,OAAO,uCAAuC;AAiB9C,SAASC,6BAA6BA,CAACC,SAAS,EAAEC,KAAK;EAErD,MAAMC,YAAY,GAAGF,SAAS,CAACE,YAAY;EAC3C,OAAOF,SAAS,CAACE,YAAY;EAG7BD,KAAK,CAACE,YAAY,GAAGN,eAAe,CAACO,WAAW,EAAE;EAClDH,KAAK,CAACI,WAAW,GAAG,EAAE;EAGtBJ,KAAK,CAACK,kBAAkB,GAAGX,8BAA8B,CAACS,WAAW,EAAE;EACvEH,KAAK,CAACE,YAAY,CAACI,OAAO,CAACN,KAAK,CAACK,kBAAkB,CAAC;EAGpDL,KAAK,CAACO,UAAU,GAAGV,yBAAyB,CAACM,WAAW,EAAE;EAC1DH,KAAK,CAACO,UAAU,CAACC,OAAO,CAACR,KAAK,CAACK,kBAAkB,CAAC;EAClDL,KAAK,CAACO,UAAU,CAACE,UAAU,EAAE;EAE7BV,SAAS,CAACW,WAAW,GAAG,CAAC;IAAEC,QAAQ;IAAEC,EAAE;IAAEC;EAAU,CAAE,KAAI;IACvD,MAAMC,QAAQ,GAAGnB,WAAW,CAACQ,WAAW,CAAC;MACvCQ,QAAQ;MACRE,UAAU,EAAEA,UAAU,IAAIb,KAAK,CAACa;KACjC,CAAC;IAEFb,KAAK,CAACE,YAAY,CAACQ,WAAW,CAACI,QAAQ,CAAC;IACxCd,KAAK,CAACI,WAAW,CAACQ,EAAE,CAAC,GAAGE,QAAQ;EAClC,CAAC;EAEDf,SAAS,CAACgB,OAAO,GAAG,MAAK;IACvB,MAAMC,GAAG,GAAGhB,KAAK,CAACE,YAAY,CAACe,aAAa,EAAE;IAC9CD,GAAG,CAACE,MAAM,EAAE;EACd,CAAC;EAEDnB,SAAS,CAACoB,cAAc,GAAIP,EAAE,IAAI;IAChC,MAAME,QAAQ,GAAGf,SAAS,CAACqB,WAAW,CAACR,EAAE,CAAC;IAC1CZ,KAAK,CAACE,YAAY,CAACiB,cAAc,CAACL,QAAQ,CAAC;IAC3CA,QAAQ,CAACI,MAAM,EAAE;IACjB,OAAOlB,KAAK,CAACI,WAAW,CAACQ,EAAE,CAAC;EAC9B,CAAC;EAEDb,SAAS,CAACqB,WAAW,GAAIR,EAAE,IAAI;IAC7B,OAAOZ,KAAK,CAACI,WAAW,CAACQ,EAAE,CAAC;EAC9B,CAAC;EAEDb,SAAS,CAACsB,YAAY,GAAG,MAAK;IAC5B,MAAM;MAAEjB;IAAW,CAAE,GAAGJ,KAAK;IAE7B,MAAMsB,SAAS,GAAGC,MAAM,CAACC,IAAI,CAACpB,WAAW,CAAC,CAACqB,GAAG,CAAEb,EAAE,IAAI;MACpD,OAAO;QAAEA,EAAE;QAAEE,QAAQ,EAAEV,WAAW,CAACQ,EAAE;MAAC,CAAE;IAC1C,CAAC,CAAC;IAEF,OAAOU,SAAS;EAClB,CAAC;EAGDvB,SAAS,CAAC2B,MAAM,GAAG,MAAK;IACtB,IAAI1B,KAAK,CAAC2B,SAAS,EAAE;MAEnB,MAAM;QAAEC,KAAK;QAAEC;MAAM,CAAE,GAAG7B,KAAK,CAAC2B,SAAS;MAIzC3B,KAAK,CAACK,kBAAkB,CAACyB,OAAO,CAACC,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,EAAEG,IAAI,CAACC,KAAK,CAACH,MAAM,CAAC,CAAC;MACvE5B,YAAY,EAAE;MACdD,KAAK,CAACE,YAAY,CAAC+B,MAAM,EAAE;;EAE/B,CAAC;EAGDlC,SAAS,CAACmC,YAAY,GAAIC,EAAE,IAAI;IAE9BnC,KAAK,CAAC2B,SAAS,GAAGQ,EAAE;IACpBnC,KAAK,CAACK,kBAAkB,CAAC6B,YAAY,CAAClC,KAAK,CAAC2B,SAAS,CAAC;EACxD,CAAC;EAGD5B,SAAS,CAACmB,MAAM,GAAGzB,KAAK,CAAC2C,KAAK,CAC5BrC,SAAS,CAACmC,YAAY,EACtBnC,SAAS,CAACgB,OAAO,EACjBf,KAAK,CAACK,kBAAkB,CAACa,MAAM,EAC/BnB,SAAS,CAACmB,MAAM,CACjB;EAEDnB,SAAS,CAAC2B,MAAM,EAAE;AACpB;AAMA,MAAMW,cAAc,GAAG;EACrBxB,UAAU,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;EAC3Bc,SAAS,EAAE;CACZ;AAID,OAAM,SAAUW,MAAMA,CAACvC,SAAS,EAAEC,KAAK,EAAEuC,aAAa,GAAG,EAAE;EACzDhB,MAAM,CAACiB,MAAM,CAACxC,KAAK,EAAEqC,cAAc,EAAEE,aAAa,CAAC;EAGnD9C,KAAK,CAACgD,GAAG,CAAC1C,SAAS,EAAEC,KAAK,CAAC;EAC3BP,KAAK,CAACiD,GAAG,CAAC3C,SAAS,EAAEC,KAAK,EAAE,CAC1B,cAAc,EACd,oBAAoB,EACpB,YAAY,EACZ,WAAW,CACZ,CAAC;EACFP,KAAK,CAACkD,KAAK,CAAC5C,SAAS,EAAEC,KAAK,EAAE,QAAQ,CAAC;EAGvCF,6BAA6B,CAACC,SAAS,EAAEC,KAAK,CAAC;AACjD;AAIA,OAAO,MAAMG,WAAW,GAAGV,KAAK,CAACU,WAAW,CAACmC,MAAM,CAAC;AAIpD,eAAe;EAAEnC,WAAW;EAAEmC;AAAM,CAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}