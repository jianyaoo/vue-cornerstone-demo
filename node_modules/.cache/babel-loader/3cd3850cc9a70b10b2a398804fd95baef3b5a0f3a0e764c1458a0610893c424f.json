{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport { BaseTool } from './base';\nimport { getEnabledElement } from '@cornerstonejs/core';\nimport { mat4, vec3 } from 'gl-matrix';\nconst DIRECTIONS = {\n  X: [1, 0, 0],\n  Y: [0, 1, 0],\n  Z: [0, 0, 1],\n  CUSTOM: []\n};\nclass VolumeRotateMouseWheelTool extends BaseTool {\n  constructor(toolProps = {}, defaultToolProps = {\n    supportedInteractionTypes: ['Mouse', 'Touch'],\n    configuration: {\n      direction: DIRECTIONS.Z,\n      rotateIncrementDegrees: 30\n    }\n  }) {\n    super(toolProps, defaultToolProps);\n  }\n  mouseWheelCallback(evt) {\n    const {\n      element,\n      wheel\n    } = evt.detail;\n    const enabledElement = getEnabledElement(element);\n    const {\n      viewport\n    } = enabledElement;\n    const {\n      direction,\n      rotateIncrementDegrees\n    } = this.configuration;\n    const camera = viewport.getCamera();\n    const {\n      viewUp,\n      position,\n      focalPoint\n    } = camera;\n    const {\n      direction: deltaY\n    } = wheel;\n    const [cx, cy, cz] = focalPoint;\n    const [ax, ay, az] = direction;\n    const angle = deltaY * (rotateIncrementDegrees * Math.PI) / 180;\n    const newPosition = [0, 0, 0];\n    const newFocalPoint = [0, 0, 0];\n    const newViewUp = [0, 0, 0];\n    const transform = mat4.identity(new Float32Array(16));\n    mat4.translate(transform, transform, [cx, cy, cz]);\n    mat4.rotate(transform, transform, angle, [ax, ay, az]);\n    mat4.translate(transform, transform, [-cx, -cy, -cz]);\n    vec3.transformMat4(newPosition, position, transform);\n    vec3.transformMat4(newFocalPoint, focalPoint, transform);\n    mat4.identity(transform);\n    mat4.rotate(transform, transform, angle, [ax, ay, az]);\n    vec3.transformMat4(newViewUp, viewUp, transform);\n    viewport.setCamera({\n      position: newPosition,\n      viewUp: newViewUp,\n      focalPoint: newFocalPoint\n    });\n    viewport.render();\n  }\n}\nVolumeRotateMouseWheelTool.toolName = 'VolumeRotateMouseWheel';\nexport default VolumeRotateMouseWheelTool;","map":{"version":3,"names":["BaseTool","getEnabledElement","mat4","vec3","DIRECTIONS","X","Y","Z","CUSTOM","VolumeRotateMouseWheelTool","constructor","toolProps","defaultToolProps","supportedInteractionTypes","configuration","direction","rotateIncrementDegrees","mouseWheelCallback","evt","element","wheel","detail","enabledElement","viewport","camera","getCamera","viewUp","position","focalPoint","deltaY","cx","cy","cz","ax","ay","az","angle","Math","PI","newPosition","newFocalPoint","newViewUp","transform","identity","Float32Array","translate","rotate","transformMat4","setCamera","render","toolName"],"sources":["../../../src/tools/VolumeRotateMouseWheelTool.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}