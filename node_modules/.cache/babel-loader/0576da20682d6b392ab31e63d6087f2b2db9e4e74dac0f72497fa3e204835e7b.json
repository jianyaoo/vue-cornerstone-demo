{"ast":null,"code":"import { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { keyEventListener } from '../../eventListeners';\nimport { getMouseButton } from '../../eventListeners/mouse/mouseDownListener';\nconst {\n  Active\n} = ToolModes;\nexport default function getActiveToolForKeyboardEvent(evt) {\n  const {\n    renderingEngineId,\n    viewportId\n  } = evt.detail;\n  const mouseButton = getMouseButton();\n  const modifierKey = keyEventListener.getModifierKey();\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(viewportId, renderingEngineId);\n  if (!toolGroup) {\n    return null;\n  }\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n    if (toolOptions.mode !== Active) {\n      continue;\n    }\n    const correctBinding = toolOptions.bindings.length && toolOptions.bindings.some(binding => binding.mouseButton === (mouseButton ?? defaultMousePrimary) && binding.modifierKey === modifierKey);\n    if (correctBinding) {\n      return toolGroup.getToolInstance(toolName);\n    }\n  }\n}","map":{"version":3,"names":["ToolGroupManager","ToolModes","keyEventListener","getMouseButton","Active","getActiveToolForKeyboardEvent","evt","renderingEngineId","viewportId","detail","mouseButton","modifierKey","getModifierKey","toolGroup","getToolGroupForViewport","toolGroupToolNames","Object","keys","toolOptions","defaultMousePrimary","getDefaultMousePrimary","j","length","toolName","mode","correctBinding","bindings","some","binding","getToolInstance"],"sources":["../../../../src/eventDispatchers/shared/getActiveToolForKeyboardEvent.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,aAAa;AAC9C,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,gBAAgB,QAAQ,sBAAsB;AAEvD,SAASC,cAAc,QAAQ,8CAA8C;AAE7E,MAAM;EAAEC;AAAM,CAAE,GAAGH,SAAS;AAW5B,eAAc,SAAUI,6BAA6BA,CACnDC,GAAgC;EAEhC,MAAM;IAAEC,iBAAiB;IAAEC;EAAU,CAAE,GAAGF,GAAG,CAACG,MAAM;EAGpD,MAAMC,WAAW,GAAGP,cAAc,EAAE;EAIpC,MAAMQ,WAAW,GAAGT,gBAAgB,CAACU,cAAc,EAAE;EAErD,MAAMC,SAAS,GAAGb,gBAAgB,CAACc,uBAAuB,CACxDN,UAAU,EACVD,iBAAiB,CAClB;EAED,IAAI,CAACM,SAAS,EAAE;IACd,OAAO,IAAI;;EAGb,MAAME,kBAAkB,GAAGC,MAAM,CAACC,IAAI,CAACJ,SAAS,CAACK,WAAW,CAAC;EAC7D,MAAMC,mBAAmB,GAAGN,SAAS,CAACO,sBAAsB,EAAE;EAE9D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,kBAAkB,CAACO,MAAM,EAAED,CAAC,EAAE,EAAE;IAClD,MAAME,QAAQ,GAAGR,kBAAkB,CAACM,CAAC,CAAC;IACtC,MAAMH,WAAW,GAAGL,SAAS,CAACK,WAAW,CAACK,QAAQ,CAAC;IAEnD,IAAIL,WAAW,CAACM,IAAI,KAAKpB,MAAM,EAAE;MAC/B;;IAIF,MAAMqB,cAAc,GAClBP,WAAW,CAACQ,QAAQ,CAACJ,MAAM,IAC3BJ,WAAW,CAACQ,QAAQ,CAACC,IAAI,CACtBC,OAAO,IACNA,OAAO,CAAClB,WAAW,MAAMA,WAAW,IAAIS,mBAAmB,CAAC,IAC5DS,OAAO,CAACjB,WAAW,KAAKA,WAAW,CACtC;IAEH,IAAIc,cAAc,EAAE;MAClB,OAAOZ,SAAS,CAACgB,eAAe,CAACN,QAAQ,CAAC;;;AAGhD"},"metadata":{},"sourceType":"module","externalDependencies":[]}