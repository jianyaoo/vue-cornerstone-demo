{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport getVOILUT from './getVOILut';\nexport default function generateColorLUT(image, windowWidth, windowCenter, invert, voiLUT) {\n  const maxPixelValue = image.maxPixelValue;\n  const minPixelValue = image.minPixelValue;\n  const offset = Math.min(minPixelValue, 0);\n  if (image.cachedLut === undefined) {\n    const length = maxPixelValue - offset + 1;\n    image.cachedLut = {};\n    image.cachedLut.lutArray = new Uint8ClampedArray(length);\n  }\n  const lut = image.cachedLut.lutArray;\n  const vlutfn = getVOILUT(Array.isArray(windowWidth) ? windowWidth[0] : windowWidth, Array.isArray(windowCenter) ? windowCenter[0] : windowCenter, voiLUT);\n  if (invert === true) {\n    for (let storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\n      lut[storedValue + -offset] = 255 - vlutfn(storedValue);\n    }\n  } else {\n    for (let storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\n      lut[storedValue + -offset] = vlutfn(storedValue);\n    }\n  }\n  return lut;\n}","map":{"version":3,"names":["getVOILUT","generateColorLUT","image","windowWidth","windowCenter","invert","voiLUT","maxPixelValue","minPixelValue","offset","Math","min","cachedLut","undefined","length","lutArray","Uint8ClampedArray","lut","vlutfn","Array","isArray","storedValue"],"sources":["../../../../../../src/RenderingEngine/helpers/cpuFallback/rendering/generateColorLUT.ts"],"sourcesContent":[null],"mappings":";;;AAAA,OAAOA,SAAS,MAAM,aAAa;AAenC,eAAc,SAAUC,gBAAgBA,CACtCC,KAAa,EACbC,WAA8B,EAC9BC,YAA+B,EAC/BC,MAAe,EACfC,MAAuB;EAEvB,MAAMC,aAAa,GAAGL,KAAK,CAACK,aAAa;EACzC,MAAMC,aAAa,GAAGN,KAAK,CAACM,aAAa;EACzC,MAAMC,MAAM,GAAGC,IAAI,CAACC,GAAG,CAACH,aAAa,EAAE,CAAC,CAAC;EAEzC,IAAIN,KAAK,CAACU,SAAS,KAAKC,SAAS,EAAE;IACjC,MAAMC,MAAM,GAAGP,aAAa,GAAGE,MAAM,GAAG,CAAC;IAEzCP,KAAK,CAACU,SAAS,GAAG,EAAE;IACpBV,KAAK,CAACU,SAAS,CAACG,QAAQ,GAAG,IAAIC,iBAAiB,CAACF,MAAM,CAAC;;EAG1D,MAAMG,GAAG,GAAGf,KAAK,CAACU,SAAS,CAACG,QAAQ;EACpC,MAAMG,MAAM,GAAGlB,SAAS,CACtBmB,KAAK,CAACC,OAAO,CAACjB,WAAW,CAAC,GAAGA,WAAW,CAAC,CAAC,CAAC,GAAGA,WAAW,EACzDgB,KAAK,CAACC,OAAO,CAAChB,YAAY,CAAC,GAAGA,YAAY,CAAC,CAAC,CAAC,GAAGA,YAAY,EAC5DE,MAAM,CACP;EAED,IAAID,MAAM,KAAK,IAAI,EAAE;IACnB,KACE,IAAIgB,WAAW,GAAGb,aAAa,EAC/Ba,WAAW,IAAId,aAAa,EAC5Bc,WAAW,EAAE,EACb;MACAJ,GAAG,CAACI,WAAW,GAAG,CAACZ,MAAM,CAAC,GAAG,GAAG,GAAGS,MAAM,CAACG,WAAW,CAAC;;GAEzD,MAAM;IACL,KACE,IAAIA,WAAW,GAAGb,aAAa,EAC/Ba,WAAW,IAAId,aAAa,EAC5Bc,WAAW,EAAE,EACb;MACAJ,GAAG,CAACI,WAAW,GAAG,CAACZ,MAAM,CAAC,GAAGS,MAAM,CAACG,WAAW,CAAC;;;EAIpD,OAAOJ,GAAG;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}