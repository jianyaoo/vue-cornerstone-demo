{"ast":null,"code":"import { getEnabledElement, triggerEvent } from '@cornerstonejs/core';\nimport Events from '../../enums/Events';\nimport mouseMoveListener from './mouseMoveListener';\nimport getMouseEventPoints from './getMouseEventPoints';\nconst {\n  MOUSE_DOWN,\n  MOUSE_DOWN_ACTIVATE,\n  MOUSE_CLICK,\n  MOUSE_UP,\n  MOUSE_DRAG\n} = Events;\nconst DOUBLE_CLICK_TOLERANCE_MS = 400;\nconst MULTI_BUTTON_TOLERANCE_MS = 150;\nconst DOUBLE_CLICK_DRAG_TOLERANCE = 3;\nconst defaultState = {\n  mouseButton: undefined,\n  element: null,\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  isClickEvent: true,\n  clickDelay: 200,\n  preventClickTimeout: null,\n  startPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0]\n  },\n  lastPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0]\n  }\n};\nlet state = {\n  mouseButton: undefined,\n  renderingEngineId: undefined,\n  viewportId: undefined,\n  isClickEvent: true,\n  clickDelay: 200,\n  element: null,\n  preventClickTimeout: null,\n  startPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0]\n  },\n  lastPoints: {\n    page: [0, 0],\n    client: [0, 0],\n    canvas: [0, 0],\n    world: [0, 0, 0]\n  }\n};\nconst doubleClickState = {\n  doubleClickTimeout: null,\n  mouseDownEvent: null,\n  mouseUpEvent: null,\n  ignoreDoubleClick: false\n};\nfunction mouseDownListener(evt) {\n  if (doubleClickState.doubleClickTimeout) {\n    if (evt.buttons === doubleClickState.mouseDownEvent.buttons) {\n      return;\n    }\n    doubleClickState.mouseDownEvent = evt;\n    _doStateMouseDownAndUp();\n    return;\n  }\n  doubleClickState.doubleClickTimeout = setTimeout(_doStateMouseDownAndUp, evt.buttons === 1 ? DOUBLE_CLICK_TOLERANCE_MS : MULTI_BUTTON_TOLERANCE_MS);\n  doubleClickState.mouseDownEvent = evt;\n  doubleClickState.ignoreDoubleClick = false;\n  state.element = evt.currentTarget;\n  state.mouseButton = evt.buttons;\n  const enabledElement = getEnabledElement(state.element);\n  const {\n    renderingEngineId,\n    viewportId\n  } = enabledElement;\n  state.renderingEngineId = renderingEngineId;\n  state.viewportId = viewportId;\n  state.preventClickTimeout = setTimeout(_preventClickHandler, state.clickDelay);\n  state.element.removeEventListener('mousemove', mouseMoveListener);\n  const startPoints = getMouseEventPoints(evt, state.element);\n  state.startPoints = _copyPoints(startPoints);\n  state.lastPoints = _copyPoints(startPoints);\n  document.addEventListener('mouseup', _onMouseUp);\n  document.addEventListener('mousemove', _onMouseDrag);\n}\nfunction _doMouseDown(evt) {\n  const deltaPoints = _getDeltaPoints(state.startPoints, state.startPoints);\n  const eventDetail = {\n    event: evt,\n    eventName: MOUSE_DOWN,\n    element: state.element,\n    mouseButton: state.mouseButton,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    startPoints: state.startPoints,\n    lastPoints: state.startPoints,\n    currentPoints: state.startPoints,\n    deltaPoints\n  };\n  state.lastPoints = _copyPoints(eventDetail.lastPoints);\n  const notConsumed = triggerEvent(eventDetail.element, MOUSE_DOWN, eventDetail);\n  if (notConsumed) {\n    triggerEvent(eventDetail.element, MOUSE_DOWN_ACTIVATE, eventDetail);\n  }\n}\nfunction _onMouseDrag(evt) {\n  const currentPoints = getMouseEventPoints(evt, state.element);\n  const lastPoints = _updateMouseEventsLastPoints(state.element, state.lastPoints);\n  const deltaPoints = _getDeltaPoints(currentPoints, lastPoints);\n  if (doubleClickState.doubleClickTimeout) {\n    if (_isDragPastDoubleClickTolerance(deltaPoints.canvas)) {\n      _doStateMouseDownAndUp();\n    } else {\n      return;\n    }\n  }\n  const eventDetail = {\n    event: evt,\n    eventName: MOUSE_DRAG,\n    mouseButton: state.mouseButton,\n    renderingEngineId: state.renderingEngineId,\n    viewportId: state.viewportId,\n    camera: {},\n    element: state.element,\n    startPoints: _copyPoints(state.startPoints),\n    lastPoints: _copyPoints(lastPoints),\n    currentPoints,\n    deltaPoints\n  };\n  const consumed = !triggerEvent(state.element, MOUSE_DRAG, eventDetail);\n  if (consumed) {\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  }\n  state.lastPoints = _copyPoints(currentPoints);\n}\nfunction _onMouseUp(evt) {\n  clearTimeout(state.preventClickTimeout);\n  if (doubleClickState.doubleClickTimeout) {\n    if (!doubleClickState.mouseUpEvent) {\n      doubleClickState.mouseUpEvent = evt;\n      state.element.addEventListener('mousemove', _onMouseMove);\n    } else {\n      _cleanUp();\n    }\n  } else {\n    const eventName = state.isClickEvent ? MOUSE_CLICK : MOUSE_UP;\n    const currentPoints = getMouseEventPoints(evt, state.element);\n    const deltaPoints = _getDeltaPoints(currentPoints, state.lastPoints);\n    const eventDetail = {\n      event: evt,\n      eventName,\n      mouseButton: state.mouseButton,\n      element: state.element,\n      renderingEngineId: state.renderingEngineId,\n      viewportId: state.viewportId,\n      camera: {},\n      startPoints: _copyPoints(state.startPoints),\n      lastPoints: _copyPoints(state.lastPoints),\n      currentPoints,\n      deltaPoints\n    };\n    triggerEvent(eventDetail.element, eventName, eventDetail);\n    _cleanUp();\n  }\n  document.removeEventListener('mousemove', _onMouseDrag);\n}\nfunction _onMouseMove(evt) {\n  const currentPoints = getMouseEventPoints(evt, state.element);\n  const lastPoints = _updateMouseEventsLastPoints(state.element, state.lastPoints);\n  const deltaPoints = _getDeltaPoints(currentPoints, lastPoints);\n  if (!_isDragPastDoubleClickTolerance(deltaPoints.canvas)) {\n    return;\n  }\n  _doStateMouseDownAndUp();\n  mouseMoveListener(evt);\n}\nfunction _isDragPastDoubleClickTolerance(delta) {\n  return Math.abs(delta[0]) + Math.abs(delta[1]) > DOUBLE_CLICK_DRAG_TOLERANCE;\n}\nfunction _preventClickHandler() {\n  state.isClickEvent = false;\n}\nfunction _doStateMouseDownAndUp() {\n  doubleClickState.ignoreDoubleClick = true;\n  const mouseDownEvent = doubleClickState.mouseDownEvent;\n  const mouseUpEvent = doubleClickState.mouseUpEvent;\n  _clearDoubleClickTimeoutAndEvents();\n  _doMouseDown(mouseDownEvent);\n  if (mouseUpEvent) {\n    _onMouseUp(mouseUpEvent);\n  }\n}\nfunction _clearDoubleClickTimeoutAndEvents() {\n  if (doubleClickState.doubleClickTimeout) {\n    clearTimeout(doubleClickState.doubleClickTimeout);\n    doubleClickState.doubleClickTimeout = null;\n  }\n  doubleClickState.mouseDownEvent = null;\n  doubleClickState.mouseUpEvent = null;\n}\nfunction _cleanUp() {\n  document.removeEventListener('mouseup', _onMouseUp);\n  state.element?.removeEventListener('mousemove', _onMouseMove);\n  state.element?.addEventListener('mousemove', mouseMoveListener);\n  _clearDoubleClickTimeoutAndEvents();\n  state = JSON.parse(JSON.stringify(defaultState));\n}\nfunction _copyPoints(points) {\n  return JSON.parse(JSON.stringify(points));\n}\nfunction _updateMouseEventsLastPoints(element, lastPoints) {\n  const {\n    viewport\n  } = getEnabledElement(element);\n  const world = viewport.canvasToWorld(lastPoints.canvas);\n  return {\n    page: lastPoints.page,\n    client: lastPoints.client,\n    canvas: lastPoints.canvas,\n    world\n  };\n}\nfunction _getDeltaPoints(currentPoints, lastPoints) {\n  return {\n    page: _subtractPoints2D(currentPoints.page, lastPoints.page),\n    client: _subtractPoints2D(currentPoints.client, lastPoints.client),\n    canvas: _subtractPoints2D(currentPoints.canvas, lastPoints.canvas),\n    world: _subtractPoints3D(currentPoints.world, lastPoints.world)\n  };\n}\nfunction _subtractPoints2D(point0, point1) {\n  return [point0[0] - point1[0], point0[1] - point1[1]];\n}\nfunction _subtractPoints3D(point0, point1) {\n  return [point0[0] - point1[0], point0[1] - point1[1], point0[2] - point1[2]];\n}\nexport function getMouseButton() {\n  return state.mouseButton;\n}\nexport function mouseDoubleClickIgnoreListener(evt) {\n  if (doubleClickState.ignoreDoubleClick) {\n    doubleClickState.ignoreDoubleClick = false;\n    evt.stopImmediatePropagation();\n    evt.preventDefault();\n  } else {\n    _cleanUp();\n  }\n}\nexport default mouseDownListener;","map":{"version":3,"names":["getEnabledElement","triggerEvent","Events","mouseMoveListener","getMouseEventPoints","MOUSE_DOWN","MOUSE_DOWN_ACTIVATE","MOUSE_CLICK","MOUSE_UP","MOUSE_DRAG","DOUBLE_CLICK_TOLERANCE_MS","MULTI_BUTTON_TOLERANCE_MS","DOUBLE_CLICK_DRAG_TOLERANCE","defaultState","mouseButton","undefined","element","renderingEngineId","viewportId","isClickEvent","clickDelay","preventClickTimeout","startPoints","page","client","canvas","world","lastPoints","state","doubleClickState","doubleClickTimeout","mouseDownEvent","mouseUpEvent","ignoreDoubleClick","mouseDownListener","evt","buttons","_doStateMouseDownAndUp","setTimeout","currentTarget","enabledElement","_preventClickHandler","removeEventListener","_copyPoints","document","addEventListener","_onMouseUp","_onMouseDrag","_doMouseDown","deltaPoints","_getDeltaPoints","eventDetail","event","eventName","camera","currentPoints","notConsumed","_updateMouseEventsLastPoints","_isDragPastDoubleClickTolerance","consumed","stopImmediatePropagation","preventDefault","clearTimeout","_onMouseMove","_cleanUp","delta","Math","abs","_clearDoubleClickTimeoutAndEvents","JSON","parse","stringify","points","viewport","canvasToWorld","_subtractPoints2D","_subtractPoints3D","point0","point1","getMouseButton","mouseDoubleClickIgnoreListener"],"sources":["../../../../src/eventListeners/mouse/mouseDownListener.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}