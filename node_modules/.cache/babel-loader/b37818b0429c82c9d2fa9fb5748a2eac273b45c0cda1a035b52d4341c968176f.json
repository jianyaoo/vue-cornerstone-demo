{"ast":null,"code":"const EPSILON = 1e-6;\nconst INSIDE = 1;\nconst OUTSIDE = 0;\nfunction clipT(num, denom, c) {\n  const [tE, tL] = c;\n  if (Math.abs(denom) < EPSILON) {\n    return num < 0;\n  }\n  const t = num / denom;\n  if (denom > 0) {\n    if (t > tL) {\n      return 0;\n    }\n    if (t > tE) {\n      c[0] = t;\n    }\n  } else {\n    if (t < tE) {\n      return 0;\n    }\n    if (t < tL) {\n      c[1] = t;\n    }\n  }\n  return 1;\n}\nexport default function clip(a, b, box, da, db) {\n  const [x1, y1] = a;\n  const [x2, y2] = b;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (da === undefined || db === undefined) {\n    da = a;\n    db = b;\n  } else {\n    da[0] = a[0];\n    da[1] = a[1];\n    db[0] = b[0];\n    db[1] = b[1];\n  }\n  if (Math.abs(dx) < EPSILON && Math.abs(dy) < EPSILON && x1 >= box[0] && x1 <= box[2] && y1 >= box[1] && y1 <= box[3]) {\n    return INSIDE;\n  }\n  const c = [0, 1];\n  if (clipT(box[0] - x1, dx, c) && clipT(x1 - box[2], -dx, c) && clipT(box[1] - y1, dy, c) && clipT(y1 - box[3], -dy, c)) {\n    const [tE, tL] = c;\n    if (tL < 1) {\n      db[0] = x1 + tL * dx;\n      db[1] = y1 + tL * dy;\n    }\n    if (tE > 0) {\n      da[0] += tE * dx;\n      da[1] += tE * dy;\n    }\n    return INSIDE;\n  }\n  return OUTSIDE;\n}","map":{"version":3,"names":["EPSILON","INSIDE","OUTSIDE","clipT","num","denom","c","tE","tL","Math","abs","t","clip","a","b","box","da","db","x1","y1","x2","y2","dx","dy","undefined"],"sources":["../../../../../src/utilities/math/vec2/liangBarksyClip.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}