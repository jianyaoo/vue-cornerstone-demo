{"ast":null,"code":"import { validateParameterUndefinedOrNull } from './validator';\nimport getImageSize from './getImageSize';\nexport default function (canvas, image, rotation = null) {\n  validateParameterUndefinedOrNull(canvas, 'getImageScale: parameter canvas must not be undefined');\n  validateParameterUndefinedOrNull(image, 'getImageScale: parameter image must not be undefined');\n  const imageSize = getImageSize(image, rotation);\n  const rowPixelSpacing = image.rowPixelSpacing || 1;\n  const columnPixelSpacing = image.columnPixelSpacing || 1;\n  let verticalRatio = 1;\n  let horizontalRatio = 1;\n  if (rowPixelSpacing < columnPixelSpacing) {\n    horizontalRatio = columnPixelSpacing / rowPixelSpacing;\n  } else {\n    verticalRatio = rowPixelSpacing / columnPixelSpacing;\n  }\n  const verticalScale = canvas.height / imageSize.height / verticalRatio;\n  const horizontalScale = canvas.width / imageSize.width / horizontalRatio;\n  return {\n    verticalScale,\n    horizontalScale,\n    scaleFactor: Math.min(horizontalScale, verticalScale)\n  };\n}","map":{"version":3,"names":["validateParameterUndefinedOrNull","getImageSize","canvas","image","rotation","imageSize","rowPixelSpacing","columnPixelSpacing","verticalRatio","horizontalRatio","verticalScale","height","horizontalScale","width","scaleFactor","Math","min"],"sources":["../../../../../../src/RenderingEngine/helpers/cpuFallback/rendering/getImageFitScale.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gCAAgC,QAAQ,aAAa;AAC9D,OAAOC,YAAY,MAAM,gBAAgB;AAUzC,eAAc,UACZC,MAAyB,EACzBC,KAAa,EACbC,QAAA,GAA0B,IAAI;EAM9BJ,gCAAgC,CAC9BE,MAAM,EACN,uDAAuD,CACxD;EACDF,gCAAgC,CAC9BG,KAAK,EACL,sDAAsD,CACvD;EAED,MAAME,SAAS,GAAGJ,YAAY,CAACE,KAAK,EAAEC,QAAQ,CAAC;EAC/C,MAAME,eAAe,GAAGH,KAAK,CAACG,eAAe,IAAI,CAAC;EAClD,MAAMC,kBAAkB,GAAGJ,KAAK,CAACI,kBAAkB,IAAI,CAAC;EACxD,IAAIC,aAAa,GAAG,CAAC;EACrB,IAAIC,eAAe,GAAG,CAAC;EAEvB,IAAIH,eAAe,GAAGC,kBAAkB,EAAE;IACxCE,eAAe,GAAGF,kBAAkB,GAAGD,eAAe;GACvD,MAAM;IAELE,aAAa,GAAGF,eAAe,GAAGC,kBAAkB;;EAGtD,MAAMG,aAAa,GAAGR,MAAM,CAACS,MAAM,GAAGN,SAAS,CAACM,MAAM,GAAGH,aAAa;EACtE,MAAMI,eAAe,GAAGV,MAAM,CAACW,KAAK,GAAGR,SAAS,CAACQ,KAAK,GAAGJ,eAAe;EAGxE,OAAO;IACLC,aAAa;IACbE,eAAe;IACfE,WAAW,EAAEC,IAAI,CAACC,GAAG,CAACJ,eAAe,EAAEF,aAAa;GACrD;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}