{"ast":null,"code":"// This is used to access the underlying 3D context\nconst GET_UNDERLYING_CONTEXT = '__getUnderlyingContext';\nfunction createContextProxyHandler() {\n  const cache = new Map();\n  const getParameterHandler = {\n    apply(target, gl, args) {\n      if (cache.has(args[0])) {\n        return cache.get(args[0]);\n      }\n      return target.apply(gl, args);\n    }\n  };\n\n  // only supports single-value setters\n  function cachedSetterHandler(key) {\n    return {\n      apply(target, gl, args) {\n        cache.set(key, args[0]);\n        return target.apply(gl, args);\n      }\n    };\n  }\n\n  // When a property is accessed on the webgl context proxy,\n  // it's accessed is intercepted. If the property name matches\n  // any of the keys of `propHandlers`, then that handler is called\n  // with the following arguments: (gl, prop, receiver, propValue)\n  // - gl (WebGL2RenderingContext): the underlying webgl context\n  // - propName (string): the property name\n  // - receiver (Proxy): the webgl context proxy\n  // - propValue (unknown): the value of `gl[propName]`\n\n  const propHandlers = Object.create(null);\n\n  // Sets getParameter(property) as a cached getter proxy.\n  // propValue.bind(gl) is to avoid Illegal Invocation errors.\n  propHandlers.getParameter = (gl, prop, receiver, propValue) => new Proxy(propValue.bind(gl), getParameterHandler);\n\n  // Sets depthMask(flag) as a cached setter proxy.\n  propHandlers.depthMask = (gl, prop, receiver, propValue) => new Proxy(propValue.bind(gl), cachedSetterHandler(gl.DEPTH_WRITEMASK));\n  return {\n    get(gl, prop, receiver) {\n      if (prop === GET_UNDERLYING_CONTEXT) return () => gl;\n      let value = Reflect.get(gl, prop, gl);\n      if (value instanceof Function) {\n        // prevents Illegal Invocation errors\n        value = value.bind(gl);\n      }\n      const propHandler = propHandlers[prop];\n      if (propHandler) {\n        return propHandler(gl, prop, receiver, value);\n      }\n      return value;\n    }\n  };\n}\nvar ContextProxy = {\n  createContextProxyHandler\n};\nexport { GET_UNDERLYING_CONTEXT, createContextProxyHandler, ContextProxy as default };","map":{"version":3,"names":["GET_UNDERLYING_CONTEXT","createContextProxyHandler","cache","Map","getParameterHandler","apply","target","gl","args","has","get","cachedSetterHandler","key","set","propHandlers","Object","create","getParameter","prop","receiver","propValue","Proxy","bind","depthMask","DEPTH_WRITEMASK","value","Reflect","Function","propHandler","ContextProxy","default"],"sources":["/root/vue-cornerstone-demo/node_modules/@kitware/vtk.js/Rendering/OpenGL/RenderWindow/ContextProxy.js"],"sourcesContent":["// This is used to access the underlying 3D context\nconst GET_UNDERLYING_CONTEXT = '__getUnderlyingContext';\nfunction createContextProxyHandler() {\n  const cache = new Map();\n  const getParameterHandler = {\n    apply(target, gl, args) {\n      if (cache.has(args[0])) {\n        return cache.get(args[0]);\n      }\n      return target.apply(gl, args);\n    }\n  };\n\n  // only supports single-value setters\n  function cachedSetterHandler(key) {\n    return {\n      apply(target, gl, args) {\n        cache.set(key, args[0]);\n        return target.apply(gl, args);\n      }\n    };\n  }\n\n  // When a property is accessed on the webgl context proxy,\n  // it's accessed is intercepted. If the property name matches\n  // any of the keys of `propHandlers`, then that handler is called\n  // with the following arguments: (gl, prop, receiver, propValue)\n  // - gl (WebGL2RenderingContext): the underlying webgl context\n  // - propName (string): the property name\n  // - receiver (Proxy): the webgl context proxy\n  // - propValue (unknown): the value of `gl[propName]`\n\n  const propHandlers = Object.create(null);\n\n  // Sets getParameter(property) as a cached getter proxy.\n  // propValue.bind(gl) is to avoid Illegal Invocation errors.\n  propHandlers.getParameter = (gl, prop, receiver, propValue) => new Proxy(propValue.bind(gl), getParameterHandler);\n\n  // Sets depthMask(flag) as a cached setter proxy.\n  propHandlers.depthMask = (gl, prop, receiver, propValue) => new Proxy(propValue.bind(gl), cachedSetterHandler(gl.DEPTH_WRITEMASK));\n  return {\n    get(gl, prop, receiver) {\n      if (prop === GET_UNDERLYING_CONTEXT) return () => gl;\n      let value = Reflect.get(gl, prop, gl);\n      if (value instanceof Function) {\n        // prevents Illegal Invocation errors\n        value = value.bind(gl);\n      }\n      const propHandler = propHandlers[prop];\n      if (propHandler) {\n        return propHandler(gl, prop, receiver, value);\n      }\n      return value;\n    }\n  };\n}\nvar ContextProxy = {\n  createContextProxyHandler\n};\n\nexport { GET_UNDERLYING_CONTEXT, createContextProxyHandler, ContextProxy as default };\n"],"mappings":"AAAA;AACA,MAAMA,sBAAsB,GAAG,wBAAwB;AACvD,SAASC,yBAAyBA,CAAA,EAAG;EACnC,MAAMC,KAAK,GAAG,IAAIC,GAAG,CAAC,CAAC;EACvB,MAAMC,mBAAmB,GAAG;IAC1BC,KAAKA,CAACC,MAAM,EAAEC,EAAE,EAAEC,IAAI,EAAE;MACtB,IAAIN,KAAK,CAACO,GAAG,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;QACtB,OAAON,KAAK,CAACQ,GAAG,CAACF,IAAI,CAAC,CAAC,CAAC,CAAC;MAC3B;MACA,OAAOF,MAAM,CAACD,KAAK,CAACE,EAAE,EAAEC,IAAI,CAAC;IAC/B;EACF,CAAC;;EAED;EACA,SAASG,mBAAmBA,CAACC,GAAG,EAAE;IAChC,OAAO;MACLP,KAAKA,CAACC,MAAM,EAAEC,EAAE,EAAEC,IAAI,EAAE;QACtBN,KAAK,CAACW,GAAG,CAACD,GAAG,EAAEJ,IAAI,CAAC,CAAC,CAAC,CAAC;QACvB,OAAOF,MAAM,CAACD,KAAK,CAACE,EAAE,EAAEC,IAAI,CAAC;MAC/B;IACF,CAAC;EACH;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMM,YAAY,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;;EAExC;EACA;EACAF,YAAY,CAACG,YAAY,GAAG,CAACV,EAAE,EAAEW,IAAI,EAAEC,QAAQ,EAAEC,SAAS,KAAK,IAAIC,KAAK,CAACD,SAAS,CAACE,IAAI,CAACf,EAAE,CAAC,EAAEH,mBAAmB,CAAC;;EAEjH;EACAU,YAAY,CAACS,SAAS,GAAG,CAAChB,EAAE,EAAEW,IAAI,EAAEC,QAAQ,EAAEC,SAAS,KAAK,IAAIC,KAAK,CAACD,SAAS,CAACE,IAAI,CAACf,EAAE,CAAC,EAAEI,mBAAmB,CAACJ,EAAE,CAACiB,eAAe,CAAC,CAAC;EAClI,OAAO;IACLd,GAAGA,CAACH,EAAE,EAAEW,IAAI,EAAEC,QAAQ,EAAE;MACtB,IAAID,IAAI,KAAKlB,sBAAsB,EAAE,OAAO,MAAMO,EAAE;MACpD,IAAIkB,KAAK,GAAGC,OAAO,CAAChB,GAAG,CAACH,EAAE,EAAEW,IAAI,EAAEX,EAAE,CAAC;MACrC,IAAIkB,KAAK,YAAYE,QAAQ,EAAE;QAC7B;QACAF,KAAK,GAAGA,KAAK,CAACH,IAAI,CAACf,EAAE,CAAC;MACxB;MACA,MAAMqB,WAAW,GAAGd,YAAY,CAACI,IAAI,CAAC;MACtC,IAAIU,WAAW,EAAE;QACf,OAAOA,WAAW,CAACrB,EAAE,EAAEW,IAAI,EAAEC,QAAQ,EAAEM,KAAK,CAAC;MAC/C;MACA,OAAOA,KAAK;IACd;EACF,CAAC;AACH;AACA,IAAII,YAAY,GAAG;EACjB5B;AACF,CAAC;AAED,SAASD,sBAAsB,EAAEC,yBAAyB,EAAE4B,YAAY,IAAIC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}