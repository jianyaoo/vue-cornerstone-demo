{"ast":null,"code":"import { ToolGroupManager } from '../../store';\nimport { keyEventListener } from '../../eventListeners';\nimport getMouseModifier from './getMouseModifier';\nexport default function getToolsWithActionsForMouseEvent(evt, toolModes) {\n  const toolsWithActions = new Map();\n  const {\n    renderingEngineId,\n    viewportId\n  } = evt.detail;\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(viewportId, renderingEngineId);\n  if (!toolGroup) {\n    return toolsWithActions;\n  }\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n  const mouseEvent = evt.detail.event;\n  const mouseButton = mouseEvent?.buttons ?? defaultMousePrimary;\n  const modifierKey = getMouseModifier(mouseEvent) || keyEventListener.getModifierKey();\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const tool = toolGroup.getToolInstance(toolName);\n    const actionsConfig = tool.configuration?.actions ?? {};\n    const actions = Object.values(actionsConfig);\n    if (!actions?.length || !toolModes.includes(tool.mode)) {\n      continue;\n    }\n    const action = actions.find(action => action.bindings.length && action.bindings.some(binding => binding.mouseButton === mouseButton && binding.modifierKey === modifierKey));\n    if (action) {\n      toolsWithActions.set(tool, action);\n    }\n  }\n  return toolsWithActions;\n}","map":{"version":3,"names":["ToolGroupManager","keyEventListener","getMouseModifier","getToolsWithActionsForMouseEvent","evt","toolModes","toolsWithActions","Map","renderingEngineId","viewportId","detail","toolGroup","getToolGroupForViewport","toolGroupToolNames","Object","keys","toolOptions","defaultMousePrimary","getDefaultMousePrimary","mouseEvent","event","mouseButton","buttons","modifierKey","getModifierKey","j","length","toolName","tool","getToolInstance","actionsConfig","configuration","actions","values","includes","mode","action","find","bindings","some","binding","set"],"sources":["../../../../src/eventDispatchers/shared/getToolsWithActionsForMouseEvent.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,aAAa;AAI9C,SAASC,gBAAgB,QAAQ,sBAAsB;AACvD,OAAOC,gBAAgB,MAAM,oBAAoB;AAWjD,eAAc,SAAUC,gCAAgCA,CACtDC,GAAkC,EAClCC,SAAsB;EAEtB,MAAMC,gBAAgB,GAAG,IAAIC,GAAG,EAAE;EAClC,MAAM;IAAEC,iBAAiB;IAAEC;EAAU,CAAE,GAAGL,GAAG,CAACM,MAAM;EACpD,MAAMC,SAAS,GAAGX,gBAAgB,CAACY,uBAAuB,CACxDH,UAAU,EACVD,iBAAiB,CAClB;EAED,IAAI,CAACG,SAAS,EAAE;IACd,OAAOL,gBAAgB;;EAGzB,MAAMO,kBAAkB,GAAGC,MAAM,CAACC,IAAI,CAACJ,SAAS,CAACK,WAAW,CAAC;EAC7D,MAAMC,mBAAmB,GAAGN,SAAS,CAACO,sBAAsB,EAAE;EAC9D,MAAMC,UAAU,GAAGf,GAAG,CAACM,MAAM,CAACU,KAAK;EACnC,MAAMC,WAAW,GAAGF,UAAU,EAAEG,OAAO,IAAIL,mBAAmB;EAC9D,MAAMM,WAAW,GACfrB,gBAAgB,CAACiB,UAAU,CAAC,IAAIlB,gBAAgB,CAACuB,cAAc,EAAE;EAEnE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGZ,kBAAkB,CAACa,MAAM,EAAED,CAAC,EAAE,EAAE;IAClD,MAAME,QAAQ,GAAGd,kBAAkB,CAACY,CAAC,CAAC;IACtC,MAAMG,IAAI,GAAGjB,SAAS,CAACkB,eAAe,CAACF,QAAQ,CAAC;IAChD,MAAMG,aAAa,GAAGF,IAAI,CAACG,aAAa,EAAEC,OAAO,IAAI,EAAE;IACvD,MAAMA,OAAO,GAAGlB,MAAM,CAACmB,MAAM,CAACH,aAAa,CAAC;IAE5C,IAAI,CAACE,OAAO,EAAEN,MAAM,IAAI,CAACrB,SAAS,CAAC6B,QAAQ,CAACN,IAAI,CAACO,IAAI,CAAC,EAAE;MACtD;;IAGF,MAAMC,MAAM,GAAGJ,OAAO,CAACK,IAAI,CACxBD,MAAW,IACVA,MAAM,CAACE,QAAQ,CAACZ,MAAM,IACtBU,MAAM,CAACE,QAAQ,CAACC,IAAI,CACjBC,OAAO,IACNA,OAAO,CAACnB,WAAW,KAAKA,WAAW,IACnCmB,OAAO,CAACjB,WAAW,KAAKA,WAAW,CACtC,CACJ;IAED,IAAIa,MAAM,EAAE;MACV9B,gBAAgB,CAACmC,GAAG,CAACb,IAAI,EAAEQ,MAAM,CAAC;;;EAItC,OAAO9B,gBAAgB;AACzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}