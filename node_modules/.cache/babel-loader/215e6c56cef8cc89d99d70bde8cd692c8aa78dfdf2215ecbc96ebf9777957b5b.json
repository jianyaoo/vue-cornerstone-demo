{"ast":null,"code":"import StrategyCallbacks from '../../../../enums/StrategyCallbacks';\nexport default {\n  [StrategyCallbacks.INTERNAL_setValue]: (operationData, {\n    value,\n    index\n  }) => {\n    const {\n      segmentsLocked,\n      segmentIndex,\n      previewVoxelManager: previewVoxelManager,\n      previewSegmentIndex,\n      segmentationVoxelManager: segmentationVoxelManager\n    } = operationData;\n    const existingValue = segmentationVoxelManager.getAtIndex(index);\n    if (segmentIndex === null) {\n      const oldValue = previewVoxelManager.getAtIndex(index);\n      if (oldValue !== undefined) {\n        previewVoxelManager.setAtIndex(index, oldValue);\n      }\n      return;\n    }\n    if (existingValue === segmentIndex || segmentsLocked.includes(value)) {\n      return;\n    }\n    if (existingValue === previewSegmentIndex) {\n      if (previewVoxelManager.getAtIndex(index) === undefined) {\n        segmentationVoxelManager.setAtIndex(index, segmentIndex);\n      } else {\n        return;\n      }\n    }\n    const useSegmentIndex = previewSegmentIndex ?? segmentIndex;\n    previewVoxelManager.setAtIndex(index, useSegmentIndex);\n  }\n};","map":{"version":3,"names":["StrategyCallbacks","INTERNAL_setValue","operationData","value","index","segmentsLocked","segmentIndex","previewVoxelManager","previewSegmentIndex","segmentationVoxelManager","existingValue","getAtIndex","oldValue","undefined","setAtIndex","includes","useSegmentIndex"],"sources":["../../../../../../src/tools/segmentation/strategies/compositions/setValue.ts"],"sourcesContent":[null],"mappings":"AACA,OAAOA,iBAAiB,MAAM,qCAAqC;AASnE,eAAe;EACb,CAACA,iBAAiB,CAACC,iBAAiB,GAAG,CACrCC,aAAuC,EACvC;IAAEC,KAAK;IAAEC;EAAK,CAAE,KACd;IACF,MAAM;MACJC,cAAc;MACdC,YAAY;MACZC,mBAAmB,EAAEA,mBAAmB;MACxCC,mBAAmB;MACnBC,wBAAwB,EAAEA;IAAwB,CACnD,GAAGP,aAAa;IACjB,MAAMQ,aAAa,GAAGD,wBAAwB,CAACE,UAAU,CAACP,KAAK,CAAC;IAChE,IAAIE,YAAY,KAAK,IAAI,EAAE;MACzB,MAAMM,QAAQ,GAAGL,mBAAmB,CAACI,UAAU,CAACP,KAAK,CAAC;MACtD,IAAIQ,QAAQ,KAAKC,SAAS,EAAE;QAC1BN,mBAAmB,CAACO,UAAU,CAACV,KAAK,EAAEQ,QAAQ,CAAC;;MAEjD;;IAGF,IAAIF,aAAa,KAAKJ,YAAY,IAAID,cAAc,CAACU,QAAQ,CAACZ,KAAK,CAAC,EAAE;MACpE;;IAGF,IAAIO,aAAa,KAAKF,mBAAmB,EAAE;MACzC,IAAID,mBAAmB,CAACI,UAAU,CAACP,KAAK,CAAC,KAAKS,SAAS,EAAE;QAEvDJ,wBAAwB,CAACK,UAAU,CAACV,KAAK,EAAEE,YAAY,CAAC;OACzD,MAAM;QACL;;;IAKJ,MAAMU,eAAe,GAAGR,mBAAmB,IAAIF,YAAY;IAE3DC,mBAAmB,CAACO,UAAU,CAACV,KAAK,EAAEY,eAAe,CAAC;EACxD;CACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}