{"ast":null,"code":"import { vec2 } from 'gl-matrix';\nimport { utilities as csUtils } from '@cornerstonejs/core';\nimport { isRangeValid, areColorbarRangesEqual } from './common';\nimport { ColorbarRangeTextPosition } from './enums/ColorbarRangeTextPosition';\nimport { ColorbarCanvas } from './ColorbarCanvas';\nimport { ColorbarTicks } from './ColorbarTicks';\nimport isRangeTextPositionValid from './common/isRangeTextPositionValid';\nimport Widget from '../../../widgets/Widget';\nconst DEFAULTS = {\n  MULTIPLIER: 1,\n  RANGE_TEXT_POSITION: ColorbarRangeTextPosition.Right,\n  TICKS_BAR_SIZE: 50\n};\nclass Colorbar extends Widget {\n  constructor(props) {\n    super(props);\n    this._isMouseOver = false;\n    this._isInteracting = false;\n    this._mouseOverCallback = evt => {\n      this._isMouseOver = true;\n      this.showTicks();\n      evt.stopPropagation();\n    };\n    this._mouseOutCallback = evt => {\n      this._isMouseOver = false;\n      this.hideTicks();\n      evt.stopPropagation();\n    };\n    this._mouseDownCallback = evt => {\n      this._isInteracting = true;\n      this.showTicks();\n      this._addVOIEventListeners(evt);\n      evt.stopPropagation();\n    };\n    this._mouseDragCallback = (evt, initialState) => {\n      const multipliers = this.getVOIMultipliers();\n      const currentPoints = this._getPointsFromMouseEvent(evt);\n      const {\n        points: startPoints,\n        voiRange: startVOIRange\n      } = initialState;\n      const canvasDelta = vec2.sub(vec2.create(), currentPoints.local, startPoints.local);\n      const wwDelta = canvasDelta[0] * multipliers[0];\n      const wcDelta = canvasDelta[1] * multipliers[1];\n      if (!wwDelta && !wcDelta) {\n        return;\n      }\n      const {\n        lower: voiLower,\n        upper: voiUpper\n      } = startVOIRange;\n      let {\n        windowWidth,\n        windowCenter\n      } = csUtils.windowLevel.toWindowLevel(voiLower, voiUpper);\n      windowWidth = Math.max(windowWidth + wwDelta, 1);\n      windowCenter += wcDelta;\n      const newVoiRange = csUtils.windowLevel.toLowHighRange(windowWidth, windowCenter);\n      this.voiRange = newVoiRange;\n      evt.stopPropagation();\n      evt.preventDefault();\n    };\n    this._mouseUpCallback = evt => {\n      this._isInteracting = false;\n      this.hideTicks();\n      this._removeVOIEventListeners();\n      evt.stopPropagation();\n    };\n    this._eventListenersManager = new csUtils.eventListener.MultiTargetEventListenerManager();\n    this._colormaps = Colorbar.getColormapsMap(props);\n    this._activeColormapName = Colorbar.getInitialColormapName(props);\n    this._canvas = this._createCanvas(props);\n    this._ticksBar = this._createTicksBar(props);\n    this._rangeTextPosition = props.ticks?.position ?? DEFAULTS.RANGE_TEXT_POSITION;\n    this._canvas.appendTo(this.rootElement);\n    this._ticksBar.appendTo(this.rootElement);\n    this._addRootElementEventListeners();\n  }\n  get activeColormapName() {\n    return this._activeColormapName;\n  }\n  set activeColormapName(colormapName) {\n    if (colormapName === this._activeColormapName) {\n      return;\n    }\n    const colormap = this._colormaps.get(colormapName);\n    if (!colormap) {\n      console.warn(`Invalid colormap name (${colormapName})`);\n      return;\n    }\n    this._activeColormapName = colormapName;\n    this._canvas.colormap = colormap;\n  }\n  get imageRange() {\n    return this._canvas.imageRange;\n  }\n  set imageRange(imageRange) {\n    this._canvas.imageRange = imageRange;\n    this._ticksBar.imageRange = imageRange;\n  }\n  get voiRange() {\n    return this._canvas.voiRange;\n  }\n  set voiRange(voiRange) {\n    const {\n      voiRange: currentVoiRange\n    } = this._canvas;\n    if (!isRangeValid(voiRange) || areColorbarRangesEqual(voiRange, currentVoiRange)) {\n      return;\n    }\n    this._canvas.voiRange = voiRange;\n    this._ticksBar.voiRange = voiRange;\n    this.onVoiChange(voiRange);\n  }\n  get showFullImageRange() {\n    return this._canvas.showFullImageRange;\n  }\n  set showFullImageRange(value) {\n    this._canvas.showFullImageRange = value;\n    this._ticksBar.showFullPixelValueRange = value;\n  }\n  destroy() {\n    super.destroy();\n    this._eventListenersManager.reset();\n  }\n  createRootElement() {\n    const rootElement = document.createElement('div');\n    Object.assign(rootElement.style, {\n      position: 'relative',\n      fontSize: '0',\n      width: '100%',\n      height: '100%'\n    });\n    return rootElement;\n  }\n  onContainerResize() {\n    super.onContainerResize();\n    this.updateTicksBar();\n    this._canvas.size = this.containerSize;\n  }\n  getVOIMultipliers() {\n    return [DEFAULTS.MULTIPLIER, DEFAULTS.MULTIPLIER];\n  }\n  onVoiChange(voiRange) {}\n  showTicks() {\n    this.updateTicksBar();\n    this._ticksBar.visible = true;\n  }\n  hideTicks() {\n    if (this._isInteracting || this._isMouseOver) {\n      return;\n    }\n    this._ticksBar.visible = false;\n  }\n  static getColormapsMap(props) {\n    const {\n      colormaps\n    } = props;\n    return colormaps.reduce((items, item) => items.set(item.Name, item), new Map());\n  }\n  static getInitialColormapName(props) {\n    const {\n      activeColormapName,\n      colormaps\n    } = props;\n    const colormapExists = !!activeColormapName && colormaps.some(cm => cm.Name === activeColormapName);\n    return colormapExists ? activeColormapName : colormaps[0].Name;\n  }\n  _createCanvas(props) {\n    const {\n      imageRange,\n      voiRange,\n      showFullPixelValueRange\n    } = props;\n    const colormap = this._colormaps.get(this._activeColormapName);\n    return new ColorbarCanvas({\n      colormap,\n      imageRange,\n      voiRange: voiRange,\n      showFullPixelValueRange\n    });\n  }\n  _createTicksBar(props) {\n    const ticksProps = props.ticks;\n    return new ColorbarTicks({\n      imageRange: props.imageRange,\n      voiRange: props.voiRange,\n      ticks: ticksProps,\n      showFullPixelValueRange: props.showFullPixelValueRange\n    });\n  }\n  _getPointsFromMouseEvent(evt) {\n    const {\n      rootElement: element\n    } = this;\n    const clientPoint = [evt.clientX, evt.clientY];\n    const pagePoint = [evt.pageX, evt.pageY];\n    const rect = element.getBoundingClientRect();\n    const localPoints = [pagePoint[0] - rect.left - window.pageXOffset, pagePoint[1] - rect.top - window.pageYOffset];\n    return {\n      client: clientPoint,\n      page: pagePoint,\n      local: localPoints\n    };\n  }\n  updateTicksBar() {\n    const {\n      width: containerWidth,\n      height: containerHeight\n    } = this.containerSize;\n    if (containerWidth === 0 && containerHeight === 0) {\n      return;\n    }\n    const {\n      _ticksBar: ticksBar,\n      _rangeTextPosition: rangeTextPosition\n    } = this;\n    const isHorizontal = containerWidth >= containerHeight;\n    const width = isHorizontal ? containerWidth : DEFAULTS.TICKS_BAR_SIZE;\n    const height = isHorizontal ? DEFAULTS.TICKS_BAR_SIZE : containerHeight;\n    if (!isRangeTextPositionValid(containerWidth, containerHeight, rangeTextPosition)) {\n      throw new Error('Invalid rangeTextPosition value for the current colobar orientation');\n    }\n    let ticksBarTop;\n    let ticksBarLeft;\n    ticksBar.size = {\n      width,\n      height\n    };\n    if (isHorizontal) {\n      ticksBarLeft = 0;\n      ticksBarTop = rangeTextPosition === ColorbarRangeTextPosition.Top ? -height : containerHeight;\n    } else {\n      ticksBarTop = 0;\n      ticksBarLeft = rangeTextPosition === ColorbarRangeTextPosition.Left ? -width : containerWidth;\n    }\n    ticksBar.top = ticksBarTop;\n    ticksBar.left = ticksBarLeft;\n  }\n  _addRootElementEventListeners() {\n    const {\n      _eventListenersManager: manager\n    } = this;\n    const {\n      rootElement: element\n    } = this;\n    manager.addEventListener(element, 'mouseover', this._mouseOverCallback);\n    manager.addEventListener(element, 'mouseout', this._mouseOutCallback);\n    manager.addEventListener(element, 'mousedown', this._mouseDownCallback);\n  }\n  _addVOIEventListeners(evt) {\n    const {\n      _eventListenersManager: manager\n    } = this;\n    const points = this._getPointsFromMouseEvent(evt);\n    const voiRange = {\n      ...this._canvas.voiRange\n    };\n    const initialDragState = {\n      points,\n      voiRange\n    };\n    this._removeVOIEventListeners();\n    manager.addEventListener(document, 'voi.mouseup', this._mouseUpCallback);\n    manager.addEventListener(document, 'voi.mousemove', evt => this._mouseDragCallback(evt, initialDragState));\n  }\n  _removeVOIEventListeners() {\n    const {\n      _eventListenersManager: manager\n    } = this;\n    manager.removeEventListener(document, 'voi.mouseup');\n    manager.removeEventListener(document, 'voi.mousemove');\n  }\n}\nexport { Colorbar as default, Colorbar };","map":{"version":3,"names":["vec2","utilities","csUtils","isRangeValid","areColorbarRangesEqual","ColorbarRangeTextPosition","ColorbarCanvas","ColorbarTicks","isRangeTextPositionValid","Widget","DEFAULTS","MULTIPLIER","RANGE_TEXT_POSITION","Right","TICKS_BAR_SIZE","Colorbar","constructor","props","_isMouseOver","_isInteracting","_mouseOverCallback","evt","showTicks","stopPropagation","_mouseOutCallback","hideTicks","_mouseDownCallback","_addVOIEventListeners","_mouseDragCallback","initialState","multipliers","getVOIMultipliers","currentPoints","_getPointsFromMouseEvent","points","startPoints","voiRange","startVOIRange","canvasDelta","sub","create","local","wwDelta","wcDelta","lower","voiLower","upper","voiUpper","windowWidth","windowCenter","windowLevel","toWindowLevel","Math","max","newVoiRange","toLowHighRange","preventDefault","_mouseUpCallback","_removeVOIEventListeners","_eventListenersManager","eventListener","MultiTargetEventListenerManager","_colormaps","getColormapsMap","_activeColormapName","getInitialColormapName","_canvas","_createCanvas","_ticksBar","_createTicksBar","_rangeTextPosition","ticks","position","appendTo","rootElement","_addRootElementEventListeners","activeColormapName","colormapName","colormap","get","console","warn","imageRange","currentVoiRange","onVoiChange","showFullImageRange","value","showFullPixelValueRange","destroy","reset","createRootElement","document","createElement","Object","assign","style","fontSize","width","height","onContainerResize","updateTicksBar","size","containerSize","visible","colormaps","reduce","items","item","set","Name","Map","colormapExists","some","cm","ticksProps","element","clientPoint","clientX","clientY","pagePoint","pageX","pageY","rect","getBoundingClientRect","localPoints","left","window","pageXOffset","top","pageYOffset","client","page","containerWidth","containerHeight","ticksBar","rangeTextPosition","isHorizontal","Error","ticksBarTop","ticksBarLeft","Top","Left","manager","addEventListener","initialDragState","removeEventListener","default"],"sources":["../../../../../src/utilities/voi/colorbar/Colorbar.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}