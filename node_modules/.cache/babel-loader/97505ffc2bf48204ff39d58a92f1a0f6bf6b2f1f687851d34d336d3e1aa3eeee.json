{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport { mat4, mat3 } from 'gl-matrix';\nimport { n as newInstance$1, o as obj, e as setGet } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLVolume methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLVolume(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLVolume');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (!model.renderable || !model.renderable.getVisibility()) {\n      return;\n    }\n    if (prepass) {\n      model._openGLRenderWindow = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderWindow');\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model.context = model._openGLRenderWindow.getContext();\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.renderable.getMapper());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      renderPass.incrementVolumeCount();\n    }\n  };\n  publicAPI.traverseVolumePass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.children[0].traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n\n  // Renders myself\n  publicAPI.volumePass = prepass => {\n    if (!model.renderable || !model.renderable.getVisibility()) {\n      return;\n    }\n    model.context.depthMask(!prepass);\n  };\n  publicAPI.getKeyMatrices = () => {\n    // has the actor changed?\n    if (model.renderable.getMTime() > model.keyMatrixTime.getMTime()) {\n      model.renderable.computeMatrix();\n      mat4.copy(model.MCWCMatrix, model.renderable.getMatrix());\n      mat4.transpose(model.MCWCMatrix, model.MCWCMatrix);\n      if (model.renderable.getIsIdentity()) {\n        mat3.identity(model.normalMatrix);\n      } else {\n        mat3.fromMat4(model.normalMatrix, model.MCWCMatrix);\n        mat3.invert(model.normalMatrix, model.normalMatrix);\n        mat3.transpose(model.normalMatrix, model.normalMatrix);\n      }\n      model.keyMatrixTime.modified();\n    }\n    return {\n      mcwc: model.MCWCMatrix,\n      normalMatrix: model.normalMatrix\n    };\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // context: null,\n  // keyMatrixTime: null,\n  // normalMatrix: null,\n  // MCWCMatrix: null,\n  // _openGLRenderWindow: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatrixTime = {};\n  obj(model.keyMatrixTime, {\n    mtime: 0\n  });\n  // always set by getter\n  model.normalMatrix = new Float64Array(9);\n  model.MCWCMatrix = new Float64Array(16);\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n\n  // Object methods\n  vtkOpenGLVolume(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLVolume');\n\n// ----------------------------------------------------------------------------\n\nvar vtkVolume = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkVolume', newInstance);\nexport { vtkVolume as default, extend, newInstance };","map":{"version":3,"names":["mat4","mat3","n","newInstance$1","o","obj","e","setGet","vtkViewNode","registerOverride","vtkOpenGLVolume","publicAPI","model","classHierarchy","push","buildPass","prepass","renderable","getVisibility","_openGLRenderWindow","getFirstAncestorOfType","_openGLRenderer","context","getContext","prepareNodes","addMissingNode","getMapper","removeUnusedNodes","queryPass","renderPass","incrementVolumeCount","traverseVolumePass","getNestedVisibility","getSelector","getNestedPickable","apply","children","traverse","volumePass","depthMask","getKeyMatrices","getMTime","keyMatrixTime","computeMatrix","copy","MCWCMatrix","getMatrix","transpose","getIsIdentity","identity","normalMatrix","fromMat4","invert","modified","mcwc","DEFAULT_VALUES","extend","initialValues","arguments","length","undefined","Object","assign","mtime","Float64Array","newInstance","vtkVolume","default"],"sources":["/root/vue-cornerstone-demo/node_modules/@kitware/vtk.js/Rendering/OpenGL/Volume.js"],"sourcesContent":["import { mat4, mat3 } from 'gl-matrix';\nimport { n as newInstance$1, o as obj, e as setGet } from '../../macros2.js';\nimport vtkViewNode from '../SceneGraph/ViewNode.js';\nimport { registerOverride } from './ViewNodeFactory.js';\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLVolume methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLVolume(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLVolume');\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (!model.renderable || !model.renderable.getVisibility()) {\n      return;\n    }\n    if (prepass) {\n      model._openGLRenderWindow = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderWindow');\n      model._openGLRenderer = publicAPI.getFirstAncestorOfType('vtkOpenGLRenderer');\n      model.context = model._openGLRenderWindow.getContext();\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNode(model.renderable.getMapper());\n      publicAPI.removeUnusedNodes();\n    }\n  };\n  publicAPI.queryPass = (prepass, renderPass) => {\n    if (prepass) {\n      if (!model.renderable || !model.renderable.getVisibility()) {\n        return;\n      }\n      renderPass.incrementVolumeCount();\n    }\n  };\n  publicAPI.traverseVolumePass = renderPass => {\n    if (!model.renderable || !model.renderable.getNestedVisibility() || model._openGLRenderer.getSelector() && !model.renderable.getNestedPickable()) {\n      return;\n    }\n    publicAPI.apply(renderPass, true);\n    model.children[0].traverse(renderPass);\n    publicAPI.apply(renderPass, false);\n  };\n\n  // Renders myself\n  publicAPI.volumePass = prepass => {\n    if (!model.renderable || !model.renderable.getVisibility()) {\n      return;\n    }\n    model.context.depthMask(!prepass);\n  };\n  publicAPI.getKeyMatrices = () => {\n    // has the actor changed?\n    if (model.renderable.getMTime() > model.keyMatrixTime.getMTime()) {\n      model.renderable.computeMatrix();\n      mat4.copy(model.MCWCMatrix, model.renderable.getMatrix());\n      mat4.transpose(model.MCWCMatrix, model.MCWCMatrix);\n      if (model.renderable.getIsIdentity()) {\n        mat3.identity(model.normalMatrix);\n      } else {\n        mat3.fromMat4(model.normalMatrix, model.MCWCMatrix);\n        mat3.invert(model.normalMatrix, model.normalMatrix);\n        mat3.transpose(model.normalMatrix, model.normalMatrix);\n      }\n      model.keyMatrixTime.modified();\n    }\n    return {\n      mcwc: model.MCWCMatrix,\n      normalMatrix: model.normalMatrix\n    };\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // context: null,\n  // keyMatrixTime: null,\n  // normalMatrix: null,\n  // MCWCMatrix: null,\n  // _openGLRenderWindow: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n  model.keyMatrixTime = {};\n  obj(model.keyMatrixTime, {\n    mtime: 0\n  });\n  // always set by getter\n  model.normalMatrix = new Float64Array(9);\n  model.MCWCMatrix = new Float64Array(16);\n\n  // Build VTK API\n  setGet(publicAPI, model, ['context']);\n\n  // Object methods\n  vtkOpenGLVolume(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkOpenGLVolume');\n\n// ----------------------------------------------------------------------------\n\nvar vtkVolume = {\n  newInstance,\n  extend\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkVolume', newInstance);\n\nexport { vtkVolume as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}