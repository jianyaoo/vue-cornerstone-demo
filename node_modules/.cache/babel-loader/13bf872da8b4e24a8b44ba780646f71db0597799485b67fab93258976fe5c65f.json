{"ast":null,"code":"import vtkColorTransferFunction from '@kitware/vtk.js/Rendering/Core/ColorTransferFunction';\nimport vtkDataArray from '@kitware/vtk.js/Common/Core/DataArray';\nimport * as windowLevelUtil from './windowLevel';\nexport default function createSigmoidRGBTransferFunction(voiRange, approximationNodes = 1024) {\n  const {\n    windowWidth,\n    windowCenter\n  } = windowLevelUtil.toWindowLevel(voiRange.lower, voiRange.upper);\n  const sigmoid = (x, wc, ww) => {\n    return 1 / (1 + Math.exp(-4 * (x - wc) / ww));\n  };\n  const logit = (y, wc, ww) => {\n    return wc - ww / 4 * Math.log((1 - y) / y);\n  };\n  const range = [...Array(approximationNodes + 2).keys()].map(v => v / (approximationNodes + 2)).slice(1, -1);\n  const table = range.reduce((res, y) => {\n    const x = logit(y, windowCenter, windowWidth);\n    return res.concat(x, y, y, y, 0.5, 0.0);\n  }, []);\n  const cfun = vtkColorTransferFunction.newInstance();\n  cfun.buildFunctionFromArray(vtkDataArray.newInstance({\n    values: table,\n    numberOfComponents: 6\n  }));\n  return cfun;\n}","map":{"version":3,"names":["vtkColorTransferFunction","vtkDataArray","windowLevelUtil","createSigmoidRGBTransferFunction","voiRange","approximationNodes","windowWidth","windowCenter","toWindowLevel","lower","upper","sigmoid","x","wc","ww","Math","exp","logit","y","log","range","Array","keys","map","v","slice","table","reduce","res","concat","cfun","newInstance","buildFunctionFromArray","values","numberOfComponents"],"sources":["../../../src/utilities/createSigmoidRGBTransferFunction.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,wBAAwB,MAAM,sDAAsD;AAC3F,OAAOC,YAAY,MAAM,uCAAuC;AAEhE,OAAO,KAAKC,eAAe,MAAM,eAAe;AAoBhD,eAAc,SAAUC,gCAAgCA,CACtDC,QAAkB,EAClBC,kBAAkB,GAAG,IAAI;EAEzB,MAAM;IAAEC,WAAW;IAAEC;EAAY,CAAE,GAAGL,eAAe,CAACM,aAAa,CACjEJ,QAAQ,CAACK,KAAK,EACdL,QAAQ,CAACM,KAAK,CACf;EAID,MAAMC,OAAO,GAAGA,CAACC,CAAS,EAAEC,EAAU,EAAEC,EAAU,KAAI;IACpD,OAAO,CAAC,IAAI,CAAC,GAAGC,IAAI,CAACC,GAAG,CAAE,CAAC,CAAC,IAAIJ,CAAC,GAAGC,EAAE,CAAC,GAAIC,EAAE,CAAC,CAAC;EACjD,CAAC;EAQD,MAAMG,KAAK,GAAGA,CAACC,CAAS,EAAEL,EAAU,EAAEC,EAAU,KAAI;IAClD,OAAOD,EAAE,GAAIC,EAAE,GAAG,CAAC,GAAIC,IAAI,CAACI,GAAG,CAAC,CAAC,CAAC,GAAGD,CAAC,IAAIA,CAAC,CAAC;EAC9C,CAAC;EAGD,MAAME,KAAK,GAAG,CAAC,GAAGC,KAAK,CAAChB,kBAAkB,GAAG,CAAC,CAAC,CAACiB,IAAI,EAAE,CAAC,CACpDC,GAAG,CAAEC,CAAC,IAAKA,CAAC,IAAInB,kBAAkB,GAAG,CAAC,CAAC,CAAC,CACxCoB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACf,MAAMC,KAAK,GAAGN,KAAK,CAACO,MAAM,CAAC,CAACC,GAAG,EAAEV,CAAC,KAAI;IACpC,MAAMN,CAAC,GAAGK,KAAK,CAACC,CAAC,EAAEX,YAAY,EAAED,WAAW,CAAC;IAC7C,OAAOsB,GAAG,CAACC,MAAM,CAACjB,CAAC,EAAEM,CAAC,EAAEA,CAAC,EAAEA,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;EACzC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,IAAI,GAAG9B,wBAAwB,CAAC+B,WAAW,EAAE;EACnDD,IAAI,CAACE,sBAAsB,CACzB/B,YAAY,CAAC8B,WAAW,CAAC;IAAEE,MAAM,EAAEP,KAAK;IAAEQ,kBAAkB,EAAE;EAAC,CAAE,CAAC,CACnE;EACD,OAAOJ,IAAI;AACb"},"metadata":{},"sourceType":"module","externalDependencies":[]}