{"ast":null,"code":"import { eventTarget, triggerEvent } from '@cornerstonejs/core';\nimport { Events } from '../../enums';\nimport { getAnnotation } from './annotationState';\nconst selectedAnnotationUIDs = new Set();\nfunction setAnnotationSelected(annotationUID, selected = true, preserveSelected = false) {\n  if (selected) {\n    selectAnnotation(annotationUID, preserveSelected);\n  } else {\n    deselectAnnotation(annotationUID);\n  }\n}\nfunction selectAnnotation(annotationUID, preserveSelected = false) {\n  const detail = makeEventDetail();\n  if (!preserveSelected) {\n    clearSelectionSet(selectedAnnotationUIDs, detail);\n  }\n  if (annotationUID && !selectedAnnotationUIDs.has(annotationUID)) {\n    selectedAnnotationUIDs.add(annotationUID);\n    detail.added.push(annotationUID);\n  }\n  publish(detail, selectedAnnotationUIDs);\n}\nfunction deselectAnnotation(annotationUID) {\n  const detail = makeEventDetail();\n  if (annotationUID) {\n    if (selectedAnnotationUIDs.delete(annotationUID)) {\n      detail.removed.push(annotationUID);\n    }\n  } else {\n    clearSelectionSet(selectedAnnotationUIDs, detail);\n  }\n  publish(detail, selectedAnnotationUIDs);\n}\nfunction getAnnotationsSelected() {\n  return Array.from(selectedAnnotationUIDs);\n}\nfunction getAnnotationsSelectedByToolName(toolName) {\n  return getAnnotationsSelected().filter(annotationUID => {\n    const annotation = getAnnotation(annotationUID);\n    return annotation.metadata.toolName === toolName;\n  });\n}\nfunction isAnnotationSelected(annotationUID) {\n  return selectedAnnotationUIDs.has(annotationUID);\n}\nfunction getAnnotationsSelectedCount() {\n  return selectedAnnotationUIDs.size;\n}\nfunction makeEventDetail() {\n  return Object.freeze({\n    added: [],\n    removed: [],\n    selection: []\n  });\n}\nfunction clearSelectionSet(selectionSet, detail) {\n  selectionSet.forEach(value => {\n    if (selectionSet.delete(value)) {\n      detail.removed.push(value);\n    }\n  });\n}\nfunction publish(detail, selectionSet) {\n  if (detail.added.length > 0 || detail.removed.length > 0) {\n    selectionSet.forEach(item => void detail.selection.push(item));\n    triggerEvent(eventTarget, Events.ANNOTATION_SELECTION_CHANGE, detail);\n  }\n}\nexport { setAnnotationSelected, getAnnotationsSelected, getAnnotationsSelectedByToolName, getAnnotationsSelectedCount, deselectAnnotation, isAnnotationSelected };","map":{"version":3,"names":["eventTarget","triggerEvent","Events","getAnnotation","selectedAnnotationUIDs","Set","setAnnotationSelected","annotationUID","selected","preserveSelected","selectAnnotation","deselectAnnotation","detail","makeEventDetail","clearSelectionSet","has","add","added","push","publish","delete","removed","getAnnotationsSelected","Array","from","getAnnotationsSelectedByToolName","toolName","filter","annotation","metadata","isAnnotationSelected","getAnnotationsSelectedCount","size","Object","freeze","selection","selectionSet","forEach","value","length","item","ANNOTATION_SELECTION_CHANGE"],"sources":["../../../../src/stateManagement/annotation/annotationSelection.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}