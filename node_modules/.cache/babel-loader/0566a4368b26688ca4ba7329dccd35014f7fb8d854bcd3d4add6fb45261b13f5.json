{"ast":null,"code":"import { getToolGroup } from '../../store/ToolGroupManager';\nimport triggerAnnotationRenderForViewportIds from '../triggerAnnotationRenderForViewportIds';\nimport { getRenderingEngine } from '@cornerstonejs/core';\nimport getBrushToolInstances from './utilities';\nexport function setBrushThresholdForToolGroup(toolGroupId, threshold, otherArgs = {\n  isDynamic: false\n}) {\n  const toolGroup = getToolGroup(toolGroupId);\n  if (toolGroup === undefined) {\n    return;\n  }\n  const brushBasedToolInstances = getBrushToolInstances(toolGroupId);\n  const configuration = {\n    ...otherArgs,\n    ...(threshold !== undefined && {\n      threshold\n    })\n  };\n  brushBasedToolInstances.forEach(tool => {\n    tool.configuration.strategySpecificConfiguration.THRESHOLD = {\n      ...tool.configuration.strategySpecificConfiguration.THRESHOLD,\n      ...configuration\n    };\n  });\n  const viewportsInfo = toolGroup.getViewportsInfo();\n  if (!viewportsInfo.length) {\n    return;\n  }\n  const {\n    renderingEngineId\n  } = viewportsInfo[0];\n  const viewportIds = toolGroup.getViewportIds();\n  const renderingEngine = getRenderingEngine(renderingEngineId);\n  triggerAnnotationRenderForViewportIds(renderingEngine, viewportIds);\n}\nexport function getBrushThresholdForToolGroup(toolGroupId) {\n  const toolGroup = getToolGroup(toolGroupId);\n  if (toolGroup === undefined) {\n    return;\n  }\n  const toolInstances = toolGroup._toolInstances;\n  if (!Object.keys(toolInstances).length) {\n    return;\n  }\n  const brushBasedToolInstances = getBrushToolInstances(toolGroupId);\n  const brushToolInstance = brushBasedToolInstances[0];\n  if (!brushToolInstance) {\n    return;\n  }\n  return brushToolInstance.configuration.strategySpecificConfiguration.THRESHOLD.threshold;\n}","map":{"version":3,"names":["getToolGroup","triggerAnnotationRenderForViewportIds","getRenderingEngine","getBrushToolInstances","setBrushThresholdForToolGroup","toolGroupId","threshold","otherArgs","isDynamic","toolGroup","undefined","brushBasedToolInstances","configuration","forEach","tool","strategySpecificConfiguration","THRESHOLD","viewportsInfo","getViewportsInfo","length","renderingEngineId","viewportIds","getViewportIds","renderingEngine","getBrushThresholdForToolGroup","toolInstances","_toolInstances","Object","keys","brushToolInstance"],"sources":["../../../../src/utilities/segmentation/brushThresholdForToolGroup.ts"],"sourcesContent":[null],"mappings":"AACA,SAASA,YAAY,QAAQ,8BAA8B;AAC3D,OAAOC,qCAAqC,MAAM,0CAA0C;AAC5F,SAASC,kBAAkB,QAAQ,qBAAqB;AACxD,OAAOC,qBAAqB,MAAM,aAAa;AAE/C,OAAM,SAAUC,6BAA6BA,CAC3CC,WAAmB,EACnBC,SAAuB,EACvBC,SAAA,GAAqC;EAAEC,SAAS,EAAE;AAAK,CAAE;EAEzD,MAAMC,SAAS,GAAGT,YAAY,CAACK,WAAW,CAAC;EAE3C,IAAII,SAAS,KAAKC,SAAS,EAAE;IAC3B;;EAGF,MAAMC,uBAAuB,GAAGR,qBAAqB,CAACE,WAAW,CAAC;EAClE,MAAMO,aAAa,GAAG;IACpB,GAAGL,SAAS;IACZ,IAAID,SAAS,KAAKI,SAAS,IAAI;MAAEJ;IAAS,CAAE;GAC7C;EAEDK,uBAAuB,CAACE,OAAO,CAAEC,IAAI,IAAI;IACvCA,IAAI,CAACF,aAAa,CAACG,6BAA6B,CAACC,SAAS,GAAG;MAC3D,GAAGF,IAAI,CAACF,aAAa,CAACG,6BAA6B,CAACC,SAAS;MAC7D,GAAGJ;KACJ;EACH,CAAC,CAAC;EAGF,MAAMK,aAAa,GAAGR,SAAS,CAACS,gBAAgB,EAAE;EAElD,IAAI,CAACD,aAAa,CAACE,MAAM,EAAE;IACzB;;EAGF,MAAM;IAAEC;EAAiB,CAAE,GAAGH,aAAa,CAAC,CAAC,CAAC;EAI9C,MAAMI,WAAW,GAAGZ,SAAS,CAACa,cAAc,EAAE;EAE9C,MAAMC,eAAe,GAAGrB,kBAAkB,CAACkB,iBAAiB,CAAC;EAE7DnB,qCAAqC,CAACsB,eAAe,EAAEF,WAAW,CAAC;AACrE;AAEA,OAAM,SAAUG,6BAA6BA,CAACnB,WAAmB;EAC/D,MAAMI,SAAS,GAAGT,YAAY,CAACK,WAAW,CAAC;EAE3C,IAAII,SAAS,KAAKC,SAAS,EAAE;IAC3B;;EAGF,MAAMe,aAAa,GAAGhB,SAAS,CAACiB,cAAc;EAE9C,IAAI,CAACC,MAAM,CAACC,IAAI,CAACH,aAAa,CAAC,CAACN,MAAM,EAAE;IACtC;;EAGF,MAAMR,uBAAuB,GAAGR,qBAAqB,CAACE,WAAW,CAAC;EAClE,MAAMwB,iBAAiB,GAAGlB,uBAAuB,CAAC,CAAC,CAAC;EAEpD,IAAI,CAACkB,iBAAiB,EAAE;IACtB;;EAIF,OAAOA,iBAAiB,CAACjB,aAAa,CAACG,6BAA6B,CAACC,SAAS,CAC3EV,SAAS;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}