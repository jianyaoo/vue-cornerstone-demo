{"ast":null,"code":"import { getEnabledElement, triggerEvent, eventTarget, getEnabledElementByIds } from '@cornerstonejs/core';\nimport { Events } from '../../../enums';\nimport { getToolGroupsWithToolName } from '../../../store/ToolGroupManager';\nfunction triggerAnnotationAddedForElement(annotation, element) {\n  const enabledElement = getEnabledElement(element);\n  const {\n    renderingEngine,\n    viewportId\n  } = enabledElement;\n  const eventType = Events.ANNOTATION_ADDED;\n  const eventDetail = {\n    annotation,\n    viewportId,\n    renderingEngineId: renderingEngine.id\n  };\n  triggerEvent(eventTarget, eventType, eventDetail);\n}\nfunction triggerAnnotationAddedForFOR(annotation) {\n  const {\n    toolName\n  } = annotation.metadata;\n  const toolGroups = getToolGroupsWithToolName(toolName);\n  if (!toolGroups.length) {\n    return;\n  }\n  const viewportsToRender = [];\n  toolGroups.forEach(toolGroup => {\n    toolGroup.viewportsInfo.forEach(viewportInfo => {\n      const {\n        renderingEngineId,\n        viewportId\n      } = viewportInfo;\n      const {\n        FrameOfReferenceUID\n      } = getEnabledElementByIds(viewportId, renderingEngineId);\n      if (annotation.metadata.FrameOfReferenceUID === FrameOfReferenceUID) {\n        viewportsToRender.push(viewportInfo);\n      }\n    });\n  });\n  const eventType = Events.ANNOTATION_ADDED;\n  const eventDetail = {\n    annotation\n  };\n  if (!viewportsToRender.length) {\n    triggerEvent(eventTarget, eventType, eventDetail);\n    return;\n  }\n  viewportsToRender.forEach(({\n    renderingEngineId,\n    viewportId\n  }) => {\n    eventDetail.viewportId = viewportId;\n    eventDetail.renderingEngineId = renderingEngineId;\n    triggerEvent(eventTarget, eventType, eventDetail);\n  });\n}\nexport { triggerAnnotationAddedForElement, triggerAnnotationAddedForFOR };","map":{"version":3,"names":["getEnabledElement","triggerEvent","eventTarget","getEnabledElementByIds","Events","getToolGroupsWithToolName","triggerAnnotationAddedForElement","annotation","element","enabledElement","renderingEngine","viewportId","eventType","ANNOTATION_ADDED","eventDetail","renderingEngineId","id","triggerAnnotationAddedForFOR","toolName","metadata","toolGroups","length","viewportsToRender","forEach","toolGroup","viewportsInfo","viewportInfo","FrameOfReferenceUID","push"],"sources":["../../../../../src/stateManagement/annotation/helpers/state.ts"],"sourcesContent":[null],"mappings":"AAAA,SACEA,iBAAiB,EACjBC,YAAY,EACZC,WAAW,EACXC,sBAAsB,QACjB,qBAAqB;AAC5B,SAASC,MAAM,QAAQ,gBAAgB;AAEvC,SAASC,yBAAyB,QAAQ,iCAAiC;AAQ3E,SAASC,gCAAgCA,CACvCC,UAAsB,EACtBC,OAAuB;EAEvB,MAAMC,cAAc,GAAGT,iBAAiB,CAACQ,OAAO,CAAC;EACjD,MAAM;IAAEE,eAAe;IAAEC;EAAU,CAAE,GAAGF,cAAc;EAEtD,MAAMG,SAAS,GAAGR,MAAM,CAACS,gBAAgB;EAEzC,MAAMC,WAAW,GAA+B;IAC9CP,UAAU;IACVI,UAAU;IACVI,iBAAiB,EAAEL,eAAe,CAACM;GACpC;EAEDf,YAAY,CAACC,WAAW,EAAEU,SAAS,EAAEE,WAAW,CAAC;AACnD;AAOA,SAASG,4BAA4BA,CAACV,UAAsB;EAC1D,MAAM;IAAEW;EAAQ,CAAE,GAAGX,UAAU,CAACY,QAAQ;EAExC,MAAMC,UAAU,GAAGf,yBAAyB,CAACa,QAAQ,CAAC;EACtD,IAAI,CAACE,UAAU,CAACC,MAAM,EAAE;IACtB;;EAIF,MAAMC,iBAAiB,GAAG,EAAE;EAC5BF,UAAU,CAACG,OAAO,CAAEC,SAAS,IAAI;IAC/BA,SAAS,CAACC,aAAa,CAACF,OAAO,CAAEG,YAAY,IAAI;MAC/C,MAAM;QAAEX,iBAAiB;QAAEJ;MAAU,CAAE,GAAGe,YAAY;MACtD,MAAM;QAAEC;MAAmB,CAAE,GAAGxB,sBAAsB,CACpDQ,UAAU,EACVI,iBAAiB,CAClB;MAED,IAAIR,UAAU,CAACY,QAAQ,CAACQ,mBAAmB,KAAKA,mBAAmB,EAAE;QACnEL,iBAAiB,CAACM,IAAI,CAACF,YAAY,CAAC;;IAExC,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMd,SAAS,GAAGR,MAAM,CAACS,gBAAgB;EACzC,MAAMC,WAAW,GAA+B;IAAEP;EAAU,CAAE;EAE9D,IAAI,CAACe,iBAAiB,CAACD,MAAM,EAAE;IAC7BpB,YAAY,CAACC,WAAW,EAAEU,SAAS,EAAEE,WAAW,CAAC;IACjD;;EAGFQ,iBAAiB,CAACC,OAAO,CAAC,CAAC;IAAER,iBAAiB;IAAEJ;EAAU,CAAE,KAAI;IAC9DG,WAAW,CAACH,UAAU,GAAGA,UAAU;IACnCG,WAAW,CAACC,iBAAiB,GAAGA,iBAAiB;IACjDd,YAAY,CAACC,WAAW,EAAEU,SAAS,EAAEE,WAAW,CAAC;EACnD,CAAC,CAAC;AACJ;AAEA,SAASR,gCAAgC,EAAEW,4BAA4B"},"metadata":{},"sourceType":"module","externalDependencies":[]}