{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport vtkImageData from '../DataModel/ImageData.js';\nimport vtkDataArray from './DataArray.js';\n\n/**\n * Takes a canvas and converts it to a vtkImageData.\n *\n * Optionally supply a bounding box to get a particular subset of the canvas.\n *\n * @param canvas       The HTML canvas to convert\n * @param boundingBox  A bounding box of type [top, left, width, height]\n */\nfunction canvasToImageData(canvas) {\n  let boundingBox = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0, 0];\n  const [top, left, width, height] = boundingBox;\n  const ctxt = canvas.getContext('2d');\n  const idata = ctxt.getImageData(top, left, width || canvas.width, height || canvas.height);\n  const imageData = vtkImageData.newInstance({\n    type: 'vtkImageData'\n  });\n  imageData.setOrigin(0, 0, 0);\n  imageData.setSpacing(1, 1, 1);\n  imageData.setExtent(0, (width || canvas.width) - 1, 0, (height || canvas.height) - 1, 0, 0);\n  const scalars = vtkDataArray.newInstance({\n    numberOfComponents: 4,\n    values: new Uint8Array(idata.data.buffer)\n  });\n  scalars.setName('scalars');\n  imageData.getPointData().setScalars(scalars);\n  return imageData;\n}\n\n/**\n * Converts an Image object to a vtkImageData.\n */\nfunction imageToImageData(image) {\n  let transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    flipX: false,\n    flipY: false,\n    rotate: 0\n  };\n  const canvas = document.createElement('canvas');\n  canvas.width = image.width;\n  canvas.height = image.height;\n  const ctx = canvas.getContext('2d');\n  const {\n    flipX,\n    flipY,\n    rotate\n  } = transform;\n  ctx.translate(canvas.width / 2, canvas.height / 2);\n  ctx.scale(flipX ? -1 : 1, flipY ? -1 : 1);\n  ctx.rotate(rotate * Math.PI / 180);\n  ctx.drawImage(image, -image.width / 2, -image.height / 2);\n  return canvasToImageData(canvas);\n}\nvar ImageHelper = {\n  canvasToImageData,\n  imageToImageData\n};\nexport { ImageHelper as default };","map":{"version":3,"names":["vtkImageData","vtkDataArray","canvasToImageData","canvas","boundingBox","arguments","length","undefined","top","left","width","height","ctxt","getContext","idata","getImageData","imageData","newInstance","type","setOrigin","setSpacing","setExtent","scalars","numberOfComponents","values","Uint8Array","data","buffer","setName","getPointData","setScalars","imageToImageData","image","transform","flipX","flipY","rotate","document","createElement","ctx","translate","scale","Math","PI","drawImage","ImageHelper","default"],"sources":["/Users/yzy/Documents/Playground/vue-cornerstone-demo/node_modules/@kitware/vtk.js/Common/Core/ImageHelper.js"],"sourcesContent":["import vtkImageData from '../DataModel/ImageData.js';\nimport vtkDataArray from './DataArray.js';\n\n/**\n * Takes a canvas and converts it to a vtkImageData.\n *\n * Optionally supply a bounding box to get a particular subset of the canvas.\n *\n * @param canvas       The HTML canvas to convert\n * @param boundingBox  A bounding box of type [top, left, width, height]\n */\nfunction canvasToImageData(canvas) {\n  let boundingBox = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0, 0];\n  const [top, left, width, height] = boundingBox;\n  const ctxt = canvas.getContext('2d');\n  const idata = ctxt.getImageData(top, left, width || canvas.width, height || canvas.height);\n  const imageData = vtkImageData.newInstance({\n    type: 'vtkImageData'\n  });\n  imageData.setOrigin(0, 0, 0);\n  imageData.setSpacing(1, 1, 1);\n  imageData.setExtent(0, (width || canvas.width) - 1, 0, (height || canvas.height) - 1, 0, 0);\n  const scalars = vtkDataArray.newInstance({\n    numberOfComponents: 4,\n    values: new Uint8Array(idata.data.buffer)\n  });\n  scalars.setName('scalars');\n  imageData.getPointData().setScalars(scalars);\n  return imageData;\n}\n\n/**\n * Converts an Image object to a vtkImageData.\n */\nfunction imageToImageData(image) {\n  let transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    flipX: false,\n    flipY: false,\n    rotate: 0\n  };\n  const canvas = document.createElement('canvas');\n  canvas.width = image.width;\n  canvas.height = image.height;\n  const ctx = canvas.getContext('2d');\n  const {\n    flipX,\n    flipY,\n    rotate\n  } = transform;\n  ctx.translate(canvas.width / 2, canvas.height / 2);\n  ctx.scale(flipX ? -1 : 1, flipY ? -1 : 1);\n  ctx.rotate(rotate * Math.PI / 180);\n  ctx.drawImage(image, -image.width / 2, -image.height / 2);\n  return canvasToImageData(canvas);\n}\nvar ImageHelper = {\n  canvasToImageData,\n  imageToImageData\n};\n\nexport { ImageHelper as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}