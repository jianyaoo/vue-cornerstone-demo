{"ast":null,"code":"export default function computeAutoVoi(viewport, image) {\n  if (hasVoi(viewport)) {\n    return;\n  }\n  const maxVoi = image.maxPixelValue * image.slope + image.intercept;\n  const minVoi = image.minPixelValue * image.slope + image.intercept;\n  const ww = maxVoi - minVoi;\n  const wc = (maxVoi + minVoi) / 2;\n  if (viewport.voi === undefined) {\n    viewport.voi = {\n      windowWidth: ww,\n      windowCenter: wc\n    };\n  } else {\n    viewport.voi.windowWidth = ww;\n    viewport.voi.windowCenter = wc;\n  }\n}\nfunction hasVoi(viewport) {\n  const hasLut = viewport.voiLUT && viewport.voiLUT.lut && viewport.voiLUT.lut.length > 0;\n  return hasLut || viewport.voi.windowWidth !== undefined && viewport.voi.windowCenter !== undefined;\n}","map":{"version":3,"names":["computeAutoVoi","viewport","image","hasVoi","maxVoi","maxPixelValue","slope","intercept","minVoi","minPixelValue","ww","wc","voi","undefined","windowWidth","windowCenter","hasLut","voiLUT","lut","length"],"sources":["../../../../../../src/RenderingEngine/helpers/cpuFallback/rendering/computeAutoVoi.ts"],"sourcesContent":[null],"mappings":"AAQA,eAAc,SAAUA,cAAcA,CACpCC,QAA6B,EAC7BC,KAAa;EAEb,IAAIC,MAAM,CAACF,QAAQ,CAAC,EAAE;IACpB;;EAGF,MAAMG,MAAM,GAAGF,KAAK,CAACG,aAAa,GAAGH,KAAK,CAACI,KAAK,GAAGJ,KAAK,CAACK,SAAS;EAClE,MAAMC,MAAM,GAAGN,KAAK,CAACO,aAAa,GAAGP,KAAK,CAACI,KAAK,GAAGJ,KAAK,CAACK,SAAS;EAClE,MAAMG,EAAE,GAAGN,MAAM,GAAGI,MAAM;EAC1B,MAAMG,EAAE,GAAG,CAACP,MAAM,GAAGI,MAAM,IAAI,CAAC;EAEhC,IAAIP,QAAQ,CAACW,GAAG,KAAKC,SAAS,EAAE;IAC9BZ,QAAQ,CAACW,GAAG,GAAG;MACbE,WAAW,EAAEJ,EAAE;MACfK,YAAY,EAAEJ;KACf;GACF,MAAM;IACLV,QAAQ,CAACW,GAAG,CAACE,WAAW,GAAGJ,EAAE;IAC7BT,QAAQ,CAACW,GAAG,CAACG,YAAY,GAAGJ,EAAE;;AAElC;AAOA,SAASR,MAAMA,CAACF,QAA6B;EAC3C,MAAMe,MAAM,GACVf,QAAQ,CAACgB,MAAM,IAAIhB,QAAQ,CAACgB,MAAM,CAACC,GAAG,IAAIjB,QAAQ,CAACgB,MAAM,CAACC,GAAG,CAACC,MAAM,GAAG,CAAC;EAE1E,OACEH,MAAM,IACLf,QAAQ,CAACW,GAAG,CAACE,WAAW,KAAKD,SAAS,IACrCZ,QAAQ,CAACW,GAAG,CAACG,YAAY,KAAKF,SAAU;AAE9C"},"metadata":{},"sourceType":"module","externalDependencies":[]}