{"ast":null,"code":"import { volumeLoader, utilities as csUtils } from '@cornerstonejs/core';\nfunction createMergedLabelmapForIndex(labelmaps, segmentIndex = 1, volumeId = 'mergedLabelmap') {\n  labelmaps.forEach(({\n    direction,\n    dimensions,\n    origin,\n    spacing\n  }) => {\n    if (!csUtils.isEqual(dimensions, labelmaps[0].dimensions) || !csUtils.isEqual(direction, labelmaps[0].direction) || !csUtils.isEqual(spacing, labelmaps[0].spacing) || !csUtils.isEqual(origin, labelmaps[0].origin)) {\n      throw new Error('labelmaps must have the same size and shape');\n    }\n  });\n  const labelmap = labelmaps[0];\n  const arrayType = labelmap.getScalarData().constructor;\n  const outputData = new arrayType(labelmap.getScalarData().length);\n  labelmaps.forEach(labelmap => {\n    const scalarData = labelmap.getScalarData();\n    for (let i = 0; i < scalarData.length; i++) {\n      if (scalarData[i] === segmentIndex) {\n        outputData[i] = segmentIndex;\n      }\n    }\n  });\n  const options = {\n    scalarData: outputData,\n    metadata: labelmap.metadata,\n    spacing: labelmap.spacing,\n    origin: labelmap.origin,\n    direction: labelmap.direction,\n    dimensions: labelmap.dimensions\n  };\n  const preventCache = true;\n  const mergedVolume = volumeLoader.createLocalVolume(options, volumeId, preventCache);\n  return mergedVolume;\n}\nexport default createMergedLabelmapForIndex;","map":{"version":3,"names":["volumeLoader","utilities","csUtils","createMergedLabelmapForIndex","labelmaps","segmentIndex","volumeId","forEach","direction","dimensions","origin","spacing","isEqual","Error","labelmap","arrayType","getScalarData","constructor","outputData","length","scalarData","i","options","metadata","preventCache","mergedVolume","createLocalVolume"],"sources":["../../../../src/utilities/segmentation/createMergedLabelmapForIndex.ts"],"sourcesContent":[null],"mappings":"AACA,SAASA,YAAY,EAAEC,SAAS,IAAIC,OAAO,QAAQ,qBAAqB;AAaxE,SAASC,4BAA4BA,CACnCC,SAAoC,EACpCC,YAAY,GAAG,CAAC,EAChBC,QAAQ,GAAG,gBAAgB;EAE3BF,SAAS,CAACG,OAAO,CAAC,CAAC;IAAEC,SAAS;IAAEC,UAAU;IAAEC,MAAM;IAAEC;EAAO,CAAE,KAAI;IAC/D,IACE,CAACT,OAAO,CAACU,OAAO,CAACH,UAAU,EAAEL,SAAS,CAAC,CAAC,CAAC,CAACK,UAAU,CAAC,IACrD,CAACP,OAAO,CAACU,OAAO,CAACJ,SAAS,EAAEJ,SAAS,CAAC,CAAC,CAAC,CAACI,SAAS,CAAC,IACnD,CAACN,OAAO,CAACU,OAAO,CAACD,OAAO,EAAEP,SAAS,CAAC,CAAC,CAAC,CAACO,OAAO,CAAC,IAC/C,CAACT,OAAO,CAACU,OAAO,CAACF,MAAM,EAAEN,SAAS,CAAC,CAAC,CAAC,CAACM,MAAM,CAAC,EAC7C;MACA,MAAM,IAAIG,KAAK,CAAC,6CAA6C,CAAC;;EAElE,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAGV,SAAS,CAAC,CAAC,CAAC;EAE7B,MAAMW,SAAS,GAAID,QAAQ,CAACE,aAAa,EAAU,CAACC,WAAW;EAC/D,MAAMC,UAAU,GAAG,IAAIH,SAAS,CAACD,QAAQ,CAACE,aAAa,EAAE,CAACG,MAAM,CAAC;EAEjEf,SAAS,CAACG,OAAO,CAAEO,QAAQ,IAAI;IAC7B,MAAMM,UAAU,GAAGN,QAAQ,CAACE,aAAa,EAAE;IAC3C,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,UAAU,CAACD,MAAM,EAAEE,CAAC,EAAE,EAAE;MAC1C,IAAID,UAAU,CAACC,CAAC,CAAC,KAAKhB,YAAY,EAAE;QAClCa,UAAU,CAACG,CAAC,CAAC,GAAGhB,YAAY;;;EAGlC,CAAC,CAAC;EAEF,MAAMiB,OAAO,GAAG;IACdF,UAAU,EAAEF,UAAU;IACtBK,QAAQ,EAAET,QAAQ,CAACS,QAAQ;IAC3BZ,OAAO,EAAEG,QAAQ,CAACH,OAAO;IACzBD,MAAM,EAAEI,QAAQ,CAACJ,MAAM;IACvBF,SAAS,EAAEM,QAAQ,CAACN,SAAS;IAC7BC,UAAU,EAAEK,QAAQ,CAACL;GACtB;EAED,MAAMe,YAAY,GAAG,IAAI;EAEzB,MAAMC,YAAY,GAAGzB,YAAY,CAAC0B,iBAAiB,CACjDJ,OAAO,EACPhB,QAAQ,EACRkB,YAAY,CACb;EAED,OAAOC,YAAY;AACrB;AAEA,eAAetB,4BAA4B"},"metadata":{},"sourceType":"module","externalDependencies":[]}