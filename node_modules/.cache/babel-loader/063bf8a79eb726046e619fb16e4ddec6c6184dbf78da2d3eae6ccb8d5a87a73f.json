{"ast":null,"code":"import * as cornerstone from \"@cornerstonejs/core\";\nimport cornerstoneDICOMImageLoader from \"@cornerstonejs/dicom-image-loader\";\nimport dicomParser from \"dicom-parser\";\nconst {\n  preferSizeOverAccuracy,\n  useNorm16Texture\n} = cornerstone.getConfiguration().rendering;\nexport default function initCornerstoneDICOMImageLoader() {\n  cornerstoneDICOMImageLoader.wadouri.register(cornerstone);\n  cornerstone.imageLoader.registerImageLoader(\"wadouri\", cornerstoneDICOMImageLoader.wadouri.loadImage);\n  cornerstoneDICOMImageLoader.external.cornerstone = cornerstone;\n  cornerstoneDICOMImageLoader.external.dicomParser = dicomParser;\n  cornerstoneDICOMImageLoader.configure({\n    useWebWorkers: true,\n    decodeConfig: {\n      convertFloatPixelDataToInt: false,\n      use16BitDataType: preferSizeOverAccuracy || useNorm16Texture\n    }\n  });\n  let maxWebWorkers = 1;\n  if (navigator.hardwareConcurrency) {\n    maxWebWorkers = Math.min(navigator.hardwareConcurrency, 7);\n  }\n  const config = {\n    maxWebWorkers: maxWebWorkers || 1,\n    startWebWorkersOnDemand: false,\n    taskConfiguration: {\n      decodeTask: {\n        initializeCodecsOnStartup: false,\n        strict: false\n      }\n    }\n  };\n  cornerstoneDICOMImageLoader.webWorkerManager.initialize(config);\n}","map":{"version":3,"names":["cornerstone","cornerstoneDICOMImageLoader","dicomParser","preferSizeOverAccuracy","useNorm16Texture","getConfiguration","rendering","initCornerstoneDICOMImageLoader","wadouri","register","imageLoader","registerImageLoader","loadImage","external","configure","useWebWorkers","decodeConfig","convertFloatPixelDataToInt","use16BitDataType","maxWebWorkers","navigator","hardwareConcurrency","Math","min","config","startWebWorkersOnDemand","taskConfiguration","decodeTask","initializeCodecsOnStartup","strict","webWorkerManager","initialize"],"sources":["/root/vue-cornerstone-demo/src/cornerstone/initCornerstoneDicomImageLoader.js"],"sourcesContent":["import * as cornerstone from \"@cornerstonejs/core\";\nimport cornerstoneDICOMImageLoader from \"@cornerstonejs/dicom-image-loader\";\nimport dicomParser from \"dicom-parser\";\n\nconst { preferSizeOverAccuracy, useNorm16Texture } =\n  cornerstone.getConfiguration().rendering;\n\nexport default function initCornerstoneDICOMImageLoader() {\n  cornerstoneDICOMImageLoader.wadouri.register(cornerstone);\n  cornerstone.imageLoader.registerImageLoader(\n    \"wadouri\",\n    cornerstoneDICOMImageLoader.wadouri.loadImage\n  );\n\n  cornerstoneDICOMImageLoader.external.cornerstone = cornerstone;\n  cornerstoneDICOMImageLoader.external.dicomParser = dicomParser;\n\n  cornerstoneDICOMImageLoader.configure({\n    useWebWorkers: true,\n    decodeConfig: {\n      convertFloatPixelDataToInt: false,\n      use16BitDataType: preferSizeOverAccuracy || useNorm16Texture,\n    },\n  });\n\n  let maxWebWorkers = 1;\n  if (navigator.hardwareConcurrency) {\n    maxWebWorkers = Math.min(navigator.hardwareConcurrency, 7);\n  }\n\n  const config = {\n    maxWebWorkers: maxWebWorkers || 1,\n    startWebWorkersOnDemand: false,\n    taskConfiguration: {\n      decodeTask: {\n        initializeCodecsOnStartup: false,\n        strict: false,\n      },\n    },\n  };\n\n  cornerstoneDICOMImageLoader.webWorkerManager.initialize(config);\n}\n"],"mappings":"AAAA,OAAO,KAAKA,WAAW,MAAM,qBAAqB;AAClD,OAAOC,2BAA2B,MAAM,mCAAmC;AAC3E,OAAOC,WAAW,MAAM,cAAc;AAEtC,MAAM;EAAEC,sBAAsB;EAAEC;AAAiB,CAAC,GAChDJ,WAAW,CAACK,gBAAgB,CAAC,CAAC,CAACC,SAAS;AAE1C,eAAe,SAASC,+BAA+BA,CAAA,EAAG;EACxDN,2BAA2B,CAACO,OAAO,CAACC,QAAQ,CAACT,WAAW,CAAC;EACzDA,WAAW,CAACU,WAAW,CAACC,mBAAmB,CACzC,SAAS,EACTV,2BAA2B,CAACO,OAAO,CAACI,SACtC,CAAC;EAEDX,2BAA2B,CAACY,QAAQ,CAACb,WAAW,GAAGA,WAAW;EAC9DC,2BAA2B,CAACY,QAAQ,CAACX,WAAW,GAAGA,WAAW;EAE9DD,2BAA2B,CAACa,SAAS,CAAC;IACpCC,aAAa,EAAE,IAAI;IACnBC,YAAY,EAAE;MACZC,0BAA0B,EAAE,KAAK;MACjCC,gBAAgB,EAAEf,sBAAsB,IAAIC;IAC9C;EACF,CAAC,CAAC;EAEF,IAAIe,aAAa,GAAG,CAAC;EACrB,IAAIC,SAAS,CAACC,mBAAmB,EAAE;IACjCF,aAAa,GAAGG,IAAI,CAACC,GAAG,CAACH,SAAS,CAACC,mBAAmB,EAAE,CAAC,CAAC;EAC5D;EAEA,MAAMG,MAAM,GAAG;IACbL,aAAa,EAAEA,aAAa,IAAI,CAAC;IACjCM,uBAAuB,EAAE,KAAK;IAC9BC,iBAAiB,EAAE;MACjBC,UAAU,EAAE;QACVC,yBAAyB,EAAE,KAAK;QAChCC,MAAM,EAAE;MACV;IACF;EACF,CAAC;EAED5B,2BAA2B,CAAC6B,gBAAgB,CAACC,UAAU,CAACP,MAAM,CAAC;AACjE"},"metadata":{},"sourceType":"module","externalDependencies":[]}