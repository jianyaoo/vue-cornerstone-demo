{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nclass CornerstoneEventTarget {\n  constructor() {\n    this.listeners = {};\n  }\n  reset() {\n    this.listeners = {};\n  }\n  addEventListenerOnce(type, callback) {\n    const onceWrapper = event => {\n      this.removeEventListener(type, onceWrapper);\n      callback.call(this, event);\n    };\n    this.addEventListener(type, onceWrapper);\n  }\n  addEventListener(type, callback) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n    if (this.listeners[type].indexOf(callback) !== -1) {\n      return;\n    }\n    this.listeners[type].push(callback);\n  }\n  removeEventListener(type, callback) {\n    if (!this.listeners[type]) {\n      return;\n    }\n    const stack = this.listeners[type];\n    const stackLength = stack.length;\n    for (let i = 0; i < stackLength; i++) {\n      if (stack[i] === callback) {\n        stack.splice(i, 1);\n        return;\n      }\n    }\n  }\n  dispatchEvent(event) {\n    if (!this.listeners[event.type]) {\n      return;\n    }\n    const stack = this.listeners[event.type].slice();\n    const stackLength = stack.length;\n    for (let i = 0; i < stackLength; i++) {\n      try {\n        stack[i].call(this, event);\n      } catch (error) {\n        console.error(`error in event listener of type:  ${event.type}`, error);\n      }\n    }\n    return !event.defaultPrevented;\n  }\n}\nconst eventTarget = new CornerstoneEventTarget();\nexport default eventTarget;","map":{"version":3,"names":["CornerstoneEventTarget","constructor","listeners","reset","addEventListenerOnce","type","callback","onceWrapper","event","removeEventListener","call","addEventListener","indexOf","push","stack","stackLength","length","i","splice","dispatchEvent","slice","error","console","defaultPrevented","eventTarget"],"sources":["../../src/eventTarget.ts"],"sourcesContent":[null],"mappings":";AAGA,MAAMA,sBAAsB;EAG1BC,YAAA;IACE,IAAI,CAACC,SAAS,GAAG,EAAE;EACrB;EAEOC,KAAKA,CAAA;IACV,IAAI,CAACD,SAAS,GAAG,EAAE;EACrB;EAEOE,oBAAoBA,CAACC,IAAI,EAAEC,QAAQ;IAExC,MAAMC,WAAW,GAAIC,KAAK,IAAI;MAE5B,IAAI,CAACC,mBAAmB,CAACJ,IAAI,EAAEE,WAAW,CAAC;MAG3CD,QAAQ,CAACI,IAAI,CAAC,IAAI,EAAEF,KAAK,CAAC;IAC5B,CAAC;IAGD,IAAI,CAACG,gBAAgB,CAACN,IAAI,EAAEE,WAAW,CAAC;EAC1C;EAEOI,gBAAgBA,CAACN,IAAI,EAAEC,QAAQ;IACpC,IAAI,CAAC,IAAI,CAACJ,SAAS,CAACG,IAAI,CAAC,EAAE;MACzB,IAAI,CAACH,SAAS,CAACG,IAAI,CAAC,GAAG,EAAE;;IAI3B,IAAI,IAAI,CAACH,SAAS,CAACG,IAAI,CAAC,CAACO,OAAO,CAACN,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;MACjD;;IAGF,IAAI,CAACJ,SAAS,CAACG,IAAI,CAAC,CAACQ,IAAI,CAACP,QAAQ,CAAC;EACrC;EAEOG,mBAAmBA,CAACJ,IAAI,EAAEC,QAAQ;IACvC,IAAI,CAAC,IAAI,CAACJ,SAAS,CAACG,IAAI,CAAC,EAAE;MACzB;;IAGF,MAAMS,KAAK,GAAG,IAAI,CAACZ,SAAS,CAACG,IAAI,CAAC;IAClC,MAAMU,WAAW,GAAGD,KAAK,CAACE,MAAM;IAEhC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,WAAW,EAAEE,CAAC,EAAE,EAAE;MACpC,IAAIH,KAAK,CAACG,CAAC,CAAC,KAAKX,QAAQ,EAAE;QACzBQ,KAAK,CAACI,MAAM,CAACD,CAAC,EAAE,CAAC,CAAC;QAElB;;;EAGN;EAEAE,aAAaA,CAACX,KAAK;IACjB,IAAI,CAAC,IAAI,CAACN,SAAS,CAACM,KAAK,CAACH,IAAI,CAAC,EAAE;MAE/B;;IAGF,MAAMS,KAAK,GAAG,IAAI,CAACZ,SAAS,CAACM,KAAK,CAACH,IAAI,CAAC,CAACe,KAAK,EAAE;IAChD,MAAML,WAAW,GAAGD,KAAK,CAACE,MAAM;IAEhC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,WAAW,EAAEE,CAAC,EAAE,EAAE;MACpC,IAAI;QACFH,KAAK,CAACG,CAAC,CAAC,CAACP,IAAI,CAAC,IAAI,EAAEF,KAAK,CAAC;OAC3B,CAAC,OAAOa,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqCb,KAAK,CAACH,IAAI,EAAE,EAAEgB,KAAK,CAAC;;;IAI3E,OAAO,CAACb,KAAK,CAACe,gBAAgB;EAChC;;AAMF,MAAMC,WAAW,GAAG,IAAIxB,sBAAsB,EAAE;AAEhD,eAAewB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}