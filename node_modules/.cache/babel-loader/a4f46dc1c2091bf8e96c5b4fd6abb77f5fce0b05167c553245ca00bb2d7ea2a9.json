{"ast":null,"code":"import { ToolModes, AnnotationStyleStates } from '../enums';\nimport ImageMouseCursor from './ImageMouseCursor';\nimport { getDefinedSVGCursorDescriptor } from './SVGCursorDescriptor';\nimport { getStyleProperty } from '../stateManagement/annotation/config/helpers';\nconst PROPERTY = 'color';\nconst STATE = AnnotationStyleStates.Highlighted;\nconst MODE = ToolModes.Active;\nexport default class SVGMouseCursor extends ImageMouseCursor {\n  constructor(url, x, y, name, fallback) {\n    super(url, x, y, name, fallback);\n  }\n  static getDefinedCursor(name, pointer = false, color) {\n    if (!color) {\n      color = getStyleProperty(PROPERTY, {}, STATE, MODE);\n    }\n    const urn = getCursorURN(name, pointer, color);\n    let cursor = super.getDefinedCursor(urn);\n    if (!cursor) {\n      const descriptor = getDefinedSVGCursorDescriptor(name);\n      if (descriptor) {\n        cursor = createSVGMouseCursor(descriptor, urn, pointer, color, super.getDefinedCursor('default'));\n        super.setDefinedCursor(urn, cursor);\n      }\n    }\n    return cursor;\n  }\n}\nfunction format(template, dictionary) {\n  const dict = Object(dictionary);\n  const defined = Object.prototype.hasOwnProperty.bind(dict);\n  return (template + '').replace(/\\{\\{(\\w+)\\}\\}/g, (match, key) => {\n    return defined(key) ? dict[key] + '' : '';\n  });\n}\nfunction getCursorURN(name, pointer, color) {\n  const type = pointer ? 'pointer' : 'cursor';\n  return `${type}:${name}/${color}`;\n}\nfunction createSVGMouseCursor(descriptor, name, pointer, color, fallback) {\n  const {\n    x,\n    y\n  } = descriptor.mousePoint;\n  return new SVGMouseCursor(createSVGIconUrl(descriptor, pointer, {\n    color\n  }), x, y, name, fallback);\n}\nfunction createSVGIconUrl(descriptor, pointer, options) {\n  return URL.createObjectURL(createSVGIconBlob(descriptor, pointer, options));\n}\nfunction createSVGIconBlob(descriptor, pointer, options) {\n  const svgString = (pointer ? createSVGIconWithPointer : createSVGIcon)(descriptor, options);\n  return new Blob([svgString], {\n    type: 'image/svg+xml'\n  });\n}\nfunction createSVGIcon(descriptor, options) {\n  const {\n    iconContent,\n    iconSize,\n    viewBox\n  } = descriptor;\n  const svgString = `\n    <svg data-icon=\"cursor\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"${iconSize}\" height=\"${iconSize}\" viewBox=\"0 0\n      ${viewBox.x} ${viewBox.y}\">\n      ${iconContent}\n    </svg>`;\n  return format(svgString, options);\n}\nfunction createSVGIconWithPointer(descriptor, options) {\n  const {\n    iconContent,\n    iconSize,\n    viewBox,\n    mousePointerGroupString\n  } = descriptor;\n  const scale = iconSize / Math.max(viewBox.x, viewBox.y, 1);\n  const svgSize = 16 + iconSize;\n  const svgString = `\n    <svg data-icon=\"cursor\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"${svgSize}\" height=\"${svgSize}\" viewBox=\"0 0 ${svgSize} ${svgSize}\">\n      <g>${mousePointerGroupString}</g>\n      <g transform=\"translate(16, 16) scale(${scale})\">${iconContent}</g>\n    </svg>`;\n  return format(svgString, options);\n}","map":{"version":3,"names":["ToolModes","AnnotationStyleStates","ImageMouseCursor","getDefinedSVGCursorDescriptor","getStyleProperty","PROPERTY","STATE","Highlighted","MODE","Active","SVGMouseCursor","constructor","url","x","y","name","fallback","getDefinedCursor","pointer","color","urn","getCursorURN","cursor","descriptor","createSVGMouseCursor","setDefinedCursor","format","template","dictionary","dict","Object","defined","prototype","hasOwnProperty","bind","replace","match","key","type","mousePoint","createSVGIconUrl","options","URL","createObjectURL","createSVGIconBlob","svgString","createSVGIconWithPointer","createSVGIcon","Blob","iconContent","iconSize","viewBox","mousePointerGroupString","scale","Math","max","svgSize"],"sources":["../../../src/cursors/SVGMouseCursor.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}