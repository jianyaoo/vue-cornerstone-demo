{"ast":null,"code":"import { getEnabledElement, StackViewport, VolumeViewport, utilities as csUtils } from '@cornerstonejs/core';\nimport clip from '../clip';\nimport scroll from '../scroll';\nasync function jumpToSlice(element, options = {}) {\n  const {\n    imageIndex,\n    debounceLoading,\n    volumeId\n  } = options;\n  const enabledElement = getEnabledElement(element);\n  if (!enabledElement) {\n    throw new Error('Element has been disabled');\n  }\n  const {\n    viewport\n  } = enabledElement;\n  const {\n    imageIndex: currentImageIndex,\n    numberOfSlices\n  } = _getImageSliceData(viewport, debounceLoading);\n  const imageIndexToJump = _getImageIndexToJump(numberOfSlices, imageIndex);\n  const delta = imageIndexToJump - currentImageIndex;\n  scroll(viewport, {\n    delta,\n    debounceLoading,\n    volumeId\n  });\n}\nfunction _getImageSliceData(viewport, debounceLoading) {\n  if (viewport instanceof StackViewport) {\n    return {\n      numberOfSlices: viewport.getImageIds().length,\n      imageIndex: debounceLoading ? viewport.getTargetImageIdIndex() : viewport.getCurrentImageIdIndex()\n    };\n  } else if (viewport instanceof VolumeViewport) {\n    return csUtils.getImageSliceDataForVolumeViewport(viewport);\n  } else {\n    throw new Error('Unsupported viewport type');\n  }\n}\nfunction _getImageIndexToJump(numberOfSlices, imageIndex) {\n  const lastSliceIndex = numberOfSlices - 1;\n  return clip(imageIndex, 0, lastSliceIndex);\n}\nexport default jumpToSlice;","map":{"version":3,"names":["getEnabledElement","StackViewport","VolumeViewport","utilities","csUtils","clip","scroll","jumpToSlice","element","options","imageIndex","debounceLoading","volumeId","enabledElement","Error","viewport","currentImageIndex","numberOfSlices","_getImageSliceData","imageIndexToJump","_getImageIndexToJump","delta","getImageIds","length","getTargetImageIdIndex","getCurrentImageIdIndex","getImageSliceDataForVolumeViewport","lastSliceIndex"],"sources":["../../../../src/utilities/viewport/jumpToSlice.ts"],"sourcesContent":[null],"mappings":"AAAA,SACEA,iBAAiB,EACjBC,aAAa,EACbC,cAAc,EACdC,SAAS,IAAIC,OAAO,QAEf,qBAAqB;AAE5B,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,MAAM,MAAM,WAAW;AAY9B,eAAeC,WAAWA,CACxBC,OAAuB,EACvBC,OAAA,GAAU,EAAwB;EAElC,MAAM;IAAEC,UAAU;IAAEC,eAAe;IAAEC;EAAQ,CAAE,GAAGH,OAAO;EACzD,MAAMI,cAAc,GAAGb,iBAAiB,CAACQ,OAAO,CAAC;EAEjD,IAAI,CAACK,cAAc,EAAE;IACnB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;;EAG9C,MAAM;IAAEC;EAAQ,CAAE,GAAGF,cAAc;EAEnC,MAAM;IAAEH,UAAU,EAAEM,iBAAiB;IAAEC;EAAc,CAAE,GAAGC,kBAAkB,CAC1EH,QAAQ,EACRJ,eAAe,CAChB;EAED,MAAMQ,gBAAgB,GAAGC,oBAAoB,CAACH,cAAc,EAAEP,UAAU,CAAC;EACzE,MAAMW,KAAK,GAAGF,gBAAgB,GAAGH,iBAAiB;EAElDV,MAAM,CAACS,QAAQ,EAAE;IAAEM,KAAK;IAAEV,eAAe;IAAEC;EAAQ,CAAE,CAAC;AACxD;AAEA,SAASM,kBAAkBA,CACzBH,QAAsD,EACtDJ,eAAyB;EAEzB,IAAII,QAAQ,YAAYd,aAAa,EAAE;IACrC,OAAO;MACLgB,cAAc,EAAEF,QAAQ,CAACO,WAAW,EAAE,CAACC,MAAM;MAC7Cb,UAAU,EAAEC,eAAe,GACvBI,QAAQ,CAACS,qBAAqB,EAAE,GAChCT,QAAQ,CAACU,sBAAsB;KACpC;GACF,MAAM,IAAIV,QAAQ,YAAYb,cAAc,EAAE;IAC7C,OAAOE,OAAO,CAACsB,kCAAkC,CAACX,QAAQ,CAAC;GAC5D,MAAM;IACL,MAAM,IAAID,KAAK,CAAC,2BAA2B,CAAC;;AAEhD;AAEA,SAASM,oBAAoBA,CAC3BH,cAAsB,EACtBP,UAAkB;EAElB,MAAMiB,cAAc,GAAGV,cAAc,GAAG,CAAC;EAEzC,OAAOZ,IAAI,CAACK,UAAU,EAAE,CAAC,EAAEiB,cAAc,CAAC;AAC5C;AAEA,eAAepB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}