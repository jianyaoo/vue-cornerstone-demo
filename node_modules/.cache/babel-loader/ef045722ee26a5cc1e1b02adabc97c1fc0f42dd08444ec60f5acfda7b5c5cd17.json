{"ast":null,"code":"import { vec3, vec2 } from 'gl-matrix';\nimport { getEnabledElement, triggerEvent, eventTarget, utilities as csUtils, cache } from '@cornerstonejs/core';\nimport { AnnotationTool } from '../base';\nimport throttle from '../../utilities/throttle';\nimport { addAnnotation, getAnnotations, removeAnnotation } from '../../stateManagement';\nimport { drawHandles as drawHandlesSvg, drawRedactionRect as drawRedactionRectSvg } from '../../drawingSvg';\nimport { state } from '../../store';\nimport { Events } from '../../enums';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport * as rectangle from '../../utilities/math/rectangle';\nimport { resetElementCursor, hideElementCursor } from '../../cursors/elementCursor';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport getWorldWidthAndHeightFromTwoPoints from '../../utilities/planar/getWorldWidthAndHeightFromTwoPoints';\nclass VideoRedactionTool extends AnnotationTool {\n  constructor(toolConfiguration = {}) {\n    super(toolConfiguration, {\n      supportedInteractionTypes: ['Mouse', 'Touch'],\n      configuration: {\n        shadow: true,\n        preventHandleOutsideImage: false\n      }\n    });\n    this.addNewAnnotation = evt => {\n      const eventData = evt.detail;\n      const {\n        currentPoints,\n        element\n      } = eventData;\n      const worldPos = currentPoints.world;\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport,\n        renderingEngine\n      } = enabledElement;\n      this.isDrawing = true;\n      const camera = viewport.getCamera();\n      const {\n        viewPlaneNormal,\n        viewUp\n      } = camera;\n      const referencedImageId = this.getReferencedImageId(viewport, worldPos, viewPlaneNormal, viewUp);\n      const annotation = {\n        metadata: {\n          viewPlaneNormal: [0, 0, 1],\n          viewUp: [0, 1, 0],\n          FrameOfReferenceUID: viewport.getFrameOfReferenceUID(),\n          referencedImageId,\n          toolName: this.getToolName()\n        },\n        data: {\n          invalidated: true,\n          handles: {\n            points: [[...worldPos], [...worldPos], [...worldPos], [...worldPos]],\n            activeHandleIndex: null\n          },\n          cachedStats: {},\n          active: true\n        }\n      };\n      addAnnotation(annotation, element);\n      const viewportUIDsToRender = getViewportIdsWithToolToRender(element, this.getToolName(), false);\n      this.editData = {\n        annotation,\n        viewportUIDsToRender,\n        handleIndex: 3,\n        newAnnotation: true,\n        hasMoved: false\n      };\n      this._activateDraw(element);\n      hideElementCursor(element);\n      evt.preventDefault();\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportUIDsToRender);\n      return annotation;\n    };\n    this.getHandleNearImagePoint = (element, annotation, canvasCoords, proximity) => {\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        data\n      } = annotation;\n      const {\n        points\n      } = data.handles;\n      for (let i = 0; i < points.length; i++) {\n        const point = points[i];\n        const toolDataCanvasCoordinate = viewport.worldToCanvas(point);\n        const near = vec2.distance(canvasCoords, toolDataCanvasCoordinate) < proximity;\n        if (near === true) {\n          data.handles.activeHandleIndex = i;\n          return point;\n        }\n      }\n      data.handles.activeHandleIndex = null;\n    };\n    this.isPointNearTool = (element, annotation, canvasCoords, proximity) => {\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        data\n      } = annotation;\n      const {\n        points\n      } = data.handles;\n      const canvasPoint1 = viewport.worldToCanvas(points[0]);\n      const canvasPoint2 = viewport.worldToCanvas(points[3]);\n      const rect = this._getRectangleImageCoordinates([canvasPoint1, canvasPoint2]);\n      const point = [canvasCoords[0], canvasCoords[1]];\n      const {\n        left,\n        top,\n        width,\n        height\n      } = rect;\n      const distanceToPoint = rectangle.distanceToPoint([left, top, width, height], point);\n      if (distanceToPoint <= proximity) {\n        return true;\n      }\n    };\n    this.toolSelectedCallback = (evt, annotation, interactionType = 'mouse') => {\n      const eventData = evt.detail;\n      const {\n        element\n      } = eventData;\n      const {\n        data\n      } = annotation;\n      data.active = true;\n      const viewportUIDsToRender = getViewportIdsWithToolToRender(element, this.getToolName(), false);\n      this.editData = {\n        annotation,\n        viewportUIDsToRender\n      };\n      this._activateModify(element);\n      hideElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportUIDsToRender);\n      evt.preventDefault();\n    };\n    this.handleSelectedCallback = (evt, annotation, handle, interactionType = 'mouse') => {\n      const eventData = evt.detail;\n      const {\n        element\n      } = eventData;\n      const {\n        data\n      } = annotation;\n      data.active = true;\n      let movingTextBox = false;\n      let handleIndex;\n      if (handle.worldPosition) {\n        movingTextBox = true;\n      } else {\n        handleIndex = data.handles.points.findIndex(p => p === handle);\n      }\n      const viewportUIDsToRender = getViewportIdsWithToolToRender(element, this.getToolName(), false);\n      this.editData = {\n        annotation,\n        viewportUIDsToRender,\n        handleIndex\n      };\n      this._activateModify(element);\n      hideElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportUIDsToRender);\n      evt.preventDefault();\n    };\n    this._mouseUpCallback = evt => {\n      const eventData = evt.detail;\n      const {\n        element\n      } = eventData;\n      const {\n        annotation,\n        viewportUIDsToRender,\n        newAnnotation,\n        hasMoved\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      if (newAnnotation && !hasMoved) {\n        return;\n      }\n      data.active = false;\n      data.handles.activeHandleIndex = null;\n      this._deactivateModify(element);\n      this._deactivateDraw(element);\n      resetElementCursor(element);\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      this.editData = null;\n      this.isDrawing = false;\n      if (this.isHandleOutsideImage && this.configuration.preventHandleOutsideImage) {\n        removeAnnotation(annotation.annotationUID);\n      }\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportUIDsToRender);\n    };\n    this._mouseDragCallback = evt => {\n      this.isDrawing = true;\n      const eventData = evt.detail;\n      const {\n        element\n      } = eventData;\n      const {\n        annotation,\n        viewportUIDsToRender,\n        handleIndex\n      } = this.editData;\n      const {\n        data\n      } = annotation;\n      if (handleIndex === undefined) {\n        const {\n          deltaPoints\n        } = eventData;\n        const worldPosDelta = deltaPoints.world;\n        const {\n          points\n        } = data.handles;\n        points.forEach(point => {\n          point[0] += worldPosDelta[0];\n          point[1] += worldPosDelta[1];\n          point[2] += worldPosDelta[2];\n        });\n        data.invalidated = true;\n      } else {\n        const {\n          currentPoints\n        } = eventData;\n        const enabledElement = getEnabledElement(element);\n        const {\n          worldToCanvas,\n          canvasToWorld\n        } = enabledElement.viewport;\n        const worldPos = currentPoints.world;\n        const {\n          points\n        } = data.handles;\n        points[handleIndex] = [...worldPos];\n        let bottomLeftCanvas;\n        let bottomRightCanvas;\n        let topLeftCanvas;\n        let topRightCanvas;\n        let bottomLeftWorld;\n        let bottomRightWorld;\n        let topLeftWorld;\n        let topRightWorld;\n        switch (handleIndex) {\n          case 0:\n          case 3:\n            bottomLeftCanvas = worldToCanvas(points[0]);\n            topRightCanvas = worldToCanvas(points[3]);\n            bottomRightCanvas = [topRightCanvas[0], bottomLeftCanvas[1]];\n            topLeftCanvas = [bottomLeftCanvas[0], topRightCanvas[1]];\n            bottomRightWorld = canvasToWorld(bottomRightCanvas);\n            topLeftWorld = canvasToWorld(topLeftCanvas);\n            points[1] = bottomRightWorld;\n            points[2] = topLeftWorld;\n            break;\n          case 1:\n          case 2:\n            bottomRightCanvas = worldToCanvas(points[1]);\n            topLeftCanvas = worldToCanvas(points[2]);\n            bottomLeftCanvas = [topLeftCanvas[0], bottomRightCanvas[1]];\n            topRightCanvas = [bottomRightCanvas[0], topLeftCanvas[1]];\n            bottomLeftWorld = canvasToWorld(bottomLeftCanvas);\n            topRightWorld = canvasToWorld(topRightCanvas);\n            points[0] = bottomLeftWorld;\n            points[3] = topRightWorld;\n            break;\n        }\n        data.invalidated = true;\n      }\n      this.editData.hasMoved = true;\n      const enabledElement = getEnabledElement(element);\n      const {\n        renderingEngine\n      } = enabledElement;\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportUIDsToRender);\n    };\n    this._activateDraw = element => {\n      state.isInteractingWithTool = true;\n      element.addEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n      element.addEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n      element.addEventListener(Events.MOUSE_MOVE, this._mouseDragCallback);\n      element.addEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n      element.addEventListener(Events.TOUCH_END, this._mouseUpCallback);\n      element.addEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n    };\n    this._deactivateDraw = element => {\n      state.isInteractingWithTool = false;\n      element.removeEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n      element.removeEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n      element.removeEventListener(Events.MOUSE_MOVE, this._mouseDragCallback);\n      element.removeEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n      element.removeEventListener(Events.TOUCH_END, this._mouseUpCallback);\n      element.removeEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n    };\n    this._activateModify = element => {\n      state.isInteractingWithTool = true;\n      element.addEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n      element.addEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n      element.addEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n      element.addEventListener(Events.TOUCH_END, this._mouseUpCallback);\n      element.addEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n    };\n    this._deactivateModify = element => {\n      state.isInteractingWithTool = false;\n      element.removeEventListener(Events.MOUSE_UP, this._mouseUpCallback);\n      element.removeEventListener(Events.MOUSE_DRAG, this._mouseDragCallback);\n      element.removeEventListener(Events.MOUSE_CLICK, this._mouseUpCallback);\n      element.removeEventListener(Events.TOUCH_END, this._mouseUpCallback);\n      element.removeEventListener(Events.TOUCH_DRAG, this._mouseDragCallback);\n    };\n    this.renderAnnotation = (enabledElement, svgDrawingHelper) => {\n      const renderStatus = false;\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        element\n      } = viewport;\n      let annotations = getAnnotations(this.getToolName(), element);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      annotations = this.filterInteractableAnnotationsForElement(element, annotations);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      const targetId = this.getTargetId(viewport);\n      const renderingEngine = viewport.getRenderingEngine();\n      const styleSpecifier = {\n        toolGroupId: this.toolGroupId,\n        toolName: this.getToolName(),\n        viewportId: enabledElement.viewport.id\n      };\n      for (let i = 0; i < annotations.length; i++) {\n        const annotation = annotations[i];\n        const {\n          annotationUID\n        } = annotation;\n        const toolMetadata = annotation.metadata;\n        const data = annotation.data;\n        const {\n          points,\n          activeHandleIndex\n        } = data.handles;\n        const canvasCoordinates = points.map(p => viewport.worldToCanvas(p));\n        const lineWidth = this.getStyle('lineWidth', styleSpecifier, annotation);\n        const lineDash = this.getStyle('lineDash', styleSpecifier, annotation);\n        const color = this.getStyle('color', styleSpecifier, annotation);\n        if (!viewport.getRenderingEngine()) {\n          console.warn('Rendering Engine has been destroyed');\n          return;\n        }\n        let activeHandleCanvasCoords;\n        if (!this.editData && activeHandleIndex !== null) {\n          activeHandleCanvasCoords = [canvasCoordinates[activeHandleIndex]];\n        }\n        if (activeHandleCanvasCoords) {\n          const handleGroupUID = '0';\n          drawHandlesSvg(svgDrawingHelper, annotationUID, handleGroupUID, activeHandleCanvasCoords, {\n            color\n          });\n        }\n        const rectangleUID = '0';\n        drawRedactionRectSvg(svgDrawingHelper, annotationUID, rectangleUID, canvasCoordinates[0], canvasCoordinates[3], {\n          color: 'black',\n          lineDash,\n          lineWidth\n        });\n      }\n    };\n    this._getRectangleImageCoordinates = points => {\n      const [point0, point1] = points;\n      return {\n        left: Math.min(point0[0], point1[0]),\n        top: Math.min(point0[1], point1[1]),\n        width: Math.abs(point0[0] - point1[0]),\n        height: Math.abs(point0[1] - point1[1])\n      };\n    };\n    this._calculateCachedStats = (annotation, viewPlaneNormal, viewUp, renderingEngine, enabledElement) => {\n      const {\n        data\n      } = annotation;\n      const {\n        viewportUID,\n        renderingEngineUID,\n        sceneUID\n      } = enabledElement;\n      const worldPos1 = data.handles.points[0];\n      const worldPos2 = data.handles.points[3];\n      const {\n        cachedStats\n      } = data;\n      const targetUIDs = Object.keys(cachedStats);\n      for (let i = 0; i < targetUIDs.length; i++) {\n        const targetUID = targetUIDs[i];\n        const {\n          imageVolume\n        } = this._getImageVolumeFromTargetUID(targetUID, renderingEngine);\n        const {\n          dimensions,\n          scalarData,\n          vtkImageData: imageData,\n          metadata\n        } = imageVolume;\n        const worldPos1Index = vec3.fromValues(0, 0, 0);\n        const worldPos2Index = vec3.fromValues(0, 0, 0);\n        imageData.worldToIndexVec3(worldPos1, worldPos1Index);\n        worldPos1Index[0] = Math.floor(worldPos1Index[0]);\n        worldPos1Index[1] = Math.floor(worldPos1Index[1]);\n        worldPos1Index[2] = Math.floor(worldPos1Index[2]);\n        imageData.worldToIndexVec3(worldPos2, worldPos2Index);\n        worldPos2Index[0] = Math.floor(worldPos2Index[0]);\n        worldPos2Index[1] = Math.floor(worldPos2Index[1]);\n        worldPos2Index[2] = Math.floor(worldPos2Index[2]);\n        if (this._isInsideVolume(worldPos1Index, worldPos2Index, dimensions)) {\n          this.isHandleOutsideImage = false;\n          const iMin = Math.min(worldPos1Index[0], worldPos2Index[0]);\n          const iMax = Math.max(worldPos1Index[0], worldPos2Index[0]);\n          const jMin = Math.min(worldPos1Index[1], worldPos2Index[1]);\n          const jMax = Math.max(worldPos1Index[1], worldPos2Index[1]);\n          const kMin = Math.min(worldPos1Index[2], worldPos2Index[2]);\n          const kMax = Math.max(worldPos1Index[2], worldPos2Index[2]);\n          const {\n            worldWidth,\n            worldHeight\n          } = getWorldWidthAndHeightFromTwoPoints(viewPlaneNormal, viewUp, worldPos1, worldPos2);\n          const area = worldWidth * worldHeight;\n          let count = 0;\n          let mean = 0;\n          let stdDev = 0;\n          const yMultiple = dimensions[0];\n          const zMultiple = dimensions[0] * dimensions[1];\n          for (let k = kMin; k <= kMax; k++) {\n            for (let j = jMin; j <= jMax; j++) {\n              for (let i = iMin; i <= iMax; i++) {\n                const value = scalarData[k * zMultiple + j * yMultiple + i];\n                count++;\n                mean += value;\n              }\n            }\n          }\n          mean /= count;\n          for (let k = kMin; k <= kMax; k++) {\n            for (let j = jMin; j <= jMax; j++) {\n              for (let i = iMin; i <= iMax; i++) {\n                const value = scalarData[k * zMultiple + j * yMultiple + i];\n                const valueMinusMean = value - mean;\n                stdDev += valueMinusMean * valueMinusMean;\n              }\n            }\n          }\n          stdDev /= count;\n          stdDev = Math.sqrt(stdDev);\n          cachedStats[targetUID] = {\n            Modality: metadata.Modality,\n            area,\n            mean,\n            stdDev\n          };\n        } else {\n          this.isHandleOutsideImage = true;\n          cachedStats[targetUID] = {\n            Modality: metadata.Modality\n          };\n        }\n      }\n      data.invalidated = false;\n      const eventType = Events.ANNOTATION_MODIFIED;\n      const eventDetail = {\n        annotation,\n        viewportUID,\n        renderingEngineUID,\n        sceneUID: sceneUID\n      };\n      triggerEvent(eventTarget, eventType, eventDetail);\n      return cachedStats;\n    };\n    this._isInsideVolume = (index1, index2, dimensions) => {\n      return csUtils.indexWithinDimensions(index1, dimensions) && csUtils.indexWithinDimensions(index2, dimensions);\n    };\n    this._getTargetVolumeUID = scene => {\n      if (this.configuration.volumeUID) {\n        return this.configuration.volumeUID;\n      }\n      const volumeActors = scene.getVolumeActors();\n      if (!volumeActors && !volumeActors.length) {\n        return;\n      }\n      return volumeActors[0].uid;\n    };\n    this._throttledCalculateCachedStats = throttle(this._calculateCachedStats, 100, {\n      trailing: true\n    });\n  }\n  cancel(element) {\n    if (!this.isDrawing) {\n      return;\n    }\n    this.isDrawing = false;\n    this._deactivateDraw(element);\n    this._deactivateModify(element);\n    resetElementCursor(element);\n    const {\n      annotation,\n      viewportUIDsToRender\n    } = this.editData;\n    const {\n      data\n    } = annotation;\n    data.active = false;\n    data.handles.activeHandleIndex = null;\n    const enabledElement = getEnabledElement(element);\n    const {\n      renderingEngine\n    } = enabledElement;\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportUIDsToRender);\n    this.editData = null;\n    return annotation.metadata.annotationUID;\n  }\n  _getImageVolumeFromTargetUID(targetUID, renderingEngine) {\n    let imageVolume, viewport;\n    if (targetUID.startsWith('stackTarget')) {\n      const coloneIndex = targetUID.indexOf(':');\n      const viewportUID = targetUID.substring(coloneIndex + 1);\n      const viewport = renderingEngine.getViewport(viewportUID);\n      imageVolume = viewport.getImageData();\n    } else {\n      imageVolume = cache.getVolume(targetUID);\n    }\n    return {\n      imageVolume,\n      viewport\n    };\n  }\n  _getTargetStackUID(viewport) {\n    return `stackTarget:${viewport.uid}`;\n  }\n}\nVideoRedactionTool.toolName = 'VideoRedaction';\nexport default VideoRedactionTool;","map":{"version":3,"names":["vec3","vec2","getEnabledElement","triggerEvent","eventTarget","utilities","csUtils","cache","AnnotationTool","throttle","addAnnotation","getAnnotations","removeAnnotation","drawHandles","drawHandlesSvg","drawRedactionRect","drawRedactionRectSvg","state","Events","getViewportIdsWithToolToRender","rectangle","resetElementCursor","hideElementCursor","triggerAnnotationRenderForViewportIds","getWorldWidthAndHeightFromTwoPoints","VideoRedactionTool","constructor","toolConfiguration","supportedInteractionTypes","configuration","shadow","preventHandleOutsideImage","addNewAnnotation","evt","eventData","detail","currentPoints","element","worldPos","world","enabledElement","viewport","renderingEngine","isDrawing","camera","getCamera","viewPlaneNormal","viewUp","referencedImageId","getReferencedImageId","annotation","metadata","FrameOfReferenceUID","getFrameOfReferenceUID","toolName","getToolName","data","invalidated","handles","points","activeHandleIndex","cachedStats","active","viewportUIDsToRender","editData","handleIndex","newAnnotation","hasMoved","_activateDraw","preventDefault","getHandleNearImagePoint","canvasCoords","proximity","i","length","point","toolDataCanvasCoordinate","worldToCanvas","near","distance","isPointNearTool","canvasPoint1","canvasPoint2","rect","_getRectangleImageCoordinates","left","top","width","height","distanceToPoint","toolSelectedCallback","interactionType","_activateModify","handleSelectedCallback","handle","movingTextBox","worldPosition","findIndex","p","_mouseUpCallback","_deactivateModify","_deactivateDraw","isHandleOutsideImage","annotationUID","_mouseDragCallback","undefined","deltaPoints","worldPosDelta","forEach","canvasToWorld","bottomLeftCanvas","bottomRightCanvas","topLeftCanvas","topRightCanvas","bottomLeftWorld","bottomRightWorld","topLeftWorld","topRightWorld","isInteractingWithTool","addEventListener","MOUSE_UP","MOUSE_DRAG","MOUSE_MOVE","MOUSE_CLICK","TOUCH_END","TOUCH_DRAG","removeEventListener","renderAnnotation","svgDrawingHelper","renderStatus","annotations","filterInteractableAnnotationsForElement","targetId","getTargetId","getRenderingEngine","styleSpecifier","toolGroupId","viewportId","id","toolMetadata","canvasCoordinates","map","lineWidth","getStyle","lineDash","color","console","warn","activeHandleCanvasCoords","handleGroupUID","rectangleUID","point0","point1","Math","min","abs","_calculateCachedStats","viewportUID","renderingEngineUID","sceneUID","worldPos1","worldPos2","targetUIDs","Object","keys","targetUID","imageVolume","_getImageVolumeFromTargetUID","dimensions","scalarData","vtkImageData","imageData","worldPos1Index","fromValues","worldPos2Index","worldToIndexVec3","floor","_isInsideVolume","iMin","iMax","max","jMin","jMax","kMin","kMax","worldWidth","worldHeight","area","count","mean","stdDev","yMultiple","zMultiple","k","j","value","valueMinusMean","sqrt","Modality","eventType","ANNOTATION_MODIFIED","eventDetail","index1","index2","indexWithinDimensions","_getTargetVolumeUID","scene","volumeUID","volumeActors","getVolumeActors","uid","_throttledCalculateCachedStats","trailing","cancel","startsWith","coloneIndex","indexOf","substring","getViewport","getImageData","getVolume","_getTargetStackUID"],"sources":["../../../../src/tools/annotation/VideoRedactionTool.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}