{"ast":null,"code":"import { ToolGroupManager } from '../../store';\nimport { ToolModes } from '../../enums';\nimport { keyEventListener } from '../../eventListeners';\nimport getMouseModifier from './getMouseModifier';\nconst {\n  Active\n} = ToolModes;\nexport default function getActiveToolForMouseEvent(evt) {\n  const {\n    renderingEngineId,\n    viewportId\n  } = evt.detail;\n  const mouseEvent = evt.detail.event;\n  const modifierKey = getMouseModifier(mouseEvent) || keyEventListener.getModifierKey();\n  const toolGroup = ToolGroupManager.getToolGroupForViewport(viewportId, renderingEngineId);\n  if (!toolGroup) {\n    return null;\n  }\n  const toolGroupToolNames = Object.keys(toolGroup.toolOptions);\n  const defaultMousePrimary = toolGroup.getDefaultMousePrimary();\n  for (let j = 0; j < toolGroupToolNames.length; j++) {\n    const toolName = toolGroupToolNames[j];\n    const toolOptions = toolGroup.toolOptions[toolName];\n    const correctBinding = toolOptions.bindings.length && toolOptions.bindings.some(binding => {\n      return binding.mouseButton === (mouseEvent ? mouseEvent.buttons : defaultMousePrimary) && binding.modifierKey === modifierKey;\n    });\n    if (toolOptions.mode === Active && correctBinding) {\n      return toolGroup.getToolInstance(toolName);\n    }\n  }\n}","map":{"version":3,"names":["ToolGroupManager","ToolModes","keyEventListener","getMouseModifier","Active","getActiveToolForMouseEvent","evt","renderingEngineId","viewportId","detail","mouseEvent","event","modifierKey","getModifierKey","toolGroup","getToolGroupForViewport","toolGroupToolNames","Object","keys","toolOptions","defaultMousePrimary","getDefaultMousePrimary","j","length","toolName","correctBinding","bindings","some","binding","mouseButton","buttons","mode","getToolInstance"],"sources":["../../../../src/eventDispatchers/shared/getActiveToolForMouseEvent.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,aAAa;AAC9C,SAAwBC,SAAS,QAAQ,aAAa;AACtD,SAASC,gBAAgB,QAAQ,sBAAsB;AAEvD,OAAOC,gBAAgB,MAAM,oBAAoB;AAEjD,MAAM;EAAEC;AAAM,CAAE,GAAGH,SAAS;AAW5B,eAAc,SAAUI,0BAA0BA,CAChDC,GAAwC;EAGxC,MAAM;IAAEC,iBAAiB;IAAEC;EAAU,CAAE,GAAGF,GAAG,CAACG,MAAM;EACpD,MAAMC,UAAU,GAAGJ,GAAG,CAACG,MAAM,CAACE,KAAK;EAKnC,MAAMC,WAAW,GACfT,gBAAgB,CAACO,UAAU,CAAC,IAAIR,gBAAgB,CAACW,cAAc,EAAE;EAEnE,MAAMC,SAAS,GAAGd,gBAAgB,CAACe,uBAAuB,CACxDP,UAAU,EACVD,iBAAiB,CAClB;EAED,IAAI,CAACO,SAAS,EAAE;IACd,OAAO,IAAI;;EAGb,MAAME,kBAAkB,GAAGC,MAAM,CAACC,IAAI,CAACJ,SAAS,CAACK,WAAW,CAAC;EAC7D,MAAMC,mBAAmB,GAAGN,SAAS,CAACO,sBAAsB,EAAE;EAE9D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,kBAAkB,CAACO,MAAM,EAAED,CAAC,EAAE,EAAE;IAClD,MAAME,QAAQ,GAAGR,kBAAkB,CAACM,CAAC,CAAC;IACtC,MAAMH,WAAW,GAAGL,SAAS,CAACK,WAAW,CAACK,QAAQ,CAAC;IAInD,MAAMC,cAAc,GAClBN,WAAW,CAACO,QAAQ,CAACH,MAAM,IAC3BJ,WAAW,CAACO,QAAQ,CAACC,IAAI,CAAEC,OAAO,IAAI;MACpC,OACEA,OAAO,CAACC,WAAW,MAChBnB,UAAU,GAAGA,UAAU,CAACoB,OAAO,GAAGV,mBAAmB,CAAC,IACzDQ,OAAO,CAAChB,WAAW,KAAKA,WAAW;IAEvC,CAAC,CAAC;IAEJ,IAAIO,WAAW,CAACY,IAAI,KAAK3B,MAAM,IAAIqB,cAAc,EAAE;MACjD,OAAOX,SAAS,CAACkB,eAAe,CAACR,QAAQ,CAAC;;;AAGhD"},"metadata":{},"sourceType":"module","externalDependencies":[]}