{"ast":null,"code":"import createViewport from './createViewport';\nimport getImageFitScale from './getImageFitScale';\nexport default function (canvas, image, modality, colormap) {\n  if (canvas === undefined) {\n    throw new Error('getDefaultViewport: parameter canvas must not be undefined');\n  }\n  if (image === undefined) {\n    return createViewport();\n  }\n  const scale = getImageFitScale(canvas, image, 0).scaleFactor;\n  let voi;\n  if (modality === 'PT' && image.isPreScaled) {\n    voi = {\n      windowWidth: 5,\n      windowCenter: 2.5\n    };\n  } else if (image.windowWidth !== undefined && image.windowCenter !== undefined) {\n    voi = {\n      windowWidth: Array.isArray(image.windowWidth) ? image.windowWidth[0] : image.windowWidth,\n      windowCenter: Array.isArray(image.windowCenter) ? image.windowCenter[0] : image.windowCenter\n    };\n  }\n  return {\n    scale,\n    translation: {\n      x: 0,\n      y: 0\n    },\n    voi,\n    invert: image.invert,\n    pixelReplication: false,\n    rotation: 0,\n    hflip: false,\n    vflip: false,\n    modalityLUT: image.modalityLUT,\n    modality,\n    voiLUT: image.voiLUT,\n    colormap: colormap !== undefined ? colormap : image.colormap,\n    displayedArea: {\n      tlhc: {\n        x: 1,\n        y: 1\n      },\n      brhc: {\n        x: image.columns,\n        y: image.rows\n      },\n      rowPixelSpacing: image.rowPixelSpacing === undefined ? 1 : image.rowPixelSpacing,\n      columnPixelSpacing: image.columnPixelSpacing === undefined ? 1 : image.columnPixelSpacing,\n      presentationSizeMode: 'NONE'\n    }\n  };\n}","map":{"version":3,"names":["createViewport","getImageFitScale","canvas","image","modality","colormap","undefined","Error","scale","scaleFactor","voi","isPreScaled","windowWidth","windowCenter","Array","isArray","translation","x","y","invert","pixelReplication","rotation","hflip","vflip","modalityLUT","voiLUT","displayedArea","tlhc","brhc","columns","rows","rowPixelSpacing","columnPixelSpacing","presentationSizeMode"],"sources":["../../../../../../src/RenderingEngine/helpers/cpuFallback/rendering/getDefaultViewport.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,gBAAgB,MAAM,oBAAoB;AAcjD,eAAc,UACZC,MAAyB,EACzBC,KAAa,EACbC,QAAiB,EACjBC,QAA8B;EAE9B,IAAIH,MAAM,KAAKI,SAAS,EAAE;IACxB,MAAM,IAAIC,KAAK,CACb,4DAA4D,CAC7D;;EAGH,IAAIJ,KAAK,KAAKG,SAAS,EAAE;IACvB,OAAON,cAAc,EAAE;;EAIzB,MAAMQ,KAAK,GAAGP,gBAAgB,CAACC,MAAM,EAAEC,KAAK,EAAE,CAAC,CAAC,CAACM,WAAW;EAE5D,IAAIC,GAAG;EAEP,IAAIN,QAAQ,KAAK,IAAI,IAAID,KAAK,CAACQ,WAAW,EAAE;IAC1CD,GAAG,GAAG;MACJE,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE;KACf;GACF,MAAM,IACLV,KAAK,CAACS,WAAW,KAAKN,SAAS,IAC/BH,KAAK,CAACU,YAAY,KAAKP,SAAS,EAChC;IACAI,GAAG,GAAG;MACJE,WAAW,EAAEE,KAAK,CAACC,OAAO,CAACZ,KAAK,CAACS,WAAW,CAAC,GACzCT,KAAK,CAACS,WAAW,CAAC,CAAC,CAAC,GACpBT,KAAK,CAACS,WAAW;MACrBC,YAAY,EAAEC,KAAK,CAACC,OAAO,CAACZ,KAAK,CAACU,YAAY,CAAC,GAC3CV,KAAK,CAACU,YAAY,CAAC,CAAC,CAAC,GACrBV,KAAK,CAACU;KACX;;EAGH,OAAO;IACLL,KAAK;IACLQ,WAAW,EAAE;MACXC,CAAC,EAAE,CAAC;MACJC,CAAC,EAAE;KACJ;IACDR,GAAG;IACHS,MAAM,EAAEhB,KAAK,CAACgB,MAAM;IACpBC,gBAAgB,EAAE,KAAK;IACvBC,QAAQ,EAAE,CAAC;IACXC,KAAK,EAAE,KAAK;IACZC,KAAK,EAAE,KAAK;IACZC,WAAW,EAAErB,KAAK,CAACqB,WAAW;IAC9BpB,QAAQ;IACRqB,MAAM,EAAEtB,KAAK,CAACsB,MAAM;IACpBpB,QAAQ,EAAEA,QAAQ,KAAKC,SAAS,GAAGD,QAAQ,GAAGF,KAAK,CAACE,QAAQ;IAC5DqB,aAAa,EAAE;MACbC,IAAI,EAAE;QACJV,CAAC,EAAE,CAAC;QACJC,CAAC,EAAE;OACJ;MACDU,IAAI,EAAE;QACJX,CAAC,EAAEd,KAAK,CAAC0B,OAAO;QAChBX,CAAC,EAAEf,KAAK,CAAC2B;OACV;MACDC,eAAe,EACb5B,KAAK,CAAC4B,eAAe,KAAKzB,SAAS,GAAG,CAAC,GAAGH,KAAK,CAAC4B,eAAe;MACjEC,kBAAkB,EAChB7B,KAAK,CAAC6B,kBAAkB,KAAK1B,SAAS,GAAG,CAAC,GAAGH,KAAK,CAAC6B,kBAAkB;MACvEC,oBAAoB,EAAE;;GAEzB;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}