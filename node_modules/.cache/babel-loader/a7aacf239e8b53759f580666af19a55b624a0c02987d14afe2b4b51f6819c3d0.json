{"ast":null,"code":"import { eventTarget, Enums } from '@cornerstonejs/core';\nimport { getAnnotationManager } from './stateManagement/annotation/annotationState';\nimport { getDefaultSegmentationStateManager } from './stateManagement/segmentation/segmentationState';\nimport { Events as TOOLS_EVENTS } from './enums';\nimport { addEnabledElement, removeEnabledElement } from './store';\nimport { resetCornerstoneToolsState } from './store/state';\nimport { annotationSelectionListener, segmentationDataModifiedEventListener, segmentationRepresentationModifiedEventListener, segmentationRepresentationRemovedEventListener, segmentationModifiedListener, annotationModifiedListener } from './eventListeners';\nimport * as ToolGroupManager from './store/ToolGroupManager';\nlet csToolsInitialized = false;\nexport function init(defaultConfiguration = {}) {\n  if (csToolsInitialized) {\n    return;\n  }\n  _addCornerstoneEventListeners();\n  _addCornerstoneToolsEventListeners();\n  csToolsInitialized = true;\n}\nexport function destroy() {\n  _removeCornerstoneEventListeners();\n  _removeCornerstoneToolsEventListeners();\n  ToolGroupManager.destroy();\n  resetCornerstoneToolsState();\n  const annotationManager = getAnnotationManager();\n  const segmentationStateManager = getDefaultSegmentationStateManager();\n  annotationManager.restoreAnnotations({});\n  segmentationStateManager.resetState();\n  csToolsInitialized = false;\n}\nfunction _addCornerstoneEventListeners() {\n  _removeCornerstoneEventListeners();\n  const elementEnabledEvent = Enums.Events.ELEMENT_ENABLED;\n  const elementDisabledEvent = Enums.Events.ELEMENT_DISABLED;\n  eventTarget.addEventListener(elementEnabledEvent, addEnabledElement);\n  eventTarget.addEventListener(elementDisabledEvent, removeEnabledElement);\n}\nfunction _removeCornerstoneEventListeners() {\n  const elementEnabledEvent = Enums.Events.ELEMENT_ENABLED;\n  const elementDisabledEvent = Enums.Events.ELEMENT_DISABLED;\n  eventTarget.removeEventListener(elementEnabledEvent, addEnabledElement);\n  eventTarget.removeEventListener(elementDisabledEvent, removeEnabledElement);\n}\nfunction _addCornerstoneToolsEventListeners() {\n  _removeCornerstoneToolsEventListeners();\n  eventTarget.addEventListener(TOOLS_EVENTS.ANNOTATION_MODIFIED, annotationModifiedListener);\n  eventTarget.addEventListener(TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE, annotationSelectionListener);\n  eventTarget.addEventListener(TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE, annotationSelectionListener);\n  eventTarget.addEventListener(TOOLS_EVENTS.SEGMENTATION_MODIFIED, segmentationModifiedListener);\n  eventTarget.addEventListener(TOOLS_EVENTS.SEGMENTATION_DATA_MODIFIED, segmentationDataModifiedEventListener);\n  eventTarget.addEventListener(TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_MODIFIED, segmentationRepresentationModifiedEventListener);\n  eventTarget.addEventListener(TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_REMOVED, segmentationRepresentationRemovedEventListener);\n}\nfunction _removeCornerstoneToolsEventListeners() {\n  eventTarget.removeEventListener(TOOLS_EVENTS.ANNOTATION_MODIFIED, annotationModifiedListener);\n  eventTarget.removeEventListener(TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE, annotationSelectionListener);\n  eventTarget.removeEventListener(TOOLS_EVENTS.ANNOTATION_SELECTION_CHANGE, annotationSelectionListener);\n  eventTarget.removeEventListener(TOOLS_EVENTS.SEGMENTATION_MODIFIED, segmentationModifiedListener);\n  eventTarget.removeEventListener(TOOLS_EVENTS.SEGMENTATION_DATA_MODIFIED, segmentationDataModifiedEventListener);\n  eventTarget.removeEventListener(TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_MODIFIED, segmentationRepresentationModifiedEventListener);\n  eventTarget.removeEventListener(TOOLS_EVENTS.SEGMENTATION_REPRESENTATION_REMOVED, segmentationRepresentationRemovedEventListener);\n}\nexport default init;","map":{"version":3,"names":["eventTarget","Enums","getAnnotationManager","getDefaultSegmentationStateManager","Events","TOOLS_EVENTS","addEnabledElement","removeEnabledElement","resetCornerstoneToolsState","annotationSelectionListener","segmentationDataModifiedEventListener","segmentationRepresentationModifiedEventListener","segmentationRepresentationRemovedEventListener","segmentationModifiedListener","annotationModifiedListener","ToolGroupManager","csToolsInitialized","init","defaultConfiguration","_addCornerstoneEventListeners","_addCornerstoneToolsEventListeners","destroy","_removeCornerstoneEventListeners","_removeCornerstoneToolsEventListeners","annotationManager","segmentationStateManager","restoreAnnotations","resetState","elementEnabledEvent","ELEMENT_ENABLED","elementDisabledEvent","ELEMENT_DISABLED","addEventListener","removeEventListener","ANNOTATION_MODIFIED","ANNOTATION_SELECTION_CHANGE","SEGMENTATION_MODIFIED","SEGMENTATION_DATA_MODIFIED","SEGMENTATION_REPRESENTATION_MODIFIED","SEGMENTATION_REPRESENTATION_REMOVED"],"sources":["../../src/init.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}