{"ast":null,"code":"import { _cloneDeep } from 'lodash.clonedeep';\nimport { getEnabledElementByIds, volumeLoader, VolumeViewport, utilities as csUtils } from '@cornerstonejs/core';\nexport default async function createLabelmapVolumeForViewport(input) {\n  const {\n    viewportId,\n    renderingEngineId,\n    options\n  } = input;\n  let {\n    segmentationId\n  } = input;\n  const enabledElement = getEnabledElementByIds(viewportId, renderingEngineId);\n  if (!enabledElement) {\n    throw new Error('element disabled');\n  }\n  const {\n    viewport\n  } = enabledElement;\n  if (!(viewport instanceof VolumeViewport)) {\n    throw new Error('Segmentation only supports VolumeViewport');\n  }\n  const {\n    uid\n  } = viewport.getDefaultActor();\n  if (segmentationId === undefined) {\n    segmentationId = `${uid}-based-segmentation-${options?.volumeId ?? csUtils.uuidv4().slice(0, 8)}`;\n  }\n  if (options) {\n    const properties = _cloneDeep(options);\n    await volumeLoader.createLocalVolume(properties, segmentationId);\n  } else {\n    const {\n      uid: volumeId\n    } = viewport.getDefaultActor();\n    await volumeLoader.createAndCacheDerivedSegmentationVolume(volumeId, {\n      volumeId: segmentationId\n    });\n  }\n  return segmentationId;\n}","map":{"version":3,"names":["_cloneDeep","getEnabledElementByIds","volumeLoader","VolumeViewport","utilities","csUtils","createLabelmapVolumeForViewport","input","viewportId","renderingEngineId","options","segmentationId","enabledElement","Error","viewport","uid","getDefaultActor","undefined","volumeId","uuidv4","slice","properties","createLocalVolume","createAndCacheDerivedSegmentationVolume"],"sources":["../../../../src/utilities/segmentation/createLabelmapVolumeForViewport.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,UAAU,QAAQ,kBAAkB;AAC7C,SACEC,sBAAsB,EACtBC,YAAY,EACZC,cAAc,EACdC,SAAS,IAAIC,OAAO,QACf,qBAAqB;AAc5B,eAAe,eAAeC,+BAA+BA,CAACC,KAgB7D;EACC,MAAM;IAAEC,UAAU;IAAEC,iBAAiB;IAAEC;EAAO,CAAE,GAAGH,KAAK;EACxD,IAAI;IAAEI;EAAc,CAAE,GAAGJ,KAAK;EAC9B,MAAMK,cAAc,GAAGX,sBAAsB,CAACO,UAAU,EAAEC,iBAAiB,CAAC;EAE5E,IAAI,CAACG,cAAc,EAAE;IACnB,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC;;EAGrC,MAAM;IAAEC;EAAQ,CAAE,GAAGF,cAAc;EACnC,IAAI,EAAEE,QAAQ,YAAYX,cAAc,CAAC,EAAE;IACzC,MAAM,IAAIU,KAAK,CAAC,2CAA2C,CAAC;;EAG9D,MAAM;IAAEE;EAAG,CAAE,GAAGD,QAAQ,CAACE,eAAe,EAAE;EAE1C,IAAIL,cAAc,KAAKM,SAAS,EAAE;IAEhCN,cAAc,GAAG,GAAGI,GAAG,uBACrBL,OAAO,EAAEQ,QAAQ,IAAIb,OAAO,CAACc,MAAM,EAAE,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAClD,EAAE;;EAGJ,IAAIV,OAAO,EAAE;IAGX,MAAMW,UAAU,GAAGrB,UAAU,CAACU,OAAO,CAAC;IACtC,MAAMR,YAAY,CAACoB,iBAAiB,CAACD,UAAU,EAAEV,cAAc,CAAC;GACjE,MAAM;IAEL,MAAM;MAAEI,GAAG,EAAEG;IAAQ,CAAE,GAAGJ,QAAQ,CAACE,eAAe,EAAE;IACpD,MAAMd,YAAY,CAACqB,uCAAuC,CAACL,QAAQ,EAAE;MACnEA,QAAQ,EAAEP;KACX,CAAC;;EAGJ,OAAOA,cAAc;AACvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}