{"ast":null,"code":"import { Events } from '../../enums';\nimport { getEnabledElement, triggerEvent, eventTarget, utilities as csUtils } from '@cornerstonejs/core';\nimport { AnnotationTool } from '../base';\nimport { addAnnotation, getAnnotations, removeAnnotation } from '../../stateManagement/annotation/annotationState';\nimport { drawArrow as drawArrowSvg } from '../../drawingSvg';\nimport { state } from '../../store';\nimport { getViewportIdsWithToolToRender } from '../../utilities/viewportFilters';\nimport triggerAnnotationRenderForViewportIds from '../../utilities/triggerAnnotationRenderForViewportIds';\nimport { resetElementCursor } from '../../cursors/elementCursor';\nclass KeyImageTool extends AnnotationTool {\n  constructor(toolProps = {}, defaultToolProps = {\n    supportedInteractionTypes: ['Mouse', 'Touch'],\n    configuration: {\n      getTextCallback,\n      changeTextCallback,\n      canvasPosition: [10, 10],\n      canvasSize: 10\n    }\n  }) {\n    super(toolProps, defaultToolProps);\n    this.addNewAnnotation = evt => {\n      const eventDetail = evt.detail;\n      const {\n        currentPoints,\n        element\n      } = eventDetail;\n      const worldPos = currentPoints.world;\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport,\n        renderingEngine\n      } = enabledElement;\n      const camera = viewport.getCamera();\n      const {\n        viewPlaneNormal,\n        viewUp\n      } = camera;\n      const referencedImageId = this.getReferencedImageId(viewport, worldPos, viewPlaneNormal, viewUp);\n      const FrameOfReferenceUID = viewport.getFrameOfReferenceUID();\n      const annotation = {\n        annotationUID: null,\n        highlighted: true,\n        invalidated: true,\n        metadata: {\n          toolName: this.getToolName(),\n          viewPlaneNormal: [...viewPlaneNormal],\n          viewUp: [...viewUp],\n          FrameOfReferenceUID,\n          referencedImageId\n        },\n        data: {\n          text: '',\n          handles: {\n            points: new Array(),\n            textBox: {\n              hasMoved: false,\n              worldPosition: [0, 0, 0],\n              worldBoundingBox: {\n                topLeft: [0, 0, 0],\n                topRight: [0, 0, 0],\n                bottomLeft: [0, 0, 0],\n                bottomRight: [0, 0, 0]\n              }\n            }\n          },\n          label: ''\n        }\n      };\n      addAnnotation(annotation, element);\n      const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n      evt.preventDefault();\n      triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      this.configuration.getTextCallback(text => {\n        if (!text) {\n          removeAnnotation(annotation.annotationUID);\n          triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n          this.isDrawing = false;\n          return;\n        }\n        annotation.data.text = text;\n        const eventType = Events.ANNOTATION_COMPLETED;\n        const eventDetail = {\n          annotation\n        };\n        triggerEvent(eventTarget, eventType, eventDetail);\n        triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n      });\n      return annotation;\n    };\n    this.isPointNearTool = (element, annotation, canvasCoords, proximity) => {\n      const enabledElement = getEnabledElement(element);\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        data\n      } = annotation;\n      const {\n        canvasPosition,\n        canvasSize\n      } = this.configuration;\n      if (!canvasPosition?.length) {\n        return false;\n      }\n      if (Math.abs(canvasCoords[0] - canvasPosition[0] + canvasSize / 2) <= canvasSize / 2 && Math.abs(canvasCoords[1] - canvasPosition[1] + canvasSize / 2) <= canvasSize / 2) {\n        return true;\n      }\n      return false;\n    };\n    this.toolSelectedCallback = (evt, annotation) => {\n      annotation.highlighted = true;\n      evt.preventDefault();\n    };\n    this._endCallback = evt => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      this._deactivateModify(element);\n      resetElementCursor(element);\n    };\n    this.doubleClickCallback = evt => {\n      const eventDetail = evt.detail;\n      const {\n        element\n      } = eventDetail;\n      let annotations = getAnnotations(this.getToolName(), element);\n      annotations = this.filterInteractableAnnotationsForElement(element, annotations);\n      if (!annotations?.length) {\n        return;\n      }\n      const clickedAnnotation = annotations.find(annotation => this.isPointNearTool(element, annotation, eventDetail.currentPoints.canvas, 6));\n      if (!clickedAnnotation) {\n        return;\n      }\n      const annotation = clickedAnnotation;\n      this.configuration.changeTextCallback(clickedAnnotation, evt.detail, this._doneChangingTextCallback.bind(this, element, annotation));\n      this.isDrawing = false;\n      evt.stopImmediatePropagation();\n      evt.preventDefault();\n    };\n    this._activateModify = element => {\n      state.isInteractingWithTool = true;\n      element.addEventListener(Events.MOUSE_UP, this._endCallback);\n      element.addEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.addEventListener(Events.TOUCH_TAP, this._endCallback);\n      element.addEventListener(Events.TOUCH_END, this._endCallback);\n    };\n    this._deactivateModify = element => {\n      state.isInteractingWithTool = false;\n      element.removeEventListener(Events.MOUSE_UP, this._endCallback);\n      element.removeEventListener(Events.MOUSE_CLICK, this._endCallback);\n      element.removeEventListener(Events.TOUCH_TAP, this._endCallback);\n      element.removeEventListener(Events.TOUCH_END, this._endCallback);\n    };\n    this.renderAnnotation = (enabledElement, svgDrawingHelper) => {\n      let renderStatus = false;\n      const {\n        viewport\n      } = enabledElement;\n      const {\n        element\n      } = viewport;\n      let annotations = getAnnotations(this.getToolName(), element);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      annotations = this.filterInteractableAnnotationsForElement(element, annotations);\n      if (!annotations?.length) {\n        return renderStatus;\n      }\n      const styleSpecifier = {\n        toolGroupId: this.toolGroupId,\n        toolName: this.getToolName(),\n        viewportId: enabledElement.viewport.id\n      };\n      for (let i = 0; i < annotations.length; i++) {\n        const annotation = annotations[i];\n        const {\n          annotationUID\n        } = annotation;\n        styleSpecifier.annotationUID = annotationUID;\n        const {\n          color\n        } = this.getAnnotationStyle({\n          annotation,\n          styleSpecifier\n        });\n        const {\n          canvasPosition,\n          canvasSize\n        } = this.configuration;\n        if (canvasPosition?.length) {\n          const arrowUID = '1';\n          drawArrowSvg(svgDrawingHelper, annotationUID, arrowUID, canvasPosition.map(it => it + canvasSize), canvasPosition, {\n            color,\n            width: 1\n          });\n        }\n        renderStatus = true;\n        if (!viewport.getRenderingEngine()) {\n          console.warn('Rendering Engine has been destroyed');\n          return renderStatus;\n        }\n      }\n      return renderStatus;\n    };\n  }\n  cancel() {}\n  handleSelectedCallback(evt, annotation, handle) {}\n  _doneChangingTextCallback(element, annotation, updatedText) {\n    annotation.data.text = updatedText;\n    const {\n      renderingEngine,\n      viewportId,\n      renderingEngineId\n    } = getEnabledElement(element);\n    const viewportIdsToRender = getViewportIdsWithToolToRender(element, this.getToolName());\n    triggerAnnotationRenderForViewportIds(renderingEngine, viewportIdsToRender);\n    const eventType = Events.ANNOTATION_MODIFIED;\n    triggerEvent(eventTarget, eventType, {\n      annotation,\n      viewportId,\n      renderingEngineId\n    });\n  }\n  _isInsideVolume(index1, index2, dimensions) {\n    return csUtils.indexWithinDimensions(index1, dimensions) && csUtils.indexWithinDimensions(index2, dimensions);\n  }\n}\nfunction getTextCallback(doneChangingTextCallback) {\n  return doneChangingTextCallback(prompt('Enter your annotation:'));\n}\nfunction changeTextCallback(data, eventData, doneChangingTextCallback) {\n  return doneChangingTextCallback(prompt('Enter your annotation:'));\n}\nKeyImageTool.toolName = 'KeyImage';\nexport default KeyImageTool;","map":{"version":3,"names":["Events","getEnabledElement","triggerEvent","eventTarget","utilities","csUtils","AnnotationTool","addAnnotation","getAnnotations","removeAnnotation","drawArrow","drawArrowSvg","state","getViewportIdsWithToolToRender","triggerAnnotationRenderForViewportIds","resetElementCursor","KeyImageTool","constructor","toolProps","defaultToolProps","supportedInteractionTypes","configuration","getTextCallback","changeTextCallback","canvasPosition","canvasSize","addNewAnnotation","evt","eventDetail","detail","currentPoints","element","worldPos","world","enabledElement","viewport","renderingEngine","camera","getCamera","viewPlaneNormal","viewUp","referencedImageId","getReferencedImageId","FrameOfReferenceUID","getFrameOfReferenceUID","annotation","annotationUID","highlighted","invalidated","metadata","toolName","getToolName","data","text","handles","points","Array","textBox","hasMoved","worldPosition","worldBoundingBox","topLeft","topRight","bottomLeft","bottomRight","label","viewportIdsToRender","preventDefault","isDrawing","eventType","ANNOTATION_COMPLETED","isPointNearTool","canvasCoords","proximity","length","Math","abs","toolSelectedCallback","_endCallback","_deactivateModify","doubleClickCallback","annotations","filterInteractableAnnotationsForElement","clickedAnnotation","find","canvas","_doneChangingTextCallback","bind","stopImmediatePropagation","_activateModify","isInteractingWithTool","addEventListener","MOUSE_UP","MOUSE_CLICK","TOUCH_TAP","TOUCH_END","removeEventListener","renderAnnotation","svgDrawingHelper","renderStatus","styleSpecifier","toolGroupId","viewportId","id","i","color","getAnnotationStyle","arrowUID","map","it","width","getRenderingEngine","console","warn","cancel","handleSelectedCallback","handle","updatedText","renderingEngineId","ANNOTATION_MODIFIED","_isInsideVolume","index1","index2","dimensions","indexWithinDimensions","doneChangingTextCallback","prompt","eventData"],"sources":["../../../../src/tools/annotation/KeyImageTool.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,MAAM,QAAQ,aAAa;AACpC,SACEC,iBAAiB,EACjBC,YAAY,EACZC,WAAW,EACXC,SAAS,IAAIC,OAAO,QACf,qBAAqB;AAG5B,SAASC,cAAc,QAAQ,SAAS;AACxC,SACEC,aAAa,EACbC,cAAc,EACdC,gBAAgB,QACX,kDAAkD;AAEzD,SAASC,SAAS,IAAIC,YAAY,QAAQ,kBAAkB;AAC5D,SAASC,KAAK,QAAQ,aAAa;AACnC,SAASC,8BAA8B,QAAQ,iCAAiC;AAChF,OAAOC,qCAAqC,MAAM,uDAAuD;AAGzG,SAASC,kBAAkB,QAAQ,6BAA6B;AAchE,MAAMC,YAAa,SAAQV,cAAc;EAiBvCW,YACEC,SAAA,GAA6B,EAAE,EAC/BC,gBAAA,GAA8B;IAC5BC,yBAAyB,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;IAC7CC,aAAa,EAAE;MACbC,eAAe;MACfC,kBAAkB;MAClBC,cAAc,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;MACxBC,UAAU,EAAE;;GAEf;IAED,KAAK,CAACP,SAAS,EAAEC,gBAAgB,CAAC;IAWpC,KAAAO,gBAAgB,GAAIC,GAAoC,IAAI;MAC1D,MAAMC,WAAW,GAAGD,GAAG,CAACE,MAAM;MAC9B,MAAM;QAAEC,aAAa;QAAEC;MAAO,CAAE,GAAGH,WAAW;MAC9C,MAAMI,QAAQ,GAAGF,aAAa,CAACG,KAAK;MACpC,MAAMC,cAAc,GAAGjC,iBAAiB,CAAC8B,OAAO,CAAC;MACjD,MAAM;QAAEI,QAAQ;QAAEC;MAAe,CAAE,GAAGF,cAAc;MAEpD,MAAMG,MAAM,GAAGF,QAAQ,CAACG,SAAS,EAAE;MACnC,MAAM;QAAEC,eAAe;QAAEC;MAAM,CAAE,GAAGH,MAAM;MAE1C,MAAMI,iBAAiB,GAAG,IAAI,CAACC,oBAAoB,CACjDP,QAAQ,EACRH,QAAQ,EACRO,eAAe,EACfC,MAAM,CACP;MAED,MAAMG,mBAAmB,GAAGR,QAAQ,CAACS,sBAAsB,EAAE;MAE7D,MAAMC,UAAU,GAAG;QACjBC,aAAa,EAAE,IAAc;QAC7BC,WAAW,EAAE,IAAI;QACjBC,WAAW,EAAE,IAAI;QACjBC,QAAQ,EAAE;UACRC,QAAQ,EAAE,IAAI,CAACC,WAAW,EAAE;UAC5BZ,eAAe,EAAgB,CAAC,GAAGA,eAAe,CAAC;UACnDC,MAAM,EAAgB,CAAC,GAAGA,MAAM,CAAC;UACjCG,mBAAmB;UACnBF;SACD;QACDW,IAAI,EAAE;UACJC,IAAI,EAAE,EAAE;UACRC,OAAO,EAAE;YACPC,MAAM,EAAE,IAAIC,KAAK,EAAgB;YACjCC,OAAO,EAAE;cACPC,QAAQ,EAAE,KAAK;cACfC,aAAa,EAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;cACtCC,gBAAgB,EAAE;gBAChBC,OAAO,EAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBAChCC,QAAQ,EAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACjCC,UAAU,EAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnCC,WAAW,EAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;;;WAGxC;UACDC,KAAK,EAAE;;OAEV;MAED1D,aAAa,CAACsC,UAAU,EAAEd,OAAO,CAAC;MAElC,MAAMmC,mBAAmB,GAAGrD,8BAA8B,CACxDkB,OAAO,EACP,IAAI,CAACoB,WAAW,EAAE,CACnB;MAEDxB,GAAG,CAACwC,cAAc,EAAE;MAEpBrD,qCAAqC,CAACsB,eAAe,EAAE8B,mBAAmB,CAAC;MAE3E,IAAI,CAAC7C,aAAa,CAACC,eAAe,CAAE+B,IAAI,IAAI;QAC1C,IAAI,CAACA,IAAI,EAAE;UACT5C,gBAAgB,CAACoC,UAAU,CAACC,aAAa,CAAC;UAC1ChC,qCAAqC,CACnCsB,eAAe,EACf8B,mBAAmB,CACpB;UACD,IAAI,CAACE,SAAS,GAAG,KAAK;UACtB;;QAEFvB,UAAU,CAACO,IAAI,CAACC,IAAI,GAAGA,IAAI;QAE3B,MAAMgB,SAAS,GAAGrE,MAAM,CAACsE,oBAAoB;QAE7C,MAAM1C,WAAW,GAAmC;UAClDiB;SACD;QAED3C,YAAY,CAACC,WAAW,EAAEkE,SAAS,EAAEzC,WAAW,CAAC;QAEjDd,qCAAqC,CACnCsB,eAAe,EACf8B,mBAAmB,CACpB;MACH,CAAC,CAAC;MAEF,OAAOrB,UAAU;IACnB,CAAC;IAiBD,KAAA0B,eAAe,GAAG,CAChBxC,OAAuB,EACvBc,UAAsB,EACtB2B,YAA0B,EAC1BC,SAAiB,KACN;MACX,MAAMvC,cAAc,GAAGjC,iBAAiB,CAAC8B,OAAO,CAAC;MACjD,MAAM;QAAEI;MAAQ,CAAE,GAAGD,cAAc;MACnC,MAAM;QAAEkB;MAAI,CAAE,GAAGP,UAAU;MAE3B,MAAM;QAAErB,cAAc;QAAEC;MAAU,CAAE,GAAG,IAAI,CAACJ,aAAa;MACzD,IAAI,CAACG,cAAc,EAAEkD,MAAM,EAAE;QAC3B,OAAO,KAAK;;MAEd,IACEC,IAAI,CAACC,GAAG,CAACJ,YAAY,CAAC,CAAC,CAAC,GAAGhD,cAAc,CAAC,CAAC,CAAC,GAAGC,UAAU,GAAG,CAAC,CAAC,IAC5DA,UAAU,GAAG,CAAC,IAChBkD,IAAI,CAACC,GAAG,CAACJ,YAAY,CAAC,CAAC,CAAC,GAAGhD,cAAc,CAAC,CAAC,CAAC,GAAGC,UAAU,GAAG,CAAC,CAAC,IAC5DA,UAAU,GAAG,CAAC,EAChB;QACA,OAAO,IAAI;;MAEb,OAAO,KAAK;IACd,CAAC;IAED,KAAAoD,oBAAoB,GAAG,CACrBlD,GAAoC,EACpCkB,UAAsB,KACd;MACRA,UAAU,CAACE,WAAW,GAAG,IAAI;MAE7BpB,GAAG,CAACwC,cAAc,EAAE;IACtB,CAAC;IAUD,KAAAW,YAAY,GAAInD,GAAoC,IAAU;MAC5D,MAAMC,WAAW,GAAGD,GAAG,CAACE,MAAM;MAC9B,MAAM;QAAEE;MAAO,CAAE,GAAGH,WAAW;MAE/B,IAAI,CAACmD,iBAAiB,CAAChD,OAAO,CAAC;MAC/BhB,kBAAkB,CAACgB,OAAO,CAAC;IAC7B,CAAC;IAED,KAAAiD,mBAAmB,GAAIrD,GAAiC,IAAU;MAChE,MAAMC,WAAW,GAAGD,GAAG,CAACE,MAAM;MAC9B,MAAM;QAAEE;MAAO,CAAE,GAAGH,WAAW;MAC/B,IAAIqD,WAAW,GAAGzE,cAAc,CAAC,IAAI,CAAC2C,WAAW,EAAE,EAAEpB,OAAO,CAAC;MAE7DkD,WAAW,GAAG,IAAI,CAACC,uCAAuC,CACxDnD,OAAO,EACPkD,WAAW,CACZ;MAED,IAAI,CAACA,WAAW,EAAEP,MAAM,EAAE;QACxB;;MAGF,MAAMS,iBAAiB,GAAGF,WAAW,CAACG,IAAI,CAAEvC,UAAU,IACpD,IAAI,CAAC0B,eAAe,CAClBxC,OAAO,EACPc,UAAwB,EACxBjB,WAAW,CAACE,aAAa,CAACuD,MAAM,EAChC,CAAC,CACF,CACF;MAED,IAAI,CAACF,iBAAiB,EAAE;QACtB;;MAGF,MAAMtC,UAAU,GAAGsC,iBAA+B;MAElD,IAAI,CAAC9D,aAAa,CAACE,kBAAkB,CACnC4D,iBAAiB,EACjBxD,GAAG,CAACE,MAAM,EACV,IAAI,CAACyD,yBAAyB,CAACC,IAAI,CAAC,IAAI,EAAExD,OAAO,EAAEc,UAAU,CAAC,CAC/D;MAED,IAAI,CAACuB,SAAS,GAAG,KAAK;MAMtBzC,GAAG,CAAC6D,wBAAwB,EAAE;MAC9B7D,GAAG,CAACwC,cAAc,EAAE;IACtB,CAAC;IAwBD,KAAAsB,eAAe,GAAI1D,OAAuB,IAAI;MAC5CnB,KAAK,CAAC8E,qBAAqB,GAAG,IAAI;MAElC3D,OAAO,CAAC4D,gBAAgB,CACtB3F,MAAM,CAAC4F,QAAQ,EACf,IAAI,CAACd,YAA6B,CACnC;MACD/C,OAAO,CAAC4D,gBAAgB,CACtB3F,MAAM,CAAC6F,WAAW,EAClB,IAAI,CAACf,YAA6B,CACnC;MAED/C,OAAO,CAAC4D,gBAAgB,CACtB3F,MAAM,CAAC8F,SAAS,EAChB,IAAI,CAAChB,YAA6B,CACnC;MACD/C,OAAO,CAAC4D,gBAAgB,CACtB3F,MAAM,CAAC+F,SAAS,EAChB,IAAI,CAACjB,YAA6B,CACnC;IACH,CAAC;IAED,KAAAC,iBAAiB,GAAIhD,OAAuB,IAAI;MAC9CnB,KAAK,CAAC8E,qBAAqB,GAAG,KAAK;MAEnC3D,OAAO,CAACiE,mBAAmB,CACzBhG,MAAM,CAAC4F,QAAQ,EACf,IAAI,CAACd,YAA6B,CACnC;MACD/C,OAAO,CAACiE,mBAAmB,CACzBhG,MAAM,CAAC6F,WAAW,EAClB,IAAI,CAACf,YAA6B,CACnC;MAED/C,OAAO,CAACiE,mBAAmB,CACzBhG,MAAM,CAAC8F,SAAS,EAChB,IAAI,CAAChB,YAA6B,CACnC;MACD/C,OAAO,CAACiE,mBAAmB,CACzBhG,MAAM,CAAC+F,SAAS,EAChB,IAAI,CAACjB,YAA6B,CACnC;IACH,CAAC;IAUD,KAAAmB,gBAAgB,GAAG,CACjB/D,cAAqC,EACrCgE,gBAAkC,KACvB;MACX,IAAIC,YAAY,GAAG,KAAK;MACxB,MAAM;QAAEhE;MAAQ,CAAE,GAAGD,cAAc;MACnC,MAAM;QAAEH;MAAO,CAAE,GAAGI,QAAQ;MAE5B,IAAI8C,WAAW,GAAGzE,cAAc,CAAC,IAAI,CAAC2C,WAAW,EAAE,EAAEpB,OAAO,CAAC;MAG7D,IAAI,CAACkD,WAAW,EAAEP,MAAM,EAAE;QACxB,OAAOyB,YAAY;;MAGrBlB,WAAW,GAAG,IAAI,CAACC,uCAAuC,CACxDnD,OAAO,EACPkD,WAAW,CACZ;MAED,IAAI,CAACA,WAAW,EAAEP,MAAM,EAAE;QACxB,OAAOyB,YAAY;;MAGrB,MAAMC,cAAc,GAAmB;QACrCC,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7BnD,QAAQ,EAAE,IAAI,CAACC,WAAW,EAAE;QAC5BmD,UAAU,EAAEpE,cAAc,CAACC,QAAQ,CAACoE;OACrC;MAGD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGvB,WAAW,CAACP,MAAM,EAAE8B,CAAC,EAAE,EAAE;QAC3C,MAAM3D,UAAU,GAAGoC,WAAW,CAACuB,CAAC,CAAC;QACjC,MAAM;UAAE1D;QAAa,CAAE,GAAGD,UAAU;QAEpCuD,cAAc,CAACtD,aAAa,GAAGA,aAAa;QAE5C,MAAM;UAAE2D;QAAK,CAAE,GAAG,IAAI,CAACC,kBAAkB,CAAC;UACxC7D,UAAU;UACVuD;SACD,CAAC;QAEF,MAAM;UAAE5E,cAAc;UAAEC;QAAU,CAAE,GAAG,IAAI,CAACJ,aAAa;QACzD,IAAIG,cAAc,EAAEkD,MAAM,EAAE;UAC1B,MAAMiC,QAAQ,GAAG,GAAG;UACpBhG,YAAY,CACVuF,gBAAgB,EAChBpD,aAAa,EACb6D,QAAQ,EACRnF,cAAc,CAACoF,GAAG,CAAEC,EAAE,IAAKA,EAAE,GAAGpF,UAAU,CAAW,EACrDD,cAAwB,EACxB;YACEiF,KAAK;YACLK,KAAK,EAAE;WACR,CACF;;QAGHX,YAAY,GAAG,IAAI;QAGnB,IAAI,CAAChE,QAAQ,CAAC4E,kBAAkB,EAAE,EAAE;UAClCC,OAAO,CAACC,IAAI,CAAC,qCAAqC,CAAC;UACnD,OAAOd,YAAY;;;MAIvB,OAAOA,YAAY;IACrB,CAAC;EA/VD;EAmGOe,MAAMA,CAAA,GAEb;EA+CAC,sBAAsBA,CACpBxF,GAAoC,EACpCkB,UAAsB,EACtBuE,MAAkB,GAGpB;EAuDA9B,yBAAyBA,CAACvD,OAAO,EAAEc,UAAU,EAAEwE,WAAW;IACxDxE,UAAU,CAACO,IAAI,CAACC,IAAI,GAAGgE,WAAW;IAElC,MAAM;MAAEjF,eAAe;MAAEkE,UAAU;MAAEgB;IAAiB,CAAE,GACtDrH,iBAAiB,CAAC8B,OAAO,CAAC;IAE5B,MAAMmC,mBAAmB,GAAGrD,8BAA8B,CACxDkB,OAAO,EACP,IAAI,CAACoB,WAAW,EAAE,CACnB;IACDrC,qCAAqC,CAACsB,eAAe,EAAE8B,mBAAmB,CAAC;IAG3E,MAAMG,SAAS,GAAGrE,MAAM,CAACuH,mBAAmB;IAE5CrH,YAAY,CAACC,WAAW,EAAEkE,SAAS,EAAE;MACnCxB,UAAU;MACVyD,UAAU;MACVgB;KACD,CAAC;EACJ;EA4HAE,eAAeA,CAACC,MAAM,EAAEC,MAAM,EAAEC,UAAU;IACxC,OACEtH,OAAO,CAACuH,qBAAqB,CAACH,MAAM,EAAEE,UAAU,CAAC,IACjDtH,OAAO,CAACuH,qBAAqB,CAACF,MAAM,EAAEC,UAAU,CAAC;EAErD;;AAGF,SAASrG,eAAeA,CAACuG,wBAAwB;EAC/C,OAAOA,wBAAwB,CAACC,MAAM,CAAC,wBAAwB,CAAC,CAAC;AACnE;AAEA,SAASvG,kBAAkBA,CAAC6B,IAAI,EAAE2E,SAAS,EAAEF,wBAAwB;EACnE,OAAOA,wBAAwB,CAACC,MAAM,CAAC,wBAAwB,CAAC,CAAC;AACnE;AAEA9G,YAAY,CAACkC,QAAQ,GAAG,UAAU;AAElC,eAAelC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}